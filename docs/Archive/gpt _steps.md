–§–∏–Ω–∞–ª—å–Ω—ã–π –ø–æ—à–∞–≥–æ–≤—ã–π –ø–ª–∞–Ω –≤–Ω–µ–¥—Ä–µ–Ω–∏—è –º–Ω–æ–≥–æ—Ñ—Ä–µ–π–º–Ω–æ–π —Å–∫–∞–ª—å–ø–∏–Ω–≥–æ–≤–æ–π —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
–¶–µ–ª—å —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏:
‚Äì –¢–æ—Ä–≥–æ–≤–∞—Ç—å USDC‚ÄØfutures –Ω–∞ Binance —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Ç—Ä—ë—Ö —Ç–∞–π–º—Ñ—Ä–µ–π–º–æ–≤:
‚Ä¢ 1 —á–∞—Å –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ —Ç—Ä–µ–Ω–¥–∞,
‚Ä¢ 15 –º–∏–Ω—É—Ç –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤,
‚Ä¢ 5 –º–∏–Ω—É—Ç –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –≤—Ö–æ–¥–∞.
‚Äì –£–ø—Ä–∞–≤–ª—è—Ç—å —Ä–∏—Å–∫–∞–º–∏ —Å —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π —Ä–∏—Å–∫–∞ 5% –æ—Ç –¥–µ–ø–æ–∑–∏—Ç–∞ (–Ω–∞ –Ω–∞—á–∞–ª—å–Ω–æ–º —ç—Ç–∞–ø–µ) –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è —á–∏—Å–ª–∞ —Å–¥–µ–ª–æ–∫ (–º–∏–Ω–∏–º—É–º 10 —Å–¥–µ–ª–æ–∫ –≤ –¥–µ–Ω—å).
‚Äì –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å –∫–∞–ø–∏—Ç–∞–ª –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ (–Ω–∞—á–∏–Ω–∞—è —Å 44 USD, –∑–∞—Ç–µ–º –¥–æ 600‚Äì1500 USD).

–®–∞–≥ 1. –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç–∏
–ß—Ç–æ –¥–µ–ª–∞–µ–º:
‚Äì –ü–æ–¥–∫–ª—é—á–∞–µ–º—Å—è –∫ Binance —á–µ—Ä–µ–∑ ccxt –∏ –∑–∞–≥—Ä—É–∂–∞–µ–º OHLCV-–¥–∞–Ω–Ω—ã–µ –¥–ª—è —Ç—Ä—ë—Ö —Ç–∞–π–º—Ñ—Ä–µ–π–º–æ–≤: 1h, 15m, 5m.
‚Äì –î–æ–±–∞–≤–ª—è–µ–º –ø—Ä–æ–≤–µ—Ä–∫—É –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç–∏: –µ—Å–ª–∏ —Å—Ä–µ–¥–Ω–∏–π –æ–±—ä—ë–º —Ç–æ—Ä–≥–æ–≤ –Ω–∏–∂–µ –∑–∞–¥–∞–Ω–Ω–æ–≥–æ –ø–æ—Ä–æ–≥–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 10,000), –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –æ—Ç—Å–µ–∫–∞–µ—Ç—Å—è.

–ü–æ—á–µ–º—É:
–≠—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç –∏–∑–±–µ–∂–∞—Ç—å —Ç–æ—Ä–≥–æ–≤–ª–∏ –Ω–∞ –Ω–∏–∑–∫–æ–ª–∏–∫–≤–∏–¥–Ω—ã—Ö –ø–∞—Ä–∞—Ö, –≥–¥–µ –≤—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫ –ø—Ä–æ—Å–∫–∞–ª—å–∑—ã–≤–∞–Ω–∏—è –∏ –Ω–µ—É—Å—Ç–æ–π—á–∏–≤—ã—Ö –¥–≤–∏–∂–µ–Ω–∏–π.

–ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞ (strategy.py):

python
Copy
import ccxt
import pandas as pd
import ta
from utils_logging import log

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∏—Ä–∂–∏ (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ config.py)

exchange = ccxt.binance({
'apiKey': 'YOUR_API_KEY',
'secret': 'YOUR_SECRET',
'enableRateLimit': True,
})

def fetch_data(symbol, timeframe, limit=100):
try:
ohlcv = exchange.fetch_ohlcv(symbol, timeframe, limit=limit)
df = pd.DataFrame(ohlcv, columns=["timestamp", "open", "high", "low", "close", "volume"])
df["timestamp"] = pd.to_datetime(df["timestamp"], unit="ms") # –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç–∏: –µ—Å–ª–∏ –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Å–≤–µ—á–∏ –∏–º–µ—é—Ç –Ω–∏–∑–∫–∏–π –æ–±—ä—ë–º, –æ—Ç—Å–µ–∫–∞–µ–º
avg_vol = df["volume"].mean()
min_vol_threshold = 10000 # –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–æ—Ä–æ–≥ –ø–æ –æ–±—ä—ë–º—É
if avg_vol < min_vol_threshold:
log(f"{symbol} –æ—Ç–∫–ª–æ–Ω—ë–Ω: –Ω–∏–∑–∫–∞—è –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç—å (—Å—Ä. –æ–±—ä—ë–º {avg_vol:.2f})", level="INFO")
return None
return df
except Exception as e:
log(f"Error fetching data for {symbol}: {e}", level="ERROR")
return None
–ö—Ä–∞—Ç–∫–æ–µ —Å–∞–º–º–∞—Ä–∏: –§—É–Ω–∫—Ü–∏—è fetch_data –∑–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏ –æ—Ç—Å–µ–∫–∞–µ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Å –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–º –æ–±—ä—ë–º–æ–º —Ç–æ—Ä–≥–æ–≤, —á—Ç–æ–±—ã —É–º–µ–Ω—å—à–∏—Ç—å —Ä–∏—Å–∫ –ø—Ä–æ—Å–∫–∞–ª—å–∑—ã–≤–∞–Ω–∏—è.

–®–∞–≥ 2. –†–∞—Å—á—ë—Ç –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∞–π–º—Ñ—Ä–µ–π–º–æ–≤
–ß—Ç–æ –¥–µ–ª–∞–µ–º:
‚Äì –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∞–π–º—Ñ—Ä–µ–π–º–∞ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã:

1 —á–∞—Å: EMA50 –∏ EMA200 (–¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç—Ä–µ–Ω–¥–∞).

15 –º–∏–Ω—É—Ç: MACD (–ª–∏–Ω–∏—è –∏ —Å–∏–≥–Ω–∞–ª), RSI, ATR (–¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–∏–≥–Ω–∞–ª–∞ –∏ —Ä–∞—Å—á—ë—Ç–∞ SL/TP).

5 –º–∏–Ω—É—Ç: Stochastic RSI (–¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —Ç–æ—á–Ω–æ–≥–æ –≤—Ö–æ–¥–∞).

–ü–æ—á–µ–º—É:
–ö–∞–∂–¥—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø–æ–º–æ–≥–∞–µ—Ç –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä—ã–Ω–æ–∫ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —É—Ä–æ–≤–Ω—è—Ö: EMA –∑–∞–¥–∞—ë—Ç –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ —Å—Ç–∞—Ä—à–µ–º –¢–§, MACD –∏ RSI –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç —Å–∏–≥–Ω–∞–ª—ã –Ω–∞ 15m, –∞ Stochastic RSI –Ω–∞ 5m —É—Ç–æ—á–Ω—è–µ—Ç –º–æ–º–µ–Ω—Ç –≤—Ö–æ–¥–∞.

–ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞ (strategy.py):

python
Copy
def calculate_indicators(df, timeframe):
if timeframe == '1h':
df['EMA50'] = ta.trend.EMAIndicator(df['close'], window=50).ema_indicator()
df['EMA200'] = ta.trend.EMAIndicator(df['close'], window=200).ema_indicator()
elif timeframe == '15m':
macd_obj = ta.trend.MACD(df['close'])
df['MACD'] = macd_obj.macd()
df['MACD_signal'] = macd_obj.macd_signal()
df['RSI'] = ta.momentum.RSIIndicator(df['close'], window=14).rsi()
df['ATR'] = ta.volatility.AverageTrueRange(df['high'], df['low'], df['close'], window=14).average_true_range()
elif timeframe == '5m': # –î–ª—è 5-–º–∏–Ω—É—Ç–Ω–æ–≥–æ —Ç–∞–π–º—Ñ—Ä–µ–π–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Stochastic RSI –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –≤—Ö–æ–¥–∞
stochrsi = ta.momentum.StochRSIIndicator(df['close'], window=14)
df['Stoch_RSI_K'] = stochrsi.stochrsi_k() \* 100
return df
–ö—Ä–∞—Ç–∫–æ–µ —Å–∞–º–º–∞—Ä–∏: –í—ã—á–∏—Å–ª—è–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –≤—Å—é –Ω–µ–æ–±—Ö–æ–¥–∏–º—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞.

–®–∞–≥ 3. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ —Ç—Ä–µ–Ω–¥–∞ (1h)
–ß—Ç–æ –¥–µ–ª–∞–µ–º:
‚Äì –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º 1-—á–∞—Å–æ–≤–æ–π –≥—Ä–∞—Ñ–∏–∫ –ø–æ EMA50 –∏ EMA200 –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç—Ä–µ–Ω–¥–∞.

–ü–æ—á–µ–º—É:
–û–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–π –≥–ª–æ–±–∞–ª—å–Ω—ã–π —Ç—Ä–µ–Ω–¥ –ø–æ–º–æ–≥–∞–µ—Ç —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å —Å–∏–≥–Ω–∞–ª—ã, –∏–∑–±–µ–≥–∞—è –≤—Ö–æ–¥–æ–≤ –ø—Ä–æ—Ç–∏–≤ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä—ã–Ω–∫–∞.

–ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞ (strategy.py):

python
Copy
def get_trend(df_1h):
if df_1h is None or df_1h.empty:
return 'neutral'
return 'bullish' if df_1h['EMA50'].iloc[-1] > df_1h['EMA200'].iloc[-1] else 'bearish'
–ö—Ä–∞—Ç–∫–æ–µ —Å–∞–º–º–∞—Ä–∏: –§—É–Ω–∫—Ü–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 'bullish' –¥–ª—è –≤–æ—Å—Ö–æ–¥—è—â–µ–≥–æ —Ç—Ä–µ–Ω–¥–∞ –∏ 'bearish' –¥–ª—è –Ω–∏—Å—Ö–æ–¥—è—â–µ–≥–æ, —á—Ç–æ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ —Å–∏–≥–Ω–∞–ª–æ–≤.

–®–∞–≥ 4. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–æ—Ä–≥–æ–≤—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤ (15m) —Å —É—á–µ—Ç–æ–º —Ç—Ä–µ–Ω–¥–∞
–ß—Ç–æ –¥–µ–ª–∞–µ–º:
‚Äì –ù–∞ 15-–º–∏–Ω—É—Ç–Ω–æ–º –≥—Ä–∞—Ñ–∏–∫–µ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º MACD –∏ RSI.
‚Äì –î–ª—è –≤—Ö–æ–¥–∞ –≤ –ª–æ–Ω–≥: MACD > MACD_signal –∏ RSI < 50 (–ø—Ä–∏ –≤–æ—Å—Ö–æ–¥—è—â–µ–º —Ç—Ä–µ–Ω–¥–µ).
‚Äì –î–ª—è –≤—Ö–æ–¥–∞ –≤ —à–æ—Ä—Ç: MACD < MACD_signal –∏ RSI > 50 (–ø—Ä–∏ –Ω–∏—Å—Ö–æ–¥—è—â–µ–º —Ç—Ä–µ–Ω–¥–µ).
‚Äì –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ, –µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–æ —Å—Ç–∞—Ä—à–µ–º—É —Ç–∞–π–º—Ñ—Ä–µ–π–º—É (USE_HTF_CONFIRMATION), —Å–∏–≥–Ω–∞–ª –¥–æ–ª–∂–µ–Ω —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º —Ç—Ä–µ–Ω–¥–∞.

–ü–æ—á–µ–º—É:
–≠—Ç–∞ –∫–æ–º–±–∏–Ω–∞—Ü–∏—è –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç, —á—Ç–æ —Ç–æ—Ä–≥–æ–≤—ã–π —Å–∏–≥–Ω–∞–ª —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –≥–ª–æ–±–∞–ª—å–Ω–æ–º—É –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—é —Ä—ã–Ω–∫–∞, —Å–Ω–∏–∂–∞—è –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –∫–æ–Ω—Ç—Ä—Ç—Ä–µ–Ω–¥–æ–≤—ã—Ö –≤—Ö–æ–¥–æ–≤.

–ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞ (strategy.py):

python
Copy
def generate_signal(df_15m, trend, use_htf_confirmation=True):
if df_15m is None or df_15m.empty:
return None # –û—Å–Ω–æ–≤–Ω–æ–π —Å–∏–≥–Ω–∞–ª –ø–æ MACD –∏ RSI –Ω–∞ 15m
if trend == 'bullish' and df_15m['MACD'].iloc[-1] > df_15m['MACD_signal'].iloc[-1] and df_15m['RSI'].iloc[-1] < 50:
direction = 'buy'
elif trend == 'bearish' and df_15m['MACD'].iloc[-1] < df_15m['MACD_signal'].iloc[-1] and df_15m['RSI'].iloc[-1] > 50:
direction = 'sell'
else:
return None

    # –§–∏–ª—å—Ç—Ä —Ç—Ä–µ–Ω–¥–∞: —Å–∏–≥–Ω–∞–ª –¥–æ–ª–∂–µ–Ω —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å–æ —Å—Ç–∞—Ä—à–∏–º —Ç–∞–π–º—Ñ—Ä–µ–π–º–æ–º
    if use_htf_confirmation:
        # –ó–¥–µ—Å—å –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è, —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è get_trend —É–∂–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –¥–ª—è 1h
        if direction == 'buy' and trend != 'bullish':
            log("Buy —Å–∏–≥–Ω–∞–ª –æ—Ç–∫–ª–æ–Ω—ë–Ω: —Ç—Ä–µ–Ω–¥ –Ω–µ bullish", level="INFO")
            return None
        if direction == 'sell' and trend != 'bearish':
            log("Sell —Å–∏–≥–Ω–∞–ª –æ—Ç–∫–ª–æ–Ω—ë–Ω: —Ç—Ä–µ–Ω–¥ –Ω–µ bearish", level="INFO")
            return None

    return direction

–ö—Ä–∞—Ç–∫–æ–µ —Å–∞–º–º–∞—Ä–∏: –°–∏–≥–Ω–∞–ª –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ MACD –∏ RSI, –∞ –∑–∞—Ç–µ–º –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç—Å—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ–º –≥–ª–æ–±–∞–ª—å–Ω–æ–º—É —Ç—Ä–µ–Ω–¥—É.

–®–∞–≥ 5. –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –≤—Ö–æ–¥–∞ (5m)
–ß—Ç–æ –¥–µ–ª–∞–µ–º:
‚Äì –ù–∞ 5-–º–∏–Ω—É—Ç–Ω–æ–º –≥—Ä–∞—Ñ–∏–∫–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º Stochastic RSI –¥–ª—è —É—Ç–æ—á–Ω–µ–Ω–∏—è –º–æ–º–µ–Ω—Ç–∞ –≤—Ö–æ–¥–∞.
‚Äì –î–ª—è –ª–æ–Ω–≥–∞ –≤—Ö–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç—Å—è, –µ—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ Stoch_RSI_K < 20; –¥–ª—è —à–æ—Ä—Ç–∞ ‚Äì –µ—Å–ª–∏ > 80.

–ü–æ—á–µ–º—É:
–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –Ω–∞ –º–ª–∞–¥—à–µ–º —Ç–∞–π–º—Ñ—Ä–µ–π–º–µ –ø–æ–º–æ–≥–∞–µ—Ç –≤—ã–±—Ä–∞—Ç—å –±–æ–ª–µ–µ –≤—ã–≥–æ–¥–Ω—ã–π –º–æ–º–µ–Ω—Ç –≤—Ö–æ–¥–∞ –∏ –∏–∑–±–µ–∂–∞—Ç—å –ª–æ–∂–Ω—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è —Ç–æ—á–Ω–æ–µ —Ç–∞–π–º–∏—Ä–æ–≤–∞–Ω–∏–µ.

–ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞ (strategy.py):

python
Copy
def confirm_entry(df_5m, signal):
if df_5m is None or df_5m.empty:
return False
if signal == 'buy' and df_5m['Stoch_RSI_K'].iloc[-1] < 20:
return True
elif signal == 'sell' and df_5m['Stoch_RSI_K'].iloc[-1] > 80:
return True
return False
–ö—Ä–∞—Ç–∫–æ–µ —Å–∞–º–º–∞—Ä–∏: –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –≤—Ö–æ–¥–∞ —á–µ—Ä–µ–∑ Stochastic RSI –Ω–∞ 5m –º–∏–Ω–∏–º–∏–∑–∏—Ä—É–µ—Ç —Ä–∏—Å–∫ –ª–æ–∂–Ω–æ–≥–æ –≤—Ö–æ–¥–∞.

–®–∞–≥ 6. –†–∞—Å—á—ë—Ç —Å—Ç–æ–ø-–ª–æ—Å—Å–∞ –∏ —Ç–µ–π–∫-–ø—Ä–æ—Ñ–∏—Ç–∞, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∏—Å–∫–∞–º–∏
–ß—Ç–æ –¥–µ–ª–∞–µ–º:
‚Äì –í—ã—á–∏—Å–ª—è–µ–º —É—Ä–æ–≤–Ω–∏ SL –∏ TP –Ω–∞ –æ—Å–Ω–æ–≤–µ ATR, —Å —É—á–µ—Ç–æ–º –∞–¥–∞–ø—Ç–∞—Ü–∏–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä—ã–Ω–æ—á–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞.
‚Äì –†–∏—Å–∫ –Ω–∞ —Å–¥–µ–ª–∫—É —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤ 5% –æ—Ç –¥–µ–ø–æ–∑–∏—Ç–∞.
‚Äì –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º —Ä–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ –ø–æ —Ñ–æ—Ä–º—É–ª–µ:
qty = risk_amount / |entry_price - stop_price|

–ü–æ—á–µ–º—É:
–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞—â–∏—Ç–∏—Ç—å –¥–µ–ø–æ–∑–∏—Ç –ø—Ä–∏ –Ω–µ–±–ª–∞–≥–æ–ø—Ä–∏—è—Ç–Ω–æ–º –¥–≤–∏–∂–µ–Ω–∏–∏ —Ü–µ–Ω—ã, –∞ —Ç–∞–∫–∂–µ –æ–±–µ—Å–ø–µ—á–∏—Ç—å –¥–æ—Å—Ç–∞—Ç–æ—á–Ω—É—é –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—É—é –ø—Ä–∏–±—ã–ª—å (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ —Ä–∏—Å–∫/–≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–µ ~1:1.33).

–ù–∞—Å—Ç—Ä–æ–π–∫–∏ (config.py):

python
Copy

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ä–∏—Å–∫ –Ω–∞ —Å–¥–µ–ª–∫—É 5%

RISK_PERCENT = 0.05 # 5% –æ—Ç –¥–µ–ø–æ–∑–∏—Ç–∞

# –ü–∞—Ä–∞–º–µ—Ç—Ä—ã TP/SL

TP1_PERCENT = 0.007 # 0.7% –ø—Ä–∏—Ä–æ—Å—Ç–∞
TP2_PERCENT = 0.013 # 1.3% –ø—Ä–∏—Ä–æ—Å—Ç–∞
SL_PERCENT = 0.01 # 1% —Å—Ç–æ–ø-–ª–æ—Å—Å

# –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –Ω–æ—Ç–∏–æ–Ω–∞–ª (–æ–±–Ω–æ–≤–ª—è–µ–º –¥–ª—è –º–∞–ª–µ–Ω—å–∫–æ–≥–æ –¥–µ–ø–æ–∑–∏—Ç–∞)

MIN_NOTIONAL = 2
–ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞ (trade_engine.py):

python
Copy
def calculate_risk_amount(balance, risk_percent):
return balance \* risk_percent

def calculate_position_size(entry_price, stop_price, risk_amount):
risk_per_unit = abs(entry_price - stop_price)
if risk_per_unit == 0:
return 0
return round(risk_amount / risk_per_unit, 3)

def calculate_sl_tp(df_15m, entry_price, direction):
atr = df_15m['ATR'].iloc[-1]
if direction == 'buy':
sl = entry_price - atr _ 1.5
tp = entry_price + atr _ 2
else:
sl = entry_price + atr _ 1.5
tp = entry_price - atr _ 2
return sl, tp
–ö—Ä–∞—Ç–∫–æ–µ —Å–∞–º–º–∞—Ä–∏: –ú—ã —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ä–∏—Å–∫ –Ω–∞ —Å–¥–µ–ª–∫—É –≤ 5% –∏ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º —Ä–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, —á—Ç–æ–±—ã –ø–æ—Ç–µ—Ä–∏ –ø—Ä–∏ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–∏ —Å—Ç–æ–ø-–ª–æ—Å—Å–∞ –±—ã–ª–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω—ã. –¢–∞–∫–∂–µ —É—Ä–æ–≤–Ω–∏ TP/SL —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ ATR –¥–ª—è –∞–¥–∞–ø—Ç–∞—Ü–∏–∏ –∫ –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏.

–®–∞–≥ 7. –í—ã—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –æ—Ä–¥–µ—Ä–æ–≤ –∏ —Å–æ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏
–ß—Ç–æ –¥–µ–ª–∞–µ–º:
‚Äì –ü–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —Å–∏–≥–Ω–∞–ª–∞ –Ω–∞ –≤—Å–µ—Ö —Ç–∞–π–º—Ñ—Ä–µ–π–º–∞—Ö –≤—ã—á–∏—Å–ª—è–µ–º —Ç–æ—á–∫—É –≤—Ö–æ–¥–∞, —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º SL/TP, –ø—Ä–æ–≤–µ—Ä—è–µ–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–∫—Ä—ã—Ç–∏—è –ø–æ–∑–∏—Ü–∏–∏ (–ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –∏ –Ω–æ—Ç–∏–æ–Ω–∞–ª—É) –∏ –≤—ã–∑—ã–≤–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è —Å–¥–µ–ª–∫–∏.
‚Äì –í —Ä–µ–∂–∏–º–µ REAL_RUN —Ñ—É–Ω–∫—Ü–∏—è enter_trade() (–≤ —Ñ–∞–π–ª–µ trade_engine.py) –≤—ã—Å—Ç–∞–≤–ª—è–µ—Ç –æ—Ä–¥–µ—Ä–∞:

–õ–∏–º–∏—Ç–Ω—ã–π –æ—Ä–¥–µ—Ä –Ω–∞ TP1 (–¥–ª—è 70% –ø–æ–∑–∏—Ü–∏–∏),

–õ–∏–º–∏—Ç–Ω—ã–π –æ—Ä–¥–µ—Ä –Ω–∞ TP2 (–¥–ª—è –æ—Å—Ç–∞–≤—à–µ–π—Å—è —á–∞—Å—Ç–∏, –µ—Å–ª–∏ –ø—Ä–∏–º–µ–Ω–∏–º–æ),

–°—Ç–æ–ø-–æ—Ä–¥–µ—Ä (STOP_MARKET) –Ω–∞ SL. ‚Äì –ï—Å–ª–∏ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω—ã –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã (Soft Exit, Break-Even, Trailing Stop), –æ–Ω–∏ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –ø–æ—Ç–æ–∫–∞—Ö –¥–ª—è —Å–æ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏—è –æ—Ç–∫—Ä—ã—Ç–æ–π –ø–æ–∑–∏—Ü–∏–∏.

–ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞ (trade_engine.py):

python
Copy
def enter_trade(symbol, direction, qty, entry_price, score, is_reentry=False): # –†–∞—Å—Å—á–∏—Ç–∞—Ç—å —É—Ä–æ–≤–Ω–∏ TP –∏ SL
tp1_price = entry_price _ (1 + TP1_PERCENT) if direction == "buy" else entry_price _ (1 - TP1_PERCENT)
tp2_price = entry_price _ (1 + TP2_PERCENT) if direction == "buy" else entry_price _ (1 - TP2_PERCENT)
sl_price = entry_price _ (1 - SL_PERCENT) if direction == "buy" else entry_price _ (1 + SL_PERCENT)

    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ –Ω–æ—Ç–∏–æ–Ω–∞–ª–∞
    if qty * entry_price < MIN_NOTIONAL:
        log(f"{symbol} ‚ö†Ô∏è Notional too low: {qty*entry_price:.2f} USD", level="WARNING")
        return

    # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ö–æ–¥–∞
    log(f"{symbol} üöÄ –û—Ç–∫—Ä—ã—Ç–∏–µ {direction.upper()} –ø–æ–∑–∏—Ü–∏–∏: –¶–µ–Ω–∞ –≤—Ö–æ–¥–∞ {entry_price:.4f}, "
        f"QTY {qty}, SL {sl_price:.4f}, TP1 {tp1_price:.4f}, TP2 {tp2_price:.4f}", level="INFO")

    # –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram (REAL_RUN)
    if not DRY_RUN:
        message = f"üöÄ OPEN {direction.upper()} {symbol} @ {entry_price:.4f}\n" \
                  f"SL: {sl_price:.4f}, TP1: {tp1_price:.4f}, TP2: {tp2_price:.4f}"
        send_telegram_message(message, force=True)

    # –í—ã–∑–æ–≤ API –¥–ª—è –≤—ã—Å—Ç–∞–≤–ª–µ–Ω–∏—è –æ—Ä–¥–µ—Ä–æ–≤ (–ø—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è safe_call_retry)
    if DRY_RUN:
        log(f"[DRY] –°–∏–º—É–ª—è—Ü–∏—è –≤—Ö–æ–¥–∞ {symbol}: {direction.upper()} @ {entry_price:.4f}", level="INFO")
    else:
        # –ü—Ä–∏–º–µ—Ä –¥–ª—è TP1
        safe_call_retry(exchange.create_limit_order, symbol, "sell" if direction=="buy" else "buy",
                        qty * TP1_SHARE, tp1_price, label=f"create_limit_order TP1 {symbol}")
        # –ü—Ä–∏–º–µ—Ä –¥–ª—è TP2, –µ—Å–ª–∏ –ø—Ä–∏–º–µ–Ω–∏–º–æ
        if tp2_price and qty * TP2_SHARE > 0:
            safe_call_retry(exchange.create_limit_order, symbol, "sell" if direction=="buy" else "buy",
                            qty * TP2_SHARE, tp2_price, label=f"create_limit_order TP2 {symbol}")
        # –°—Ç–æ–ø-–æ—Ä–¥–µ—Ä
        safe_call_retry(exchange.create_order, symbol, "STOP_MARKET",
                        "sell" if direction=="buy" else "buy", qty,
                        params={"stopPrice": round(sl_price,4), "reduceOnly": True},
                        label=f"create_stop_order {symbol}")

–ö—Ä–∞—Ç–∫–æ–µ —Å–∞–º–º–∞—Ä–∏: –§—É–Ω–∫—Ü–∏—è enter_trade –≤—ã—Å—Ç–∞–≤–ª—è–µ—Ç –æ—Ä–¥–µ—Ä–∞ —Å–æ–≥–ª–∞—Å–Ω–æ —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–Ω—ã–º —É—Ä–æ–≤–Ω—è–º, –∏—Å–ø–æ–ª—å–∑—É—è –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –≤—ã–∑–æ–≤—ã –∫ API, –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –¥–ª—è —Å–æ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏—è –ø–æ–∑–∏—Ü–∏–∏ (Soft Exit, Trailing Stop, Break-Even).

–®–∞–≥ 8. –û—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª –±–æ—Ç–∞ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–¥–µ–ª–æ–∫
–ß—Ç–æ –¥–µ–ª–∞–µ–º:
‚Äì –°–æ–±–∏—Ä–∞–µ–º –≤—Å–µ —ç—Ç–∞–ø—ã –≤ –µ–¥–∏–Ω—ã–π —Ü–∏–∫–ª, –∫–æ—Ç–æ—Ä—ã–π –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É) –æ–±–Ω–æ–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ, –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–∏–≥–Ω–∞–ª—ã –∏, –µ—Å–ª–∏ —É—Å–ª–æ–≤–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω—ã, –∑–∞–ø—É—Å–∫–∞–µ—Ç –≤—Ö–æ–¥ –≤ –ø–æ–∑–∏—Ü–∏—é.
‚Äì –õ–æ–≥–∏—Ä—É–µ–º –∫–∞–∂–¥—É—é —Å–¥–µ–ª–∫—É –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ Telegram.

–ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞ (main.py):

python
Copy
import time
import pandas as pd
from strategy import fetch_data, calculate_indicators, get_trend, generate_signal, confirm_entry
from trade_engine import enter_trade
from utils_core import get_cached_balance
from utils_logging import log

# –°–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ç–æ—Ä–≥–æ–≤—ã—Ö –ø–∞—Ä (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∏–∑ config.py –∏–ª–∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∏–∑ pair_selector)

SYMBOLS_ACTIVE = ['BTC/USDC', 'ETH/USDC', 'ADA/USDC']

while True:
balance = get_cached_balance()
for symbol in SYMBOLS_ACTIVE:
df_1h = fetch_data(symbol, '1h', limit=100)
if not df_1h: continue
df_1h = calculate_indicators(df_1h, '1h')
trend = get_trend(df_1h) # 'bullish' –∏–ª–∏ 'bearish'

        df_15m = fetch_data(symbol, '15m', limit=100)
        if not df_15m: continue
        df_15m = calculate_indicators(df_15m, '15m')
        direction = generate_signal(df_15m, trend, use_htf_confirmation=True)
        if direction is None:
            continue

        df_5m = fetch_data(symbol, '5m', limit=20)
        if not df_5m: continue
        df_5m = calculate_indicators(df_5m, '5m')
        if not confirm_entry(df_5m, direction):
            log(f"{symbol} ‚è≥ –í—Ö–æ–¥ –Ω–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω –Ω–∞ 5m", level="DEBUG")
            continue

        entry_price = df_5m["close"].iloc[-1]
        # –†–∞—Å—á—ë—Ç SL –∏ TP –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–∞–Ω–Ω—ã—Ö 15m
        sl, tp = calculate_sl_tp(df_15m, entry_price, direction)

        # –†–∏—Å–∫-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç: —Ä–∞—Å—á–µ—Ç —Å—É–º–º—ã —Ä–∏—Å–∫–∞ (5% –æ—Ç –±–∞–ª–∞–Ω—Å–∞)
        risk_amount = balance * 0.05
        qty = calculate_position_size(entry_price, sl, risk_amount)

        # –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ –Ω–æ—Ç–∏–æ–Ω–∞–ª–∞
        if qty * entry_price < MIN_NOTIONAL:
            log(f"{symbol} ‚ö†Ô∏è Notional —Å–ª–∏—à–∫–æ–º –º–∞–ª: {qty*entry_price:.2f} USD", level="WARNING")
            continue

        # –í—ã–∑–æ–≤ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è –æ—Ä–¥–µ—Ä–æ–≤
        enter_trade(symbol, direction, qty, entry_price, score=5, is_reentry=False)

    time.sleep(60)  # –¶–∏–∫–ª –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É

–ö—Ä–∞—Ç–∫–æ–µ —Å–∞–º–º–∞—Ä–∏: –û—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª –≤ main.py –ø—Ä–æ—Ö–æ–¥–∏—Ç –ø–æ –∞–∫—Ç–∏–≤–Ω—ã–º –ø–∞—Ä–∞–º, –æ–±–Ω–æ–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ, –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–∏–≥–Ω–∞–ª—ã —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Ç—Ä—ë—Ö —Ç–∞–π–º—Ñ—Ä–µ–π–º–æ–≤ –∏ –≤—ã–∑—ã–≤–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é enter_trade, –µ—Å–ª–∏ –≤—Å–µ —É—Å–ª–æ–≤–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω—ã. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ–º–æ–≥—É—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —Ä–∞–±–æ—Ç—É –±–æ—Ç–∞ –≤ —Ä–µ–∂–∏–º–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏.

–®–∞–≥ 9. –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ, –∫–æ–Ω—Ç—Ä–æ–ª—å –ø—Ä–∏–±—ã–ª–∏ –∏ –¥–∞–ª—å–Ω–µ–π—à–∏–µ —É–ª—É—á—à–µ–Ω–∏—è
–ß—Ç–æ –¥–µ–ª–∞–µ–º:
‚Äì –î–ª—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è —Ü–µ–ª–∏ (50 USD –ø—Ä–∏–±—ã–ª–∏ –≤ –¥–µ–Ω—å) –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É–≤–µ–ª–∏—á–∏–≤–∞—Ç—å –∫–∞–ø–∏—Ç–∞–ª –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–µ—Ä–∏–æ–¥–∞.
‚Äì –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É (win rate, PnL, drawdown) —Å –ø–æ–º–æ—â—å—é –æ—Ç—á–µ—Ç–æ–≤ –∏–∑ stats.py –∏ score_heatmap.py.
‚Äì –†–µ–≥—É–ª—è—Ä–Ω–æ –ø–µ—Ä–µ—Å–º–∞—Ç—Ä–∏–≤–∞–π—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –º–Ω–æ–∂–∏—Ç–µ–ª—å ATR, –ø–æ—Ä–æ–≥–∏ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤) —Å —É—á–µ—Ç–æ–º –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —á–µ—Ä–µ–∑ –º–æ–¥—É–ª–∏ TP Optimizer.

–ü–æ—á–µ–º—É:
–° —É–≤–µ–ª–∏—á–µ–Ω–∏–µ–º –∫–∞–ø–∏—Ç–∞–ª–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–æ 600‚Äì1500 USD) –±–æ—Ç —Å–º–æ–∂–µ—Ç —Å–æ–≤–µ—Ä—à–∞—Ç—å —Å–¥–µ–ª–∫–∏ —Å –±–æ–ª–µ–µ –≤—ã—Å–æ–∫–∏–º –æ–±—ä–µ–º–æ–º, –∞ 5% —Ä–∏—Å–∫ –Ω–∞ —Å–¥–µ–ª–∫—É –æ–±–µ—Å–ø–µ—á–∏—Ç –¥–æ—Å—Ç–∞—Ç–æ—á–Ω—É—é –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ 50 —Å–¥–µ–ª–∫–∞—Ö –≤ –¥–µ–Ω—å, –∫–∞–∫ —Ä–∞—Å—á–µ—Ç—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç). –ü–æ—Å—Ç–æ—è–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∏ –∞–¥–∞–ø—Ç–∞—Ü–∏—è —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –ø–æ–∑–≤–æ–ª—è—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –¥–∞–∂–µ –ø—Ä–∏ –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ–º —Ä—ã–Ω–∫–µ.

–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—é:
‚Äì –ü–æ—Å–ª–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–µ—Ä–∏–æ–¥–∞ (1‚Äì2 –Ω–µ–¥–µ–ª–∏) —Ä–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –∫–∞–ø–∏—Ç–∞–ª–∞: —Å–Ω–∞—á–∞–ª–∞ –¥–æ 500 USD, –∑–∞—Ç–µ–º –¥–æ 1,000 USD.
‚Äì –í–Ω–µ—Å—Ç–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:

python
Copy

# config.py

RISK_PERCENT = 0.05
MAX_OPEN_POSITIONS = 3 # –Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –±–æ–ª–µ–µ –∞–≥—Ä–µ—Å—Å–∏–≤–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞
MIN_NOTIONAL = 2
‚Äì –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ—Ç—á—ë—Ç—ã –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ç–æ—Ä—ã (tp_optimizer, tp_optimizer_ml) –¥–ª—è —Ä–µ–≥—É–ª—è—Ä–Ω–æ–π –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤.

–®–∞–≥ 10. –ò—Ç–æ–≥ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
–ß—Ç–æ –¥–µ–ª–∞–µ–º:
‚Äì –û–±—ä–µ–¥–∏–Ω–∏—Ç—å –≤—Å—é –ª–æ–≥–∏–∫—É –≤ –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω—ã–π —Ä–∞–±–æ—á–∏–π –ø—Ä–æ—Ü–µ—Å—Å, —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º—É –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (entry_logger, tp_logger) –∏ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ Telegram –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å–æ–±—ã—Ç–∏–π (–æ—Ç–∫—Ä—ã—Ç–∏–µ, –∑–∞–∫—Ä—ã—Ç–∏–µ, —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–µ —Å—Ç–æ–ø-–æ—Ä–¥–µ—Ä–∞, –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏). ‚Äì –ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É: –µ–∂–µ–¥–Ω–µ–≤–Ω–æ –∏ –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –æ—Ç—á—ë—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏ –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ —Å–¥–µ–ª–æ–∫, win rate, PnL –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∫–∞–∂–¥–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏.

–ü–æ—á–µ–º—É:
–ü–æ—Å—Ç–æ—è–Ω–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ ‚Äì –∫–ª—é—á –∫ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏. –ï—Å–ª–∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –Ω–∞—á–∏–Ω–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–µ —Ç–∞–∫, –∫–∞–∫ –æ–∂–∏–¥–∞–ª–æ—Å—å, –ø–æ –æ—Ç—á–µ—Ç–∞–º –º–æ–∂–Ω–æ –±—ã—Å—Ç—Ä–æ —Å–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏.

–ó–∞–∫–ª—é—á–µ–Ω–∏–µ
–†–µ–∑—é–º–µ –ø–ª–∞–Ω–∞:

–î–∞–Ω–Ω—ã–µ –∏ –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç—å: –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è 1h, 15m, 5m –∏ –æ—Ç—Å–µ–∫–∞–µ–º –Ω–µ–ª–∏–∫–≤–∏–¥–Ω—ã–µ –ø–∞—Ä—ã.

–ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã: –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º EMA, MACD, RSI, ATR –¥–ª—è 15m –∏ 1h; Stochastic RSI –¥–ª—è 5m.

–¢—Ä–µ–Ω–¥: –û–ø—Ä–µ–¥–µ–ª—è–µ–º –≥–ª–æ–±–∞–ª—å–Ω—ã–π —Ç—Ä–µ–Ω–¥ –ø–æ 1h (EMA50 vs EMA200).

–°–∏–≥–Ω–∞–ª: –ù–∞ 15m –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Å–∏–≥–Ω–∞–ª (buy/sell) —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –ø–æ MACD/RSI, –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –æ—Ç—Å–µ–∫–∞—è —Å–∏–≥–Ω–∞–ª—ã, –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∞—â–∏–µ —Ç—Ä–µ–Ω–¥—É.

–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ: –ù–∞ 5m –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ–º –≤—Ö–æ–¥ —á–µ—Ä–µ–∑ Stochastic RSI.

–†–∏—Å–∫-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç: –†–∏—Å–∫ 5% –æ—Ç –¥–µ–ø–æ–∑–∏—Ç–∞, —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –ø–æ–∑–∏—Ü–∏—é, –ø—Ä–æ–≤–µ—Ä—è–µ–º MIN_NOTIONAL.

–ò—Å–ø–æ–ª–Ω–µ–Ω–∏–µ: –í—ã—Å—Ç–∞–≤–ª—è–µ–º –æ—Ä–¥–µ—Ä–∞ (TP1, TP2, SL) —Å —É—á–µ—Ç–æ–º –∞–≤—Ç–æ-–∞–¥–∞–ø—Ç–∞—Ü–∏–∏ TP/SL –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä—ã–Ω–æ—á–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞, –∞ —Ç–∞–∫–∂–µ –≤–∫–ª—é—á–∞–µ–º Soft Exit, Trailing Stop –∏ Break-Even.

–û—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª: –ü–µ—Ä–µ–±–∏—Ä–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–µ –ø–∞—Ä—ã, —Ä–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è—è –¥–∞–Ω–Ω—ã–µ –∏ —Å–∏–≥–Ω–∞–ª—ã.

–ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ: –ü–æ —É—Å–ø–µ—à–Ω—ã–º —Ç–µ—Å—Ç–∞–º —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º –∫–∞–ø–∏—Ç–∞–ª –∏ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, –æ—Ä–∏–µ–Ω—Ç–∏—Ä—É—è—Å—å –Ω–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ 50 USD –ø—Ä–∏–±—ã–ª–∏ –≤ –¥–µ–Ω—å.

–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –æ—Ç—á–µ—Ç—ã: –õ–æ–≥–∏—Ä—É–µ–º –∫–∞–∂–¥—É—é —Å–¥–µ–ª–∫—É, –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram –∏ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–π –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏.

–î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ —Ü–µ–ª–µ–≤–æ–π –ø—Ä–∏–±—ã–ª–∏ –≤ 50 USD –≤ –¥–µ–Ω—å –≤–æ–∑–º–æ–∂–Ω–æ –ø—Ä–∏ —É–≤–µ–ª–∏—á–µ–Ω–∏–∏ –∫–∞–ø–∏—Ç–∞–ª–∞ –¥–æ 600‚Äì1500 USD –∏ —É–≤–µ—Ä–µ–Ω–Ω–æ–π —Ä–∞–±–æ—Ç–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏, —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–Ω–æ–π –Ω–∞ 20‚Äì50 —Å–¥–µ–ª–æ–∫ –≤ –¥–µ–Ω—å, –ø—Ä–∏ —É—Å–ª–æ–≤–∏–∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ–≥–æ win rate (50‚Äì55%) –∏ —Ö–æ—Ä–æ—à–µ–π –∞–¥–∞–ø—Ç–∞—Ü–∏–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤.
