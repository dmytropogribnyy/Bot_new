–ê—É–¥–∏—Ç –ø—Ä–æ–µ–∫—Ç–∞ —Ç–æ—Ä–≥–æ–≤–æ–≥–æ –±–æ—Ç–∞
–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
–ü—Ä–æ–µ–∫—Ç –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω –º–æ–¥—É–ª—å–Ω–æ, —Ä–∞–∑–¥–µ–ª—è—è –ª–æ–≥–∏–∫—É —Ç–æ—Ä–≥–æ–≤–ª–∏, —É—Ç–∏–ª–∏—Ç—ã, –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å Telegram –∏ –ø—Ä–æ—á–µ–µ –ø–æ —Ä–∞–∑–Ω—ã–º —Ñ–∞–π–ª–∞–º:
–û—Å–Ω–æ–≤–Ω–æ–π –º–æ–¥—É–ª—å (main.py) ‚Äì –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞, –∑–∞–ø—É—Å–∫–∞–µ—Ç —Ñ–æ–Ω–æ–≤—ã–µ –ø–æ—Ç–æ–∫–∏ –∏ –≥–ª–∞–≤–Ω—ã–π —Ü–∏–∫–ª —Ç–æ—Ä–≥–æ–≤–ª–∏. –í –≥–ª–∞–≤–Ω–æ–º –ø–æ—Ç–æ–∫–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏—è start_trading_loop(), –∫–æ—Ç–æ—Ä–∞—è –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ –ø–µ—Ä–µ–±–∏—Ä–∞–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã–µ —Ç–æ—Ä–≥–æ–≤—ã–µ –ø–∞—Ä—ã –≥—Ä—É–ø–ø–∞–º–∏ –∏ –≤—ã–∑—ã–≤–∞–µ—Ç —Ü–∏–∫–ª —Ç–æ—Ä–≥–æ–≤–ª–∏. –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ main.py –∑–∞–ø—É—Å–∫–∞–µ—Ç:
–ü–æ—Ç–æ–∫ –æ–±—Ä–∞–±–æ—Ç–∫–∏ Telegram-–∫–æ–º–∞–Ω–¥ (—á–µ—Ä–µ–∑ telegram_handler.process_telegram_commands), –ø–æ–∑–≤–æ–ª—è—é—â–∏–π –ø–æ–ª—É—á–∞—Ç—å –∫–æ–º–∞–Ω–¥—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (/stop, /pause –∏ —Ç.–¥.).
–ü–æ—Ç–æ–∫ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ IP (ip_monitor.start_ip_monitor), –æ—Ç—Å–ª–µ–∂–∏–≤–∞—é—â–∏–π —Å–º–µ–Ω—É –≤–Ω–µ—à–Ω–µ–≥–æ IP –∏ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—â–∏–π –±–æ—Ç–∞ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ (–¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ API-–∫–ª—é—á–µ–π).
–ü–æ—Ç–æ–∫ —Ä–æ—Ç–∞—Ü–∏–∏ –ø–∞—Ä (pair_selector.start_symbol_rotation), –∫–æ—Ç–æ—Ä—ã–π —Ä–∞–∑ –≤ —á–∞—Å –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å–ø–∏—Å–æ–∫ —Ç–æ—Ä–≥—É–µ–º—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤ (–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –≤—ã–±–∏—Ä–∞—è —Å–∞–º—ã–µ –≤–æ–ª–∞—Ç–∏–ª—å–Ω—ã–µ –∏ –ª–∏–∫–≤–∏–¥–Ω—ã–µ USDC-–ø–∞—Ä—ã, –¥–æ–ø–æ–ª–Ω—è—è —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ FIXED_PAIRS).
–ü–æ—Ç–æ–∫–∏ —Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö –æ—Ç—á–µ—Ç–æ–≤ (start_report_loops), –∫–æ—Ç–æ—Ä—ã–µ –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ, –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–µ –∏ –¥—Ä—É–≥–∏–µ –æ—Ç—á–µ—Ç—ã (—Ñ—É–Ω–∫—Ü–∏–∏ generate_daily_report, send_weekly_report –∏ —Ç.–¥. –∏–∑ stats.py), –∞ —Ç–∞–∫–∂–µ –∑–∞–ø—É—Å–∫–∞—é—Ç –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, tp_optimizer –∫–∞–∂–¥—ã–µ 2 –¥–Ω—è –∏ htf_optimizer —Ä–∞–∑ –≤ –Ω–µ–¥–µ–ª—é).
–ú–æ–¥—É–ª—å –≤—ã–±–æ—Ä–∞ –ø–∞—Ä (pair_selector.py) ‚Äì –°–æ–¥–µ—Ä–∂–∏—Ç –ª–æ–≥–∏–∫—É –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ñ—å—é—á–µ—Ä—Å–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ USDC —Å –±–∏—Ä–∂–∏ (—á–µ—Ä–µ–∑ exchange.load_markets) –∏ –æ—Ç–±–æ—Ä–∞ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤. –ù–∞ –æ—Å–Ω–æ–≤–µ –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏ (calculate_volatility) –∏ –æ–±—ä–µ–º–∞ —Ç–æ—Ä–≥–æ–≤ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è —Ä–µ–π—Ç–∏–Ω–≥ –ø–∞—Ä; –∑–∞—Ç–µ–º —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –∏—Ç–æ–≥–æ–≤—ã–π —Å–ø–∏—Å–æ–∫: –∫–æ–º–±–∏–Ω–∞—Ü–∏—è —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–∞—Ä –∏ —Ç–æ–ø-–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö –ø–∞—Ä (–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –±–∞–ª–∞–Ω—Å–∞ –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è –æ—Ç 5 –¥–æ 25 –ø–∞—Ä)‚Äã
file-btgyem4bdutqonzdrerqgw
‚Äã
file-btgyem4bdutqonzdrerqgw
. –†–æ—Ç–∞—Ü–∏—è —Å–∏–º–≤–æ–ª–æ–≤ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ —Ñ–∞–π–ª data/dynamic_symbols.json –∏ —Å–æ–æ–±—â–∞–µ—Ç—Å—è –≤ Telegram.
–Ø–¥—Ä–æ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ (core.strategy.py –∏ —Å–º–µ–∂–Ω—ã–µ) ‚Äì –û—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Å–±–æ—Ä —Ä—ã–Ω–æ—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏ –ø—Ä–∏–Ω—è—Ç–∏–µ —Ä–µ—à–µ–Ω–∏—è, –≤—Ö–æ–¥–∏—Ç—å –≤ —Å–¥–µ–ª–∫—É –∏–ª–∏ –Ω–µ—Ç.
–§—É–Ω–∫—Ü–∏—è fetch_data(symbol) –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç —á–µ—Ä–µ–∑ API –±–∏—Ä–∂–∏ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 50 —Å–≤–µ—á–µ–π (15m —Ç–∞–π–º—Ñ—Ä–µ–π–º) –∏ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã: RSI, EMA(20), MACD, ATR, ADX, Bollinger Bands –∏ –¥—Ä.‚Äã
file-h6xu4badmdq3fnguzlxbzt
‚Äã
file-h6xu4badmdq3fnguzlxbzt
.
–ù–∞ –æ—Å–Ω–æ–≤–∞–Ω–∏–∏ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –∑–Ω–∞—á–µ–Ω–∏–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ –∏ –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –ø–æ—Ä–æ–≥–æ–≤ (FILTER_THRESHOLDS –∏–∑ config.py) –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å–∏–≥–Ω–∞–ª–æ–≤ –≤ passes_filters() ‚Äì –æ—Ç—Å–µ–∫–∞—é—Ç—Å—è —Å–ª—É—á–∞–∏ –Ω–∏–∑–∫–æ–π –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏ (–Ω–∏–∑–∫–∏–µ ATR/ADX/BB —à–∏—Ä–∏–Ω–∞) —Å —É—á–µ—Ç–æ–º –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–∞ relax (–∞–¥–∞–ø—Ç–∏–≤–Ω–æ –æ—Å–ª–∞–±–ª—è–µ—Ç —Ñ–∏–ª—å—Ç—Ä—ã –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏)‚Äã
file-h6xu4badmdq3fnguzlxbzt
‚Äã
file-h6xu4badmdq3fnguzlxbzt
. –ï—Å–ª–∏ —Å–∏–º–≤–æ–ª –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç —Ñ–∏–ª—å—Ç—Ä—ã, —Å–¥–µ–ª–∫–∞ –æ—Ç–≤–µ—Ä–≥–∞–µ—Ç—Å—è.
–§—É–Ω–∫—Ü–∏—è should_enter_trade(symbol, df, ...) —Ä–µ–∞–ª–∏–∑—É–µ—Ç –ª–æ–≥–∏–∫—É –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏—è:
–ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è cooldown: –Ω–µ –ø—Ä–æ—à–ª–æ –ª–∏ 30 –º–∏–Ω—É—Ç —Å –ø–æ—Å–ª–µ–¥–Ω–µ–π —Å–¥–µ–ª–∫–∏ –ø–æ —ç—Ç–æ–º—É —Å–∏–º–≤–æ–ª—É. –ï—Å–ª–∏ –¥–∞, —Å–∏–≥–Ω–∞–ª –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è (—ç—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç —Å–ª–∏—à–∫–æ–º —á–∞—Å—Ç—ã–π —Ç—Ä–µ–π–¥–∏–Ω–≥)‚Äã
file-h6xu4badmdq3fnguzlxbzt
.
–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –≤–∫–ª—é—á–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –ø—Ä–æ–ø—É—Å–∫–∞ –Ω–∏–∑–∫–æ–≤–æ–ª–∞—Ç–∏–ª—å–Ω—ã—Ö –ø–µ—Ä–∏–æ–¥–æ–≤ (VOLATILITY_SKIP_ENABLED): –µ—Å–ª–∏ ATR –∏ –¥–∏–∞–ø–∞–∑–æ–Ω —Å–≤–µ—á–∏ —Å–ª–∏—à–∫–æ–º –º–∞–ª—ã, —Å–¥–µ–ª–∫–∞ –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è‚Äã
file-h6xu4badmdq3fnguzlxbzt
.
–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è —Å–≤–æ–¥–Ω—ã–π —Å–∫–æ—Ä–∏–Ω–≥ (calculate_score) ‚Äì –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ —Å–∏–≥–Ω–∞–ª–∞ –æ—Ç 1 –¥–æ 5, –æ—Å–Ω–æ–≤–∞–Ω–Ω–∞—è –Ω–∞ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞—Ö –∏ –∞–¥–∞–ø—Ç–∏–≤–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö (—É—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –±–∞–ª–∞–Ω—Å, –≤–∏–Ω—Ä–µ–π—Ç –∏ —á–∞—Å—Ç–æ—Ç–∞ —Å–¥–µ–ª–æ–∫)‚Äã
file-h6xu4badmdq3fnguzlxbzt
. –í—ã—á–∏—Å–ª—è–µ—Ç—Å—è –º–∏–Ω–∏–º–∞–ª—å–Ω–æ —Ç—Ä–µ–±—É–µ–º—ã–π —Å–∫–æ—Ä –¥–ª—è –≤—Ö–æ–¥–∞ (get_adaptive_min_score), –∫–æ—Ç–æ—Ä—ã–π —Å–Ω–∏–∂–∞–µ—Ç—Å—è –ø—Ä–∏ –≤—ã—Å–æ–∫–æ–º –±–∞–ª–∞–Ω—Å–µ/–≤–∏–Ω—Ä–µ–π—Ç–µ –∏–ª–∏ –ø–æ–≤—ã—à–∞–µ—Ç—Å—è –ø—Ä–∏ –Ω–µ—É–¥–∞—á–Ω—ã—Ö —Å–µ—Ä–∏—è—Ö.
–ï—Å–ª–∏ –∏—Ç–æ–≥–æ–≤—ã–π score –º–µ–Ω—å—à–µ –ø–æ—Ä–æ–≥–∞, –≤—Ö–æ–¥ –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç (–≤ DRY_RUN —ç—Ç–æ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è –∫–∞–∫ ‚ÄúNo entry‚Äù)‚Äã
file-h6xu4badmdq3fnguzlxbzt
. –ï—Å–ª–∏ –∂–µ —Å–∫–æ—Ä –¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–π, —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–¥–µ–ª–∫–∏ (BUY –∏–ª–∏ SELL –ø–æ –æ—Ç–Ω–æ—à–µ–Ω–∏—é MACD –∫ —Å–∏–≥–Ω–∞–ª—å–Ω–æ–π –ª–∏–Ω–∏–∏) –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è —Å–∏–≥–Ω–∞–ª –Ω–∞ –≤—Ö–æ–¥.
Smart Re-entry (—É–º–Ω–æ–µ –ø–æ–≤—Ç–æ—Ä–Ω–æ–µ –≤—Ö–æ–∂–¥–µ–Ω–∏–µ): –≠—Ç–æ—Ç –±–ª–æ–∫ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –≤–Ω—É—Ç—Ä–∏ should_enter_trade. –ï—Å–ª–∏ –ø–æ —Å–∏–º–≤–æ–ª—É —É–∂–µ –±—ã–ª–∞ –Ω–µ–¥–∞–≤–Ω—è—è —Å–¥–µ–ª–∫–∞:
–ï—Å–ª–∏ –ø–æ–∑–∏—Ü–∏—è –±—ã–ª–∞ –∑–∞–∫—Ä—ã—Ç–∞ –≤—Ä—É—á–Ω—É—é –∏–ª–∏ –ø—Ä–æ—à–ª–æ –º–∞–ª–æ –≤—Ä–µ–º–µ–Ω–∏ (–¥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è cooldown) –ø–æ—Å–ª–µ –ø—Ä–µ–¥—ã–¥—É—â–µ–π —Å–¥–µ–ª–∫–∏ –∏ –ø—Ä–∏ —ç—Ç–æ–º –Ω–æ–≤–∞—è –æ—Ü–µ–Ω–∫–∞ —Å–∏–≥–Ω–∞–ª–∞ > 4, —Ç–æ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è —Å–∏–≥–Ω–∞–ª —Ä–µ-–µ–Ω—Ç—Ä–∏‚Äã
file-h6xu4badmdq3fnguzlxbzt
‚Äã
file-h6xu4badmdq3fnguzlxbzt
. –ë–æ—Ç –≤ –ª–æ–≥–∞—Ö –æ—Ç–º–µ—á–∞–µ—Ç —ç—Ç–æ –∫–∞–∫ Re-entry –∏ –ø–æ–∑–≤–æ–ª–∏—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ –≤–æ–π—Ç–∏ —Å—Ä–∞–∑—É, –º–∏–Ω—É—è –æ–±—ã—á–Ω—É—é –∑–∞–¥–µ—Ä–∂–∫—É, –Ω–æ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –æ—á–µ–Ω—å –≤—ã—Å–æ–∫–æ–º —Å–∫–æ—Ä–µ (–ª–æ–≥–∏–∫–∞ ‚Äúscore > 4‚Äù).
–ï—Å–ª–∏ –ø–æ—Å–ª–µ–¥–Ω—è—è —Å–¥–µ–ª–∫–∞ –ø–æ —Å–∏–º–≤–æ–ª—É –∏–º–µ–ª–∞ –∫–∞–∫–æ–π-—Ç–æ —Å–∫–æ—Ä (last_score) –∏ —Ç–µ–∫—É—â–∏–π —Å–∏–≥–Ω–∞–ª –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —Å–∏–ª—å–Ω–µ–µ (–Ω–∞ ‚â•1.5 –ø—É–Ω–∫—Ç–∞), –∞ –ø–æ–∑–∏—Ü–∏–∏ —Å–µ–π—á–∞—Å –Ω–µ—Ç, —Ç–æ —Ç–∞–∫–∂–µ –¥–æ–ø—É—Å–∫–∞–µ—Ç—Å—è —Ä–µ-–µ–Ω—Ç—Ä–∏‚Äã
file-h6xu4badmdq3fnguzlxbzt
‚Äã
file-h6xu4badmdq3fnguzlxbzt
. –í –æ–±–æ–∏—Ö —Å–ª—É—á–∞—è—Ö —Ñ—É–Ω–∫—Ü–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å —Ñ–ª–∞–≥–æ–º is_reentry=True.
–û–±—ã—á–Ω—ã–π –≤—Ö–æ–¥: –ø—Ä–∏ —à—Ç–∞—Ç–Ω–æ–º —É—Å–ª–æ–≤–∏–∏ (score ‚â• –ø–æ—Ä–æ–≥–∞ –∏ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª–∏ —É—Å–ª–æ–≤–∏—è re-entry) —Ñ—É–Ω–∫—Ü–∏—è –ø–æ–º–µ—á–∞–µ—Ç —Ç–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è –≤—Ö–æ–¥–∞ –≤ last_trade_times[symbol] (–¥–ª—è cooldown)‚Äã
file-h6xu4badmdq3fnguzlxbzt
, –ª–æ–≥–∏—Ä—É–µ—Ç —Å–∏–≥–Ω–∞–ª –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ—Ä—Ç–µ–∂ —Å –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º (‚Äúbuy‚Äù/‚Äúsell‚Äù), –∑–Ω–∞—á–µ–Ω–∏–µ–º score –∏ —Ñ–ª–∞–≥–æ–º reentry=False‚Äã
file-h6xu4badmdq3fnguzlxbzt
‚Äã
file-h6xu4badmdq3fnguzlxbzt
.
–ú–æ–¥—É–ª—å –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–∏–º–≤–æ–ª–∞ (symbol_processor.py) ‚Äì –°–≤–æ–µ–≥–æ —Ä–æ–¥–∞ —Å–≤—è–∑—É—é—â–µ–µ –∑–≤–µ–Ω–æ –º–µ–∂–¥—É —Å—Ç—Ä–∞—Ç–µ–≥–∏–µ–π –∏ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ–º —Å–¥–µ–ª–∫–∏. –§—É–Ω–∫—Ü–∏—è process_symbol(symbol) –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–∏–º–≤–æ–ª–∞:
–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è: –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ —á–∏—Å–ª–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π (10 –ª–∏–±–æ 20, –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –±–∞–ª–∞–Ω—Å–∞) –∏ –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç —Å–∏–º–≤–æ–ª, –µ—Å–ª–∏ –ª–∏–º–∏—Ç –¥–æ—Å—Ç–∏–≥–Ω—É—Ç‚Äã
file-3d95hakkuxdq6khydn2tvj
‚Äã
file-3d95hakkuxdq6khydn2tvj
. –¢–∞–∫–∂–µ –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç—Å—è —Å–∏–º–≤–æ–ª, –µ—Å–ª–∏ –ø–æ –Ω–µ–º—É —É–∂–µ –µ—Å—Ç—å –æ—Ç–∫—Ä—ã—Ç–∞—è –ø–æ–∑–∏—Ü–∏—è (–ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ trade_engine.get_position_size)‚Äã
file-3d95hakkuxdq6khydn2tvj
.
–ó–∞–≥—Ä—É–∂–∞–µ—Ç DataFrame —Å–≤–µ—á–µ–π —á–µ—Ä–µ–∑ fetch_data. –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–µ—Ç –∏–ª–∏ –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ API, —Å–∏–º–≤–æ–ª –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç—Å—è‚Äã
file-3d95hakkuxdq6khydn2tvj
.
–í—ã–∑—ã–≤–∞–µ—Ç should_enter_trade. –ï—Å–ª–∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –Ω–µ –¥–∞–ª–∞ —Å–∏–≥–Ω–∞–ª (None), —Ç–æ –ø–æ–∑–∏—Ü–∏—è –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è‚Äã
file-3d95hakkuxdq6khydn2tvj
.
–ï—Å–ª–∏ –ø–æ–ª—É—á–µ–Ω —Å–∏–≥–Ω–∞–ª (–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ, —Å–∫–æ—Ä, —Ñ–ª–∞–≥ —Ä–µ-–µ–Ω—Ç—Ä–∏), —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è —Ç–æ—Ä–≥–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã: —Ç–µ–∫—É—â–∞—è —Ü–µ–Ω–∞ –≤—Ö–æ–¥–∞, —É—Ä–æ–≤–µ–Ω—å —Å—Ç–æ–ø-–ª–æ—Å—Å–∞ (SL) –∫–∞–∫ entry _ (1 ¬± SL_PERCENT), —Ä–∏—Å–∫ –Ω–∞ —Å–¥–µ–ª–∫—É (risk_percent –∞–¥–∞–ø—Ç–∏–≤–Ω–æ —á–µ—Ä–µ–∑ utils_core.get_adaptive_risk_percent) –∏ —Ä–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ qty —á–µ—Ä–µ–∑ —Ñ—É–Ω–∫—Ü–∏—é calculate_position_size‚Äã
file-3d95hakkuxdq6khydn2tvj
. –ï—Å–ª–∏ —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–Ω—ã–π –æ–±—ä–µ–º —Å–ª–∏—à–∫–æ–º –º–∞–ª –ø–æ –Ω–æ—Ç–∏–æ–Ω–∞–ª—É (–º–µ–Ω—å—à–µ MIN_NOTIONAL), —Å–¥–µ–ª–∫–∞ –æ—Ç–º–µ–Ω—è–µ—Ç—Å—è‚Äã
file-3d95hakkuxdq6khydn2tvj
.
–í –ª–æ–≥–∞—Ö –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–Ω—ã–π —Ä–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏, –ø–æ—Å–ª–µ —á–µ–≥–æ process_symbol –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ª–æ–≤–∞—Ä—å trade_data —Å –∫–ª—é—á–µ–≤–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π —Å–¥–µ–ª–∫–µ: —Å–∏–º–≤–æ–ª, –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (buy/sell), –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ, —Ü–µ–Ω–∞ –≤—Ö–æ–¥–∞, —Å–∫–æ—Ä, —Ñ–ª–∞–≥ —Ä–µ-–µ–Ω—Ç—Ä–∏ –∏ –¥—Ä.‚Äã
file-3d95hakkuxdq6khydn2tvj
‚Äã
file-3d95hakkuxdq6khydn2tvj
. –≠—Ç–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–æ—Ç–æ–º –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–∞ —ç—Ç–∞–ø–µ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è.
–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è (core.engine_controller.py) ‚Äì –£–ø—Ä–∞–≤–ª—è–µ—Ç —Ç–æ—Ä–≥–æ–≤—ã–º —Ü–∏–∫–ª–æ–º –∏ –æ—Ä–∫–µ—Å—Ç—Ä—É–µ—Ç –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –º–µ–∂–¥—É —Å–∏–≥–Ω–∞–ª–∞–º–∏ –∏ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ–º —Å–¥–µ–ª–æ–∫:
–§—É–Ω–∫—Ü–∏—è run_trading_cycle(symbols) –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –≥—Ä—É–ø–ø—É —Å–∏–º–≤–æ–ª–æ–≤ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏‚Äã
file-k6v5erujzuuurkbgajvjes
. –°–Ω–∞—á–∞–ª–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –±–∞–ª–∞–Ω—Å (—Å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º) –∏ –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è –µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏–µ‚Äã
file-k6v5erujzuuurkbgajvjes
. –¢–∞–∫–∂–µ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è —Ç–µ–∫—É—â–µ–µ —á–∏—Å–ª–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π –∏ –≤–∏–Ω—Ä–µ–π—Ç –Ω–µ–¥–∞–≤–Ω–∏—Ö —Å–≤–∏—Ç—á–µ–π (get_smart_switch_stats()), —á—Ç–æ–±—ã –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –¥–æ–ø—É—Å—Ç–∏–º—ã–π –ª–∏–º–∏—Ç —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π —Å–º–∞—Ä—Ç-—Å–≤–∏—Ç—á–∞ –Ω–∞ —Ç–µ–∫—É—â–∏–π —Ü–∏–∫–ª (–∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π –ª–∏–º–∏—Ç —á–µ—Ä–µ–∑ get_adaptive_switch_limit)‚Äã
file-k6v5erujzuuurkbgajvjes
‚Äã
file-k6v5erujzuuurkbgajvjes
. –≠—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç —Å–ª–∏—à–∫–æ–º —á–∞—Å—Ç–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ/–æ—Ç–∫—Ä—ã—Ç–∏–µ –ø–æ–∑–∏—Ü–∏–π –ø—Ä–∏ Smart Switching.
–î–∞–ª–µ–µ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–∏–º–≤–æ–ª–∞ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è process_symbol. –ï—Å–ª–∏ –æ–Ω –≤–µ—Ä–Ω—É–ª None (–Ω–µ—Ç —Å–∏–≥–Ω–∞–ª–∞ –∏–ª–∏ –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç) ‚Äì —Ü–∏–∫–ª –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —Å–∏–º–≤–æ–ª—É‚Äã
file-k6v5erujzuuurkbgajvjes
.
–ï—Å–ª–∏ trade_data –ø–æ–ª—É—á–µ–Ω—ã, –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –æ—Ç–∫—Ä—ã—Ç–∞ –ª–∏ —É–∂–µ –ø–æ–∑–∏—Ü–∏—è —á–µ—Ä–µ–∑ trade_manager. –ï—Å–ª–∏ –ø–æ —Å–∏–º–≤–æ–ª—É –µ—Å—Ç—å –∞–∫—Ç–∏–≤–Ω–∞—è –∑–∞–ø–∏—Å—å —Ç—Ä–µ–π–¥–∞ (current_trade), —Ç–æ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ª–æ–≥–∏–∫–∞ üß† Smart Switch:
–í—ã—á–∏—Å–ª—è–µ—Ç—Å—è —Ä–∞–∑–Ω–∏—Ü–∞ –Ω–æ–≤–æ–≥–æ score –∏ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ (—Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–≥–æ –≤ TradeInfoManager). –ï—Å–ª–∏ –Ω–æ–≤–∞—è –æ—Ü–µ–Ω–∫–∞ —Å—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ –≤—ã—à–µ (>= MIN_SCORE_DELTA_SWITCH), –∏ –ª–∏–º–∏—Ç —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π –Ω–∞ —Ü–∏–∫–ª –Ω–µ –∏—Å—á–µ—Ä–ø–∞–Ω, —Ç–æ –±–æ—Ç –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –Ω–∞ –Ω–æ–≤—ã–π —Å–∏–≥–Ω–∞–ª‚Äã
file-k6v5erujzuuurkbgajvjes
‚Äã
file-k6v5erujzuuurkbgajvjes
. –í –ª–æ–≥–∞—Ö –∏ Telegram –ø–æ—è–≤–ª—è–µ—Ç—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ Smart Switch (—Å—Ç–∞—Ä—ã–π —Å–∫–æ—Ä vs –Ω–æ–≤—ã–π). –ë–æ—Ç –∑–∞—Ç–µ–º –∑–∞–∫—Ä—ã–≤–∞–µ—Ç —Ç–µ–∫—É—â—É—é –ø–æ–∑–∏—Ü–∏—é: –≤ DRY_RUN —Ä–µ–∂–∏–º–µ —á–µ—Ä–µ–∑ close_dry_trade, –≤ –±–æ–µ–≤–æ–º —Ä–µ–∂–∏–º–µ —á–µ—Ä–µ–∑ close_real_trade‚Äã
file-k6v5erujzuuurkbgajvjes
‚Äã
file-k6v5erujzuuurkbgajvjes
. –ü—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ –ø–æ–∑–∏—Ü–∏—é –æ–Ω —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç –≤—Ä–µ–º—è –∑–∞–∫—Ä—ã—Ç–∏—è (trade_manager.set_last_closed_time) –∏ —É–¥–∞–ª—è–µ—Ç —Å—Ç–∞—Ä—ã–π —Ç—Ä–µ–π–¥ –∏–∑ –ø–∞–º—è—Ç–∏.
–ü–æ—Å–ª–µ –∑–∞–∫—Ä—ã—Ç–∏—è smart_switch_count —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è, –∞ —Ñ–ª–∞–≥ is_reentry —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –≤ True, —á—Ç–æ–±—ã —Å–ª–µ–¥—É—é—â–∏–π –≤—Ö–æ–¥ —Ç—Ä–∞–∫—Ç–æ–≤–∞–ª—Å—è –∫–∞–∫ –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –≤—Ö–æ–¥ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è‚Äã
file-k6v5erujzuuurkbgajvjes
‚Äã
file-k6v5erujzuuurkbgajvjes
. –î–∞–ª–µ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –Ω–µ –ø—Ä–µ—Ä—ã–≤–∞–µ—Ç—Å—è ‚Äì –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π trade_data –ø–æ–π–¥–µ—Ç –≤ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ (—Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ —Å—Ä–∞–∑—É –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –Ω–æ–≤–∞—è –ø–æ–∑–∏—Ü–∏—è –ø–æ —Ç–æ–º—É –∂–µ —Å–∏–º–≤–æ–ª—É —Å –Ω–æ–≤—ã–º —Å–∏–≥–Ω–∞–ª–æ–º).
–ï—Å–ª–∏ –∂–µ —É—Å–ª–æ–≤–∏–µ –¥–ª—è Smart Switch –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ (–Ω–æ–≤—ã–π —Å–∏–≥–Ω–∞–ª –Ω–µ –Ω–∞–º–Ω–æ–≥–æ –ª—É—á—à–µ —Å—Ç–∞—Ä–æ–≥–æ), –∏–ª–∏ –ª–∏–º–∏—Ç –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–π –∏—Å—á–µ—Ä–ø–∞–Ω, —Ç–æ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç –æ—Ç–∫—Ä—ã—Ç–∏–µ –Ω–æ–≤–æ–π —Å–¥–µ–ª–∫–∏ –ø–æ —ç—Ç–æ–º—É —Å–∏–º–≤–æ–ª—É (‚ÄúSkipping ... current trade score >= new score‚Äù)‚Äã
file-k6v5erujzuuurkbgajvjes
‚Äã
file-k6v5erujzuuurkbgajvjes
.
–ü–æ—Å–ª–µ –≤–æ–∑–º–æ–∂–Ω–æ–≥–æ Smart Switch, –µ—Å–ª–∏ –ø—Ä–∏–Ω—è—Ç–æ –æ—Ç–∫—Ä—ã—Ç—å —Å–¥–µ–ª–∫—É, –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –∏–Ω–∏—Ü–∏–∏—Ä—É–µ—Ç –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–¥–µ–ª–∫–∏:
–í —Ä–µ–∂–∏–º–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (DRY_RUN): —Å–ø–µ—Ä–≤–∞ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è notifier.notify_dry_trade(trade_data) –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è —Å–∏–º—É–ª—è—Ü–∏–∏ (–æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤ Telegram –ø–æ–º–µ—Ç–∫–∏ ‚Äúüß™-DRY-RUN...‚Äù –∏ –ª–æ–≥–∏—Ä—É–µ—Ç –≤ –∫–æ–Ω—Å–æ–ª—å)‚Äã
file-ml5caxzi7oamvjgse6tsh4
. –ó–∞—Ç–µ–º –≤—ã–∑–æ–≤ enter_trade –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –¥–∞–∂–µ –≤ DRY_RUN ‚Äì —ç—Ç–æ —Å–¥–µ–ª–∞–Ω–æ –¥–ª—è —É–Ω–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ª–æ–≥–∏–∫–∏ –∏ —Å–∏–º—É–ª—è—Ü–∏–∏ –¥–µ–π—Å—Ç–≤–∏–π –±–æ—Ç–∞, —Ö–æ—Ç—è —Ä–µ–∞–ª—å–Ω—ã—Ö –æ—Ä–¥–µ—Ä–æ–≤ –Ω–µ –≤—ã—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è. –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –≤ DRY_RUN —Å—Ä–∞–∑—É –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è –∑–∞–ø–∏—Å—å —á–µ—Ä–µ–∑ entry_logger.log_entry (—Å —Ñ–ª–∞–≥–æ–º ‚ÄúDRY_RUN‚Äù, –∫–æ—Ç–æ—Ä—ã–π –≤–Ω—É—Ç—Ä–∏ –ø—Ä–æ—Å—Ç–æ –≤—ã–∑—ã–≤–∞–µ—Ç log_dry_entry –∏ –Ω–µ –ø–∏—à–µ—Ç –≤ CSV)‚Äã
file-mbo5tquhvht2ydsg5r7er2
‚Äã
file-mbo5tquhvht2ydsg5r7er2
.
–í –±–æ–µ–≤–æ–º —Ä–µ–∂–∏–º–µ (REAL_RUN): –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –Ω–∞–ø—Ä—è–º—É—é –≤—ã–∑—ã–≤–∞–µ—Ç trade_engine.enter_trade(...) –∏ –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –≤—ã—Å—Ç–∞–≤–ª–µ–Ω–∏—è –æ—Ä–¥–µ—Ä–æ–≤ —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç –∑–∞–ø–∏—Å—å –æ –≤—Ö–æ–¥–µ —á–µ—Ä–µ–∑ entry_logger.log_entry (—Å —Ä–µ–∂–∏–º–æ–º ‚ÄúREAL_RUN‚Äù, —ç—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –ø–∏—à–µ—Ç —Å—Ç—Ä–æ–∫—É –≤ data/entry_log.csv —Å –¥–µ—Ç–∞–ª—è–º–∏ —Å–¥–µ–ª–∫–∏)‚Äã
file-k6v5erujzuuurkbgajvjes
‚Äã
file-mbo5tquhvht2ydsg5r7er2
.
–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, engine_controller —Å–≤—è–∑—ã–≤–∞–µ—Ç –≤–æ–µ–¥–∏–Ω–æ: –≤—ã–±–æ—Ä —Å–∏–º–≤–æ–ª–æ–≤, –ø—Ä–∏–Ω—è—Ç–∏–µ —Å–∏–≥–Ω–∞–ª–∞ –æ—Ç —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏, –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∑–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –ø–æ–∑–∏—Ü–∏–∏ (Smart Switch), –∏ –ø–µ—Ä–µ–¥–∞—á—É –¥–∞–Ω–Ω—ã—Ö –≤ –¥–≤–∏–∂–æ–∫ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è –æ—Ä–¥–µ—Ä–æ–≤.
–î–≤–∏–∂–æ–∫ —Ç–æ—Ä–≥–æ–≤–ª–∏ (core.trade_engine.py) ‚Äì –û—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω—É—é —Ä–∞–±–æ—Ç—É —Å –æ—Ä–¥–µ—Ä–∞–º–∏ –±–∏—Ä–∂–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ç–∫—Ä—ã—Ç—ã–º–∏ —Ç—Ä–µ–π–¥–∞–º–∏:
TradeInfoManager ‚Äì –í –Ω–∞—á–∞–ª–µ —Ñ–∞–π–ª–∞ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∫–ª–∞—Å—Å-–ø–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã–π —Å–ª–æ–≤–∞—Ä—å TradeInfoManager –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ç–µ–∫—É—â–∏—Ö —Å–¥–µ–ª–∫–∞—Ö. –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è trade_manager (–≥–ª–æ–±–∞–ª—å–Ω–∞—è) –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ –≤—Å–µ–º—É –ø—Ä–æ–µ–∫—Ç—É –¥–ª—è –∑–∞–ø–∏—Å–∏/—á—Ç–µ–Ω–∏—è –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ç—Ä–µ–π–¥–æ–≤. –ù–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Å–¥–µ–ª–∫–∏ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è trade_manager.add_trade(symbol, trade_data)‚Äã
file-lkxtdfakr2ta7gnrcw6rb7
‚Äã
file-lkxtdfakr2ta7gnrcw6rb7
, –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è—Ö ‚Äì trade_manager.update_trade(...), –∞ –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ ‚Äì trade_manager.remove_trade(symbol)‚Äã
file-lkxtdfakr2ta7gnrcw6rb7
‚Äã
file-lkxtdfakr2ta7gnrcw6rb7
. –¢–∞–∫–∂–µ TradeInfoManager —Ö—Ä–∞–Ω–∏—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ: –ø–æ—Å–ª–µ–¥–Ω–∏–π score (get_last_score) –∏ –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∑–∞–∫—Ä—ã—Ç–∏—è (get_last_closed_time) –ø–æ –∫–∞–∂–¥–æ–º—É —Å–∏–º–≤–æ–ª—É ‚Äì —ç—Ç–∏ –º–µ—Ç–æ–¥—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Å—Ç—Ä–∞—Ç–µ–≥–∏–µ–π –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ re-entry.
–ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Å—á–µ—Ç—á–∏–∫–∏: open_positions_count ‚Äì —á–∏—Å–ª–æ –æ—Ç–∫—Ä—ã—Ç—ã—Ö –ø–æ–∑–∏—Ü–∏–π, —Å –º—å—é—Ç–µ–∫—Å–æ–º open_positions_lock –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –º–µ–∂–¥—É –ø–æ—Ç–æ–∫–∞–º–∏‚Äã
file-lkxtdfakr2ta7gnrcw6rb7
. –≠—Ç–æ—Ç —Å—á–µ—Ç—á–∏–∫ –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Å–¥–µ–ª–∫–∏ –∏ –¥–µ–∫—Ä–µ–º–µ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ (–∑–∞–∫—Ä—ã—Ç–∏–∏). –û–Ω —Å–ª—É–∂–∏—Ç –¥–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã (–∂–¥–µ—Ç –ø–æ–∫–∞ –≤—Å–µ –ø–æ–∑–∏—Ü–∏–∏ –∑–∞–∫—Ä–æ—é—Ç—Å—è).
–§—É–Ω–∫—Ü–∏–∏ —Ä–∞—Å—á–µ—Ç–∞: calculate_risk_amount(balance, risk_percent) –∏ calculate_position_size(entry, stop, risk_amount) ‚Äì —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—é—Ç —Å—É–º–º—É —Ä–∏—Å–∫–∞ –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ –∏—Å—Ö–æ–¥—è –∏–∑ —Ä–∞–∑–Ω–∏—Ü—ã —Ü–µ–Ω—ã –≤—Ö–æ–¥–∞/—Å—Ç–æ–ø–∞‚Äã
file-lkxtdfakr2ta7gnrcw6rb7
. get_position_size(symbol) ‚Äì —É–∑–Ω–∞–µ—Ç —Ç–µ–∫—É—â–∏–π —Ä–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ —á–µ—Ä–µ–∑ API (—Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∫–µ—à–∞ –ø–æ–∑–∏—Ü–∏–π)‚Äã
file-lkxtdfakr2ta7gnrcw6rb7
.
–û—Ç–∫—Ä—ã—Ç–∏–µ —Å–¥–µ–ª–∫–∏: —Ñ—É–Ω–∫—Ü–∏—è enter_trade(symbol, side, qty, score, is_reentry) —É–ø—Ä–∞–≤–ª—è–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å–æ–º –æ—Ç–∫—Ä—ã—Ç–∏—è:
–ü—Ä–∏ –≤—ã–∑–æ–≤–µ —Å—Ä–∞–∑—É —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç open_positions_count –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ –¥–∞–Ω–Ω—ã–µ –æ —Ü–µ–Ω–µ –≤—Ö–æ–¥–∞ (—á–µ—Ä–µ–∑ –±–∏—Ä–∂–µ–≤–æ–µ fetch_ticker)‚Äã
file-lkxtdfakr2ta7gnrcw6rb7
‚Äã
file-lkxtdfakr2ta7gnrcw6rb7
. –ï—Å–ª–∏ –Ω–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å —Ü–µ–Ω—É –∏–ª–∏ –æ–±—ä–µ–º —Å–ª–∏—à–∫–æ–º –º–∞–ª (qty _ price < MIN_NOTIONAL), —Å–¥–µ–ª–∫–∞ –æ—Ç–º–µ–Ω—è–µ—Ç—Å—è, —Å—á–µ—Ç—á–∏–∫ –æ—Ç–∫–∞—Ç—ã–≤–∞–µ—Ç—Å—è –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –≤ Telegram‚Äã
file-lkxtdfakr2ta7gnrcw6rb7
‚Äã
file-lkxtdfakr2ta7gnrcw6rb7
.
–î–∞–ª–µ–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –±–∞–∑–æ–≤—ã–µ –ø—Ä–æ—Ü–µ–Ω—Ç—ã —Ç–µ–π–∫-–ø—Ä–æ—Ñ–∏—Ç–æ–≤ –∏ —Å—Ç–æ–ø-–ª–æ—Å—Å–∞ –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞ (TP1_PERCENT, TP2_PERCENT, SL_PERCENT). –ï—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω —Ñ–ª–∞–≥ AUTO_TP_SL_ENABLED, –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Ü–µ–ª–µ–π TP/SL –ø–æ–¥ —Ä—ã–Ω–æ—á–Ω—ã–π —Ä–µ–∂–∏–º:
–û–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è —Ç–µ–∫—É—â–∏–π —Ä–µ–∂–∏–º —Ä—ã–Ω–∫–∞ (get_market_regime) –ø–æ ADX –Ω–∞ —Å—Ç–∞—Ä—à–µ–º —Ç–∞–π–º—Ñ—Ä–µ–π–º–µ: flat (—Ñ–ª—ç—Ç), trend (—Ç—Ä–µ–Ω–¥) –∏–ª–∏ neutral. –í –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–µ–∂–∏–º–∞ —É–º–µ–Ω—å—à–∞—é—Ç—Å—è –∏–ª–∏ —É–≤–µ–ª–∏—á–∏–≤–∞—é—Ç—Å—è –≤–µ–ª–∏—á–∏–Ω—ã —Ç–µ–π–∫-–ø—Ä–æ—Ñ–∏—Ç–∞ –∏ —Å—Ç–æ–ø-–ª–æ—Å—Å–∞: –Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ —Ä–µ–∂–∏–º–µ —Ñ–ª—ç—Ç–∞ TP1/TP2/SL —É–º–µ–Ω—å—à–∞—é—Ç—Å—è (FLAT_ADJUSTMENT < 1)‚Äã
file-lkxtdfakr2ta7gnrcw6rb7
, –∞ –≤ —Ç—Ä–µ–Ω–¥–æ–≤–æ–º ‚Äì TP2 –∏ SL —É–≤–µ–ª–∏—á–∏–≤–∞—é—Ç—Å—è (TREND_ADJUSTMENT > 1)‚Äã
file-lkxtdfakr2ta7gnrcw6rb7
. –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± —ç—Ç–æ–π –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–µ –≤—ã–≤–æ–¥–∏—Ç—Å—è –≤ –ª–æ–≥.
–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ, –µ—Å–ª–∏ score == 3, –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω –æ—Å–æ–±—ã–π —Å–ª—É—á–∞–π: TP1 –∏ SL —É–º–µ–Ω—å—à–∞—é—Ç—Å—è –Ω–∞ 20%, –∞ –≤—Ç–æ—Ä–æ–π —Ç–µ–π–∫-–ø—Ä–æ—Ñ–∏—Ç TP2 –æ—Ç–∫–ª—é—á–∞–µ—Ç—Å—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, –±–æ–ª–µ–µ –∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω–∞—è —Ü–µ–ª—å –ø—Ä–∏ —Å—Ä–µ–¥–Ω–∏—Ö —Å–∏–≥–Ω–∞–ª–∞—Ö)‚Äã
file-lkxtdfakr2ta7gnrcw6rb7
.
–ù–∞ –æ—Å–Ω–æ–≤–µ –æ–∫–æ–Ω—á–∞—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤ –≤—ã—á–∏—Å–ª—è—é—Ç—Å—è —Ü–µ–Ω–æ–≤—ã–µ —É—Ä–æ–≤–Ω–∏: tp1_price, tp2_price (–µ—Å–ª–∏ TP2 –∞–∫—Ç–∏–≤–µ–Ω) –∏ sl_price –¥–ª—è —Å—Ç–æ–ø-–æ—Ä–¥–µ—Ä–∞‚Äã
file-lkxtdfakr2ta7gnrcw6rb7
‚Äã
file-lkxtdfakr2ta7gnrcw6rb7
. –¢–∞–∫–∂–µ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ–±—ä–µ–º–∞ –Ω–∞ –¥–≤–µ —á–∞—Å—Ç–∏: qty_tp1 –∏ qty_tp2 (–ø–æ –¥–æ–ª—è–º TP1_SHARE/TP2_SHARE –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞)‚Äã
file-lkxtdfakr2ta7gnrcw6rb7
.
DRY_RUN vs REAL_RUN: –µ—Å–ª–∏ –±–æ—Ç –≤ —Ä–µ–∂–∏–º–µ —Å—É—Ö–æ–≥–æ –ø—Ä–æ–≥–æ–Ω–∞, –æ–Ω –Ω–µ –≤—ã—Å—Ç–∞–≤–ª—è–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–µ –æ—Ä–¥–µ—Ä–∞. –í —ç—Ç–æ–º —Å–ª—É—á–∞–µ –≤ –ª–æ–≥–∞—Ö —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç—Å—è ‚Äú[DRY] Entering ...‚Äù —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ —Å–¥–µ–ª–∫–∏, –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è Telegram-—Å–æ–æ–±—â–µ–Ω–∏–µ —Å –ø–æ–º–µ—Ç–∫–æ–π DRY-RUN‚Äã
file-lkxtdfakr2ta7gnrcw6rb7
. –†–µ–∞–ª—å–Ω—ã–µ –æ—Ä–¥–µ—Ä–∞ –Ω–µ —Å–æ–∑–¥–∞—é—Ç—Å—è ‚Äì —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º —Å–∏–º—É–ª—è—Ü–∏—è –≤—Ö–æ–¥–∞ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç—Å—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∏ –∑–∞–ø–∏—Å—å—é –≤ trade_manager. –í —Ä–µ–∞–ª—å–Ω–æ–º —Ä–µ–∂–∏–º–µ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è —Å—Ä–∞–∑—É —Ç—Ä–∏ –æ—Ä–¥–µ—Ä–∞ –Ω–∞ –±–∏—Ä–∂–µ (—á–µ—Ä–µ–∑ API, –æ–±—ë—Ä–Ω—É—Ç—ã–µ —Ñ—É–Ω–∫—Ü–∏–µ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –≤—ã–∑–æ–≤–∞ utils_core.safe_call_retry):
–û—Ä–¥–µ—Ä —Ç–µ–π–∫-–ø—Ä–æ—Ñ–∏—Ç 1 (–ª–∏–º–∏—Ç–Ω—ã–π –æ—Ä–¥–µ—Ä –Ω–∞ –ø—Ä–æ–¥–∞–∂—É qty_tp1 –ø–æ tp1_price)‚Äã
file-lkxtdfakr2ta7gnrcw6rb7
.
–û—Ä–¥–µ—Ä —Ç–µ–π–∫-–ø—Ä–æ—Ñ–∏—Ç 2 (–µ—Å–ª–∏ –∑–∞–¥–∞–Ω tp2_price ‚Äì –ª–∏–º–∏—Ç –Ω–∞ qty_tp2 –ø–æ —ç—Ç–æ–π —Ü–µ–Ω–µ)‚Äã
file-lkxtdfakr2ta7gnrcw6rb7
.
–û—Ä–¥–µ—Ä —Å—Ç–æ–ø-–ª–æ—Å—Å (—Ç–∏–ø STOP_MARKET –Ω–∞ –≤–µ—Å—å –æ–±—ä–µ–º, —Å —Ñ–ª–∞–≥–æ–º reduceOnly, –ø–æ —Ü–µ–Ω–µ sl_price)‚Äã
file-lkxtdfakr2ta7gnrcw6rb7
. –í—Å–µ –≤—ã–∑–æ–≤—ã –∑–∞—â–∏—â–µ–Ω—ã safe_call_retry ‚Äì –ø—Ä–∏ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–±–æ—è—Ö API –±—É–¥–µ—Ç –¥–æ 3 –ø–æ–ø—ã—Ç–æ–∫ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∫–∞–∂–¥—ã–π –æ—Ä–¥–µ—Ä.
–ü–æ—Å–ª–µ –≤—ã—Å—Ç–∞–≤–ª–µ–Ω–∏—è –æ—Ä–¥–µ—Ä–æ–≤ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç–æ–µ Telegram-—Å–æ–æ–±—â–µ–Ω–∏–µ –æ –Ω–æ–≤–æ–π —Å–¥–µ–ª–∫–µ (‚Äú‚úÖ NEW TRADE‚Äù, —Å —É–∫–∞–∑–∞–Ω–∏–µ–º Re-entry –µ—Å–ª–∏ –ø—Ä–∏–º–µ–Ω–∏–º–æ, —Å–∏–º–≤–æ–ª, —Å—Ç–æ—Ä–æ–Ω–∞, —Ü–µ–Ω—ã –≤—Ö–æ–¥/TP/SL, –æ–±—ä–µ–º—ã)‚Äã
file-lkxtdfakr2ta7gnrcw6rb7
‚Äã
file-lkxtdfakr2ta7gnrcw6rb7
, –æ–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ —á–∞—Ç.
–û—Ç–∫—Ä—ã—Ç–∞—è —Å–¥–µ–ª–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è: —Å–æ–±–∏—Ä–∞—é—Ç—Å—è –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä—É trade_data (–≤–∫–ª—é—á–∞—è —Ñ–ª–∞–≥–∏ tp1_hit=False, tp2_hit=False, soft_exit_hit=False –∏ —Ç.–¥.)‚Äã
file-lkxtdfakr2ta7gnrcw6rb7
‚Äã
file-lkxtdfakr2ta7gnrcw6rb7
. –≠—Ç–æ—Ç —Å–ª–æ–≤–∞—Ä—å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ trade_manager.add_trade –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è‚Äã
file-lkxtdfakr2ta7gnrcw6rb7
.
–î–∞–ª–µ–µ, –µ—Å–ª–∏ —Å–¥–µ–ª–∫–∞ —Ä–µ–∞–ª—å–Ω–∞—è (not DRY_RUN), –≤–∫–ª—é—á–∞—é—Ç—Å—è —Ñ–æ–Ω–æ–≤—ã–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã —Å–æ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏—è –ø–æ–∑–∏—Ü–∏–∏:
track_stop_loss(symbol, ...) ‚Äì —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ –æ–±—â–∏–π —Å–ª–æ–≤–∞—Ä—å monitored_stops –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–∑–∏—Ü–∏–∏ (—Å–∏–º–≤–æ–ª, —Å—Ç–æ—Ä–æ–Ω–∞, —Ü–µ–Ω–∞ –≤—Ö–æ–¥–∞, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ, –≤—Ä–µ–º—è –æ—Ç–∫—Ä—ã—Ç–∏—è)‚Äã
file-lkxtdfakr2ta7gnrcw6rb7
‚Äã
file-lkxtdfakr2ta7gnrcw6rb7
. –≠—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –æ—Ç–∫—Ä—ã—Ç—ã—Ö –ø–æ–∑–∏—Ü–∏–π (–≤ –¥–∞–Ω–Ω–æ–º –∫–æ–¥–µ –Ω–∞–ø—Ä—è–º—É—é –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –≤–æ–∑–º–æ–∂–Ω–æ, –∑–∞–¥–µ–ª –Ω–∞ –±—É–¥—É—â–µ–µ).
–ï—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω Trailing Stop (ENABLE_TRAILING=True), –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø–æ—Ç–æ–∫ run_adaptive_trailing_stop –¥–ª—è –¥–∞–Ω–Ω–æ–≥–æ —Å–∏–º–≤–æ–ª–∞‚Äã
file-lkxtdfakr2ta7gnrcw6rb7
. –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –≤ —Ü–∏–∫–ª–µ —Ä–∞–∑ –≤ 5 —Å–µ–∫—É–Ω–¥ –ø–æ–ª—É—á–∞–µ—Ç —Ç–µ–∫—É—â—É—é —Ü–µ–Ω—É –∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ —Ç—Ä–µ–π–ª–∏–Ω–≥–∞ –Ω–∞ –±–∞–∑–µ ATR –∏ ADX (–±–æ–ª—å—à–µ –∞–≥—Ä–µ—Å—Å–∏–≤–Ω–æ—Å—Ç—å ‚Äì –±–æ–ª—å—à–µ –º—É–ª—å—Ç–∏–ø–ª–∏–∫–∞—Ç–æ—Ä, –Ω–æ –ø—Ä–∏ –≤—ã—Å–æ–∫–æ–º ADX –º—É–ª—å—Ç–∏–ø–ª–∏–∫–∞—Ç–æ—Ä —Å–Ω–∏–∂–∞–µ—Ç—Å—è)‚Äã
file-lkxtdfakr2ta7gnrcw6rb7
‚Äã
file-lkxtdfakr2ta7gnrcw6rb7
. –§—É–Ω–∫—Ü–∏—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –º–∞–∫—Å–∏–º—É–º (–¥–ª—è –ª–æ–Ω–≥–∞) –∏–ª–∏ –º–∏–Ω–∏–º—É–º (–¥–ª—è —à–æ—Ä—Ç–∞) —Ü–µ–Ω—ã —Å –º–æ–º–µ–Ω—Ç–∞ –≤—Ö–æ–¥–∞ –∏ –ø—Ä–∏ –æ—Ç–∫–∞—Ç–µ >= –∑–∞–¥–∞–Ω–Ω–æ–≥–æ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –≤—Å—é –ø–æ–∑–∏—Ü–∏—é (–º–∞—Ä–∫–µ—Ç-–æ—Ä–¥–µ—Ä–æ–º)‚Äã
file-lkxtdfakr2ta7gnrcw6rb7
‚Äã
file-lkxtdfakr2ta7gnrcw6rb7
. –ü—Ä–∏ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–∏ —Ç—Ä–µ–π–ª–∏–Ω–≥–∞ –≤ Telegram —à–ª–µ—Ç—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ ‚ÄúTrailing stop hit...‚Äù, –∏ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è record_trade_result(..., result_type="trailing") –¥–ª—è —Ñ–∏–∫—Å–∞—Ü–∏–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞‚Äã
file-lkxtdfakr2ta7gnrcw6rb7
‚Äã
file-lkxtdfakr2ta7gnrcw6rb7
.
–ï—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω Break-Even (ENABLE_BREAKEVEN=True), –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø–æ—Ç–æ–∫ run_break_even‚Äã
file-lkxtdfakr2ta7gnrcw6rb7
. –û–Ω –∂–¥–µ—Ç, –∫–æ–≥–¥–∞ —Ü–µ–Ω–∞ –ø—Ä–æ–π–¥–µ—Ç –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—É—é –¥–æ–ª—é –ø—É—Ç–∏ –¥–æ TP1 (–ø–æ—Ä–æ–≥ BREAKEVEN_TRIGGER, –Ω–∞–ø—Ä–∏–º–µ—Ä 50%). –ö–æ–≥–¥–∞ —É—Å–ª–æ–≤–∏–µ –¥–æ—Å—Ç–∏–≥–Ω—É—Ç–æ, —Å—Ç–∞–≤–∏—Ç—Å—è —Å—Ç–æ–ø-–æ—Ä–¥–µ—Ä –ø–æ —Ü–µ–Ω–µ –≤—Ö–æ–¥–∞ (–±–µ–∑—É–±—ã—Ç–æ—á–Ω–æ—Å—Ç—å) –Ω–∞ –≤–µ—Å—å –æ–±—ä–µ–º‚Äã
file-lkxtdfakr2ta7gnrcw6rb7
‚Äã
file-lkxtdfakr2ta7gnrcw6rb7
. –¢–∞–∫–∂–µ –ø–æ–º–µ—á–∞–µ—Ç—Å—è, —á—Ç–æ TP1 –¥–æ—Å—Ç–∏–≥–Ω—É—Ç (trade_manager.update_trade(symbol, "tp1_hit", True))‚Äã
file-lkxtdfakr2ta7gnrcw6rb7
‚Äã
file-lkxtdfakr2ta7gnrcw6rb7
–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ ‚Äúüîí Break-even activated‚Äù. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –¥–∞–ª—å–Ω–µ–π—à–∞—è –ø–æ—Ç–µ—Ä—è –∏—Å–∫–ª—é—á–µ–Ω–∞, –∞ —á–∞—Å—Ç–∏—á–Ω–∞—è —Ñ–∏–∫—Å–∞—Ü–∏—è –ø—Ä–æ—Ñ–∏—Ç–∞ –æ—Ç—Ä–∞–∑–∏—Ç—Å—è –≤ –ª–æ–≥–∞—Ö –∫–∞–∫ tp1_hit=True.
–ï—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω Soft Exit (–º—è–≥–∫–∏–π –≤—ã—Ö–æ–¥, SOFT_EXIT_ENABLED=True), –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø–æ—Ç–æ–∫ run_soft_exit‚Äã
file-lkxtdfakr2ta7gnrcw6rb7
. –≠—Ç–æ—Ç –º–µ—Ö–∞–Ω–∏–∑–º –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è —á–∞—Å—Ç–∏—á–Ω–æ–π —Ñ–∏–∫—Å–∞—Ü–∏–∏ –ø—Ä–∏–±—ã–ª–∏ –¥–æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è TP1: –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è —Ü–µ–Ω–∞ soft_exit_price ‚Äì –Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–∞ —É—Ä–æ–≤–Ω–µ 30‚Äì50% –ø—É—Ç–∏ –∫ TP1 (–∑–∞–¥–∞–Ω–æ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–º SOFT_EXIT_THRESHOLD)‚Äã
file-lkxtdfakr2ta7gnrcw6rb7
. –ö–æ–≥–¥–∞ —Ü–µ–Ω–∞ –¥–æ—Å—Ç–∏–≥–∞–µ—Ç —ç—Ç–æ–≥–æ —É—Ä–æ–≤–Ω—è, –±–æ—Ç –ø—Ä–æ–¥–∞–µ—Ç (–∏–ª–∏ –ø–æ–∫—É–ø–∞–µ—Ç –ø—Ä–∏ —à–æ—Ä—Ç–µ) —á–∞—Å—Ç—å –ø–æ–∑–∏—Ü–∏–∏ ‚Äì –¥–æ–ª—é SOFT_EXIT_SHARE (–Ω–∞–ø—Ä–∏–º–µ—Ä 0.5 –æ—Ç –æ–±—ä–µ–º–∞) –ø–æ —Ä—ã–Ω–æ—á–Ω–æ–π —Ü–µ–Ω–µ‚Äã
file-lkxtdfakr2ta7gnrcw6rb7
‚Äã
file-lkxtdfakr2ta7gnrcw6rb7
. –ï—Å–ª–∏ –±–æ—Ç –≤ DRY_RUN, –æ–Ω –ª–∏—à—å –ª–æ–≥–∏—Ä—É–µ—Ç, —á—Ç–æ —Å—Ä–∞–±–æ—Ç–∞–ª Soft Exit, –Ω–æ –æ—Ä–¥–µ—Ä –Ω–µ –≤—ã—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è‚Äã
file-lkxtdfakr2ta7gnrcw6rb7
. –ü—Ä–∏ —Ä–µ–∞–ª—å–Ω–æ–º Soft Exit –≤ Telegram –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ ‚ÄúüîÑ Soft Exit {symbol} @ price‚Äù –∏ –≤ trade_manager —Ñ–ª–∞–≥ soft_exit_hit —Å—Ç–∞–≤–∏—Ç—Å—è True‚Äã
file-lkxtdfakr2ta7gnrcw6rb7
‚Äã
file-lkxtdfakr2ta7gnrcw6rb7
. –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –ø–æ—Ç–æ–∫ Soft Exit –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è. –í–∞–∂–Ω–æ: –ø–æ–∑–∏—Ü–∏—è –ø—Ä–∏ —ç—Ç–æ–º –Ω–µ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø–æ–ª–Ω–æ—Å—Ç—å—é ‚Äì –æ—Å—Ç–∞–≤—à–∞—è—Å—è —á–∞—Å—Ç—å –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Å–æ–ø—Ä–æ–≤–æ–∂–¥–∞—Ç—å—Å—è –¥—Ä—É–≥–∏–º–∏ –º–µ—Ö–∞–Ω–∏–∑–º–∞–º–∏ (—Ç—Ä–µ–π–ª–∏–Ω–≥, —Å—Ç–æ–ø).
–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, enter_trade –∑–∞–≤–µ—Ä—à–∞–µ—Ç –æ—Ç–∫—Ä—ã—Ç–∏–µ: –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –æ—Ä–¥–µ—Ä–∞ –≤—ã—Å—Ç–∞–≤–ª–µ–Ω—ã, —Å–æ–ø—Ä–æ–≤–æ–∂–¥–∞—é—â–∏–µ –ø–æ—Ç–æ–∫–∏ –∑–∞–ø—É—â–µ–Ω—ã. –í –∫–æ–Ω—Ü–µ —Ñ—É–Ω–∫—Ü–∏—è –Ω–∏—á–µ–≥–æ –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç ‚Äì —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ engine_controller, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ü–∏–∫–ª.
–§–∏–∫—Å–∞—Ü–∏—è –∑–∞–∫—Ä—ã—Ç–∏—è —Å–¥–µ–ª–∫–∏: –ö–æ–≥–¥–∞ –ø–æ–∑–∏—Ü–∏—è –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è (–ª—é–±—ã–º —Å–ø–æ—Å–æ–±–æ–º), –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è record_trade_result(symbol, side, entry_price, exit_price, result_type). –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è:
–£–º–µ–Ω—å—à–∞–µ—Ç open_positions_count (—á–µ—Ä–µ–∑ –ª–æ–∫) –Ω–∞ 1, —Ç–∞–∫ –∫–∞–∫ –ø–æ–∑–∏—Ü–∏—è –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è‚Äã
file-lkxtdfakr2ta7gnrcw6rb7
‚Äã
file-lkxtdfakr2ta7gnrcw6rb7
.
–ü–æ–ª—É—á–∞–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Å–¥–µ–ª–∫–∏ –∏–∑ trade_manager (–µ—Å–ª–∏ –ø–æ –∫–∞–∫–∏–º-—Ç–æ –ø—Ä–∏—á–∏–Ω–∞–º –∑–∞–ø–∏—Å—å –Ω–µ –Ω–∞–π–¥–µ–Ω–∞, –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ)‚Äã
file-lkxtdfakr2ta7gnrcw6rb7
.
–†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —É–¥–µ—Ä–∂–∞–Ω–∏—è –ø–æ–∑–∏—Ü–∏–∏ –≤ –º–∏–Ω—É—Ç–∞—Ö –∏ –ø—Ä–æ—Ü–µ–Ω—Ç PnL: pnl = ((exit - entry)/entry)*100 (–¥–ª—è —à–æ—Ä—Ç–∞ –∏–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –∑–Ω–∞–∫)‚Äã
file-lkxtdfakr2ta7gnrcw6rb7
. –ù–∞ –æ—Å–Ω–æ–≤–∞–Ω–∏–∏ PnL –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç ‚ÄúWIN‚Äù –∏–ª–∏ ‚ÄúLOSS‚Äù –¥–ª—è –æ—Ç—á–µ—Ç–∞.
–í—ã–∑—ã–≤–∞–µ—Ç tp_logger.log_trade_result(...) –¥–ª—è –∑–∞–ø–∏—Å–∏ –∏—Ç–æ–≥–∞ –≤ CSV-–ª–æ–≥ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —ç—Ç–æ REAL_RUN. –í DRY_RUN –≤–Ω—É—Ç—Ä–∏ log_trade_result —Å—Ä–∞–∑—É –≤—ã—Ö–æ–¥ –±–µ–∑ –¥–µ–π—Å—Ç–≤–∏–π‚Äã
file-enxkz91uukojmm5cyikyhq
. –ü—Ä–∏ –±–æ–µ–≤–æ–º —Ä–µ–∂–∏–º–µ –≤ CSV —Ñ–∞–π–ª –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è —Å—Ç—Ä–æ–∫–∞ —Å –ø–æ–ª—è–º–∏: –î–∞—Ç–∞/–≤—Ä–µ–º—è –∑–∞–∫—Ä—ã—Ç–∏—è, —Å–∏–º–≤–æ–ª, –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ, —Ü–µ–Ω—ã –≤—Ö–æ–¥–∞/–≤—ã—Ö–æ–¥–∞, –æ–±—ä–µ–º, —Ñ–ª–∞–≥–∏ –ø–æ–ø–∞–¥–∞–Ω–∏—è TP1/TP2/SL, –ø—Ä–æ—Ü–µ–Ω—Ç PnL, –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, —Ñ–ª–∞–≥ HTF-—Ç—Ä–µ–Ω–¥–∞, ATR/ADX/BB-width –Ω–∞ –º–æ–º–µ–Ω—Ç –≤—Ö–æ–¥–∞‚Äã
file-enxkz91uukojmm5cyikyhq
‚Äã
file-enxkz91uukojmm5cyikyhq
. (–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ: —Ñ–æ—Ä–º–∞—Ç –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –≤ —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏ –≤–∫–ª—é—á–∞–µ—Ç —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏, –Ω–æ –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç —è–≤–Ω–æ–≥–æ –ø–æ–ª—è –∏—Å—Ö–æ–¥–∞ —Ç–∏–ø–∞ ‚ÄúTP1/TP2/SL‚Äù ‚Äì —Å–º. –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –Ω–∏–∂–µ –≤ –ø—Ä–æ–±–ª–µ–º–∞—Ö).
–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤ Telegram –ø–æ–¥—Ä–æ–±–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –∑–∞–∫—Ä—ã—Ç–∏–∏ —Å–¥–µ–ª–∫–∏: ‚Äúüì§ Trade Closed [TYPE] ... Entry ‚Üí Exit, PnL %, held N min‚Äù‚Äã
file-lkxtdfakr2ta7gnrcw6rb7
. –í —Å–æ–æ–±—â–µ–Ω–∏–∏ —É–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ç–∏–ø –∑–∞–∫—Ä—ã—Ç–∏—è (TP, SL, Trailing, Smart Switch –∏ –ø—Ä. —á–µ—Ä–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä result_type), –∞ —Ç–∞–∫–∂–µ –æ—Ç–º–µ—á–∞–µ—Ç—Å—è ‚Äú+ Soft Exit‚Äù, –µ—Å–ª–∏ —á–∞—Å—Ç—å –ø–æ–∑–∏—Ü–∏–∏ –±—ã–ª–∞ –ø—Ä–æ–¥–∞–Ω–∞ —Ä–∞–Ω–µ–µ (soft_exit_hit=True)‚Äã
file-lkxtdfakr2ta7gnrcw6rb7
.
–£–¥–∞–ª—è–µ—Ç –∑–∞–ø–∏—Å—å —Å–¥–µ–ª–∫–∏ –∏–∑ trade_manager (trade_manager.remove_trade)‚Äã
file-lkxtdfakr2ta7gnrcw6rb7
, –Ω–æ —á–µ—Ä–µ–∑ –≤–Ω–µ—à–Ω–∏–µ –≤—ã–∑–æ–≤—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, close_real_trade) —Ç—É—Ç –∂–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤—Ä–µ–º—è –∑–∞–∫—Ä—ã—Ç–∏—è –¥–ª—è –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–≥–æ re-entry –≤ –±—É–¥—É—â–µ–º (set_last_closed_time)‚Äã
file-lkxtdfakr2ta7gnrcw6rb7
‚Äã
file-lkxtdfakr2ta7gnrcw6rb7
.
–†—É—á–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ: –î–ª—è —É–¥–æ–±—Å—Ç–≤–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã —Ñ—É–Ω–∫—Ü–∏–∏ close_dry_trade(symbol) –∏ close_real_trade(symbol) ‚Äì –æ–Ω–∏ –≤—ã–∑—ã–≤–∞—é—Ç—Å—è, –Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ Smart Switch –∏–ª–∏ –∫–æ–º–∞–Ω–¥–∞—Ö Telegram. –í DRY_RUN close_dry_trade –ø—Ä–æ—Å—Ç–æ –±–µ—Ä–µ—Ç –ø–æ—Å–ª–µ–¥–Ω—é—é —Ü–µ–Ω—É –∏ –º–≥–Ω–æ–≤–µ–Ω–Ω–æ –≤—ã–∑—ã–≤–∞–µ—Ç record_trade_result(..., "manual"), –∏–º–∏—Ç–∏—Ä—É—è –∑–∞–∫—Ä—ã—Ç–∏–µ –ø–æ —Ä—ã–Ω–∫—É‚Äã
file-lkxtdfakr2ta7gnrcw6rb7
. –í REAL_RUN close_real_trade —Å–æ–≤–µ—Ä—à–∞–µ—Ç —Ä—ã–Ω–æ—á–Ω—ã–π –æ—Ä–¥–µ—Ä –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω–æ–≥–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –Ω–∞ –≤–µ—Å—å –æ–±—ä–µ–º (–∑–∞–∫—Ä—ã–≤–∞—è –ø–æ–∑–∏—Ü–∏—é), –ø–æ—Å–ª–µ —á–µ–≥–æ —Ç–æ–∂–µ —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç —á–µ—Ä–µ–∑ record_trade_result(..., "smart_switch")‚Äã
file-lkxtdfakr2ta7gnrcw6rb7
‚Äã
file-lkxtdfakr2ta7gnrcw6rb7
. –≠—Ç–∏ –º–µ—Ç–æ–¥—ã –ø–æ–∑–≤–æ–ª—è—é—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ –∑–∞–∫—Ä—ã—Ç—å –ø–æ–∑–∏—Ü–∏–∏ –ø–æ –∑–∞–ø—Ä–æ—Å—É.
–ú–æ–¥—É–ª—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è —Å–¥–µ–ª–æ–∫:
entry_logger.py —Ö—Ä–∞–Ω–∏—Ç —Ñ—É–Ω–∫—Ü–∏—é log_entry(trade, status, mode), –∑–∞–ø–∏—Å—ã–≤–∞—é—â—É—é —Ñ–∞–∫—Ç—ã –≤—Ö–æ–¥–∞ –≤ —Å–¥–µ–ª–∫—É. –í DRY_RUN –æ–Ω–∞ –ø—Ä–æ—Å—Ç–æ –≤—ã–∑—ã–≤–∞–µ—Ç log_dry_entry –¥–ª—è –∫—Ä–∞—Ç–∫–æ–π –∑–∞–ø–∏—Å–∏ –≤ –∫–æ–Ω—Å–æ–ª—å‚Äã
file-mbo5tquhvht2ydsg5r7er2
, –∞ –≤ REAL_RUN –¥–æ–±–∞–≤–ª—è–µ—Ç —Å—Ç—Ä–æ–∫—É –≤ CSV-—Ñ–∞–π–ª (data/entry_log.csv) —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º –≤—Ö–æ–¥–∞, —Å–∏–º–≤–æ–ª–æ–º, –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º, —Ü–µ–Ω–æ–π, —Å–∫–æ—Ä–æ–º –∏ –¥—Ä.‚Äã
file-mbo5tquhvht2ydsg5r7er2
‚Äã
file-mbo5tquhvht2ydsg5r7er2
. –≠—Ç–∞ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –∑–∞–ø–∏—Å—å –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç DRY_RUN-–∑–∞—â–∏—Ç—É ‚Äì —Ç–µ—Å—Ç–æ–≤—ã–µ –∑–∞–ø—É—Å–∫–∏ –Ω–µ ‚Äú–∑–∞–≥—Ä—è–∑–Ω—è—é—Ç‚Äù –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–π –ª–æ–≥ –≤—Ö–æ–¥–æ–≤.
tp_logger.py —É–ø—Ä–∞–≤–ª—è–µ—Ç –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (—Ç–µ–π–∫-–ø—Ä–æ—Ñ–∏—Ç—ã/—Å—Ç–æ–ø—ã). –§—É–Ω–∫—Ü–∏—è log_trade_result(...) (–≤—ã–∑—ã–≤–∞–µ—Ç—Å—è trade_engine-–æ–º) –ø–∏—à–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ç–æ–ª—å–∫–æ –≤ —Ä–µ–∂–∏–º–µ REAL_RUN‚Äã
file-enxkz91uukojmm5cyikyhq
. –û–Ω–∞ –¥–æ–±–∞–≤–ª—è–µ—Ç –∑–∞–ø–∏—Å—å –≤ –¥–≤–∞ CSV: –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª TP_LOG_FILE (–ø–æ–ª–Ω—ã–π –ª–æ–≥ –≤—Å–µ—Ö —Å–¥–µ–ª–æ–∫) –∏ —É–∫–æ—Ä–æ—á–µ–Ω–Ω—ã–π EXPORT_PATH (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∏ –æ—Ç—á–µ—Ç–æ–≤). –û–±–∞ —Ñ–∞–π–ª–∞ —Ö—Ä–∞–Ω—è—Ç –∫–æ–ª–æ–Ω–∫–∏: –î–∞—Ç–∞, –°–∏–º–≤–æ–ª, Direction, Entry/Exit Price, Qty, TP1 Hit, TP2 Hit, SL Hit, PnL %, Duration, HTF Confirmed, ATR, ADX, BB Width‚Äã
file-enxkz91uukojmm5cyikyhq
‚Äã
file-enxkz91uukojmm5cyikyhq
. (–ó–∞–º–µ—á–∞–Ω–∏–µ: –∏—Å—Ö–æ–¥–Ω–æ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–ª–æ—Å—å –ø–æ–ª–µ ‚ÄúResult‚Äù –¥–ª—è —è–≤–Ω–æ–≥–æ —É–∫–∞–∑–∞–Ω–∏—è –∏—Å—Ö–æ–¥–∞ TP/SL, –Ω–æ —Ç–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç WIN/LOSS –ø–æ PnL –∏ –ø–æ–º–µ—á–∞–µ—Ç —Ö–∏—Ç–∞–º–∏ TP/SL. –≠—Ç–æ –æ—Ç–º–µ—á–µ–Ω–æ –Ω–∏–∂–µ –∫–∞–∫ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π –Ω–µ–¥–æ—á–µ—Ç.)
–¢–∞–∫–∂–µ –≤ tp_logger –µ—Å—Ç—å —É—Ç–∏–ª–∏—Ç—ã –¥–ª—è —á—Ç–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤: get_last_trade() –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ—Å–ª–µ–¥–Ω—é—é –∑–∞–ø–∏—Å—å –∏–∑ –ª–æ–≥–∞, get_human_summary_line() —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –∫—Ä–∞—Ç–∫—É—é —Å—Ç—Ä–æ–∫—É –æ –ø–æ—Å–ª–µ–¥–Ω–µ–π —Å–¥–µ–ª–∫–µ, get_trade_stats() –ø–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ—Ç –æ–±—â–µ–µ —á–∏—Å–ª–æ —Å–¥–µ–ª–æ–∫ –∏ –¥–æ–ª—é –≤—ã–∏–≥—Ä—ã—à–Ω—ã—Ö (–ø–æ –ø–æ–ª—è–º Result –≤ CSV). –≠—Ç–∏ —Ñ—É–Ω–∫—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ –æ—Ç—á–µ—Ç–∞—Ö –∏ –∫–æ–º–∞–Ω–¥–∞—Ö Telegram.
–£—Ç–∏–ª–∏—Ç—ã:
utils_core.py ‚Äì –≤–∫–ª—é—á–∞–µ—Ç —Ä–∞–∑–ª–∏—á–Ω—ã–µ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
safe_call_retry(func, *args, tries=3, ...) ‚Äì –µ–¥–∏–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –≤—ã–∑–æ–≤–∞ API —Å —Ç–∞–π–º–∞—É—Ç–∞–º–∏ –Ω–∞ —Å–ª—É—á–∞–π —Å–±–æ–µ–≤‚Äã
file-h55x6jgp6djazssikjerd8
‚Äã
file-h55x6jgp6djazssikjerd8
. –û–Ω –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∫ –±–∏—Ä–∂–µ (fetch_ticker, create_order, fetch_ohlcv –∏ –ø—Ä.), –ø–æ–≤—ã—à–∞—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã –±–æ—Ç–∞ –≤ —É—Å–ª–æ–≤–∏—è—Ö –Ω–µ—É—Å—Ç–æ–π—á–∏–≤–æ–≥–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è.
–§—É–Ω–∫—Ü–∏–∏ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞ –∏ –ø–æ–∑–∏—Ü–∏–π: get_cached_balance() –∏ get_cached_positions() —Ö—Ä–∞–Ω—è—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–π –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –±–∞–ª–∞–Ω—Å/–ø–æ–∑–∏—Ü–∏–∏ –∏ –æ–±–Ω–æ–≤–ª—è—é—Ç –∏—Ö –Ω–µ —á–∞—â–µ –∑–∞–¥–∞–Ω–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞. –≠—Ç–æ —Å–Ω–∏–∂–∞–µ—Ç –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ API –∏ —É—Å–∫–æ—Ä—è–µ—Ç –º–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏.
–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –±–æ—Ç–∞: load_state() –∏ save_state() ‚Äì —á–∏—Ç–∞—é—Ç/–ø–∏—à—É—Ç JSON-—Ñ–∞–π–ª —Å–æ—Å—Ç–æ—è–Ω–∏—è (state.json). –ë–æ—Ç —Ö—Ä–∞–Ω–∏—Ç —Ç–∞–º —Ñ–ª–∞–≥–∏ pause, stopping, shutdown –∏, –≤–æ–∑–º–æ–∂–Ω–æ, –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –æ–∂–∏–¥–∞—é—â–∏—Ö –∑–∞–∫—Ä—ã—Ç–∏—è —Å–¥–µ–ª–∫–∞—Ö. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–∏ –∫–æ–º–∞–Ω–¥ /pause, /stop, /shutdown —á–µ—Ä–µ–∑ Telegram –∏ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è, —á—Ç–æ —ç—Ç–∏ —Ñ–ª–∞–≥–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –º–µ–∂–¥—É –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–º–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞‚Äã
file-h55x6jgp6djazssikjerd8
‚Äã
file-h55x6jgp6djazssikjerd8
. –î–æ—Å—Ç—É–ø –∑–∞—â–∏—â–µ–Ω state_lock –≤–æ –∏–∑–±–µ–∂–∞–Ω–∏–µ –≥–æ–Ω–æ–∫ –º–µ–∂–¥—É –ø–æ—Ç–æ–∫–∞–º–∏.
utils_logging.py ‚Äì –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç —Ü–≤–µ—Ç–Ω–æ–π –≤—ã–≤–æ–¥ –≤ –∫–æ–Ω—Å–æ–ª—å (—Å –ø–æ–º–æ—â—å—é colorama), –≤–µ–¥–µ—Ç –ª–æ–∫–∞–ª—å–Ω—ã–π –ª–æ–≥-—Ñ–∞–π–ª –∏ –¥—É–±–ª–∏—Ä—É–µ—Ç –≤–∞–∂–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ Telegram:
–§—É–Ω–∫—Ü–∏—è log(message, level, important) –ø–∏—à–µ—Ç —Å—Ç—Ä–æ–∫—É –≤ —Ñ–∞–π–ª LOG_FILE_PATH (—Å —Ä–æ—Ç–∞—Ü–∏–µ–π –ø–æ —Ä–∞–∑–º–µ—Ä—É) –∏ –¥—É–±–ª–∏—Ä—É–µ—Ç –≤ stdout (—Ü–≤–µ—Ç –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —É—Ä–æ–≤–Ω—è)‚Äã
file-21rbessheqmsu7qgqntu4q
‚Äã
file-21rbessheqmsu7qgqntu4q
. –ï—Å–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤–∞–∂–Ω–æ–µ –∏–ª–∏ —É—Ä–æ–≤–µ–Ω—å ‚â• WARNING, –æ–Ω–æ –≤—ã–≤–æ–¥–∏—Ç—Å—è –¥–∞–∂–µ –≤ DRY_RUN.
–°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏: notify_error(msg) –ø–æ—Å—ã–ª–∞–µ—Ç –æ—à–∏–±–∫—É –≤ Telegram —Å ‚ùå, backup_config()/restore_config() —Å–æ—Ö—Ä–∞–Ω—è—é—Ç/–≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç backup –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–∑—ã–≤–∞—é—Ç—Å—è –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ/–æ—Å—Ç–∞–Ω–æ–≤–∫–µ, —É—Å–ø–µ—Ö/–æ—à–∏–±–∫–∏ —Å–æ–ø—Ä–æ–≤–æ–∂–¥–∞—é—Ç—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ–º)‚Äã
file-21rbessheqmsu7qgqntu4q
‚Äã
file-21rbessheqmsu7qgqntu4q
, notify_ip_change(old,new,...) —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ —Å–º–µ–Ω–µ IP (–≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –∏–∑ ip_monitor)‚Äã
file-21rbessheqmsu7qgqntu4q
‚Äã
file-21rbessheqmsu7qgqntu4q
. –≠—Ç–∏ —É—Ç–∏–ª–∏—Ç—ã –ø–æ–≤—ã—à–∞—é—Ç –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å ‚Äì –Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ IP –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç—Å—è backup –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∏ –±–æ—Ç –≥–æ—Ç–æ–≤–∏—Ç—Å—è –∫ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ.
Telegram —É—Ç–∏–ª–∏—Ç—ã: –ø–∞–∫–µ—Ç telegram/_:
telegram_utils.py ‚Äì —Å–æ–¥–µ—Ä–∂–∏—Ç —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π (send_telegram_message) –∏ —Ñ–∞–π–ª–æ–≤ –≤ Telegram, —Å —É—á—ë—Ç–æ–º MarkdownV2 —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è‚Äã
file-6wmuhgeuvbxztwvnge8edj
‚Äã
file-6wmuhgeuvbxztwvnge8edj
. –í—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø—Ä–æ—Ö–æ–¥—è—Ç —á–µ—Ä–µ–∑ —ç—Ç—É —Ñ—É–Ω–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è –¥–æ–±–∞–≤–ª—è–µ—Ç —Ç–æ–∫–µ–Ω/—á–∞—Ç_id –∏–∑ config.py –∏ –¥–µ–ª–∞–µ—Ç HTTP POST –∑–∞–ø—Ä–æ—Å. –ü—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω–æ —É—Å–µ—á–µ–Ω–∏–µ —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –∏ –∞–≤–∞—Ä–∏–π–Ω—ã–π –ø–æ–≤—Ç–æ—Ä –±–µ–∑ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –µ—Å–ª–∏ Telegram API –≤–µ—Ä–Ω—É–ª –æ—à–∏–±–∫—É.
telegram_commands.py ‚Äì —Ä–µ–∞–ª–∏–∑—É–µ—Ç –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥. –ù–∞–ø—Ä–∏–º–µ—Ä, /help –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–æ–º–∞–Ω–¥, /summary ‚Äì —Å–≤–æ–¥–∫—É –ø–æ—Å–ª–µ–¥–Ω–µ–π —Å–¥–µ–ª–∫–∏ –∏ –æ—Å–Ω–æ–≤–Ω—ã—Ö –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π (–≤–∏–Ω—Ä–µ–π—Ç, PnL) —á–µ—Ä–µ–∑ stats.generate_summary(), /pause –∏ /resume —É–ø—Ä–∞–≤–ª—è—é—Ç state["pause"], /stop —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Ñ–ª–∞–≥ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ (–±–æ—Ç –Ω–∞—á–Ω–µ—Ç –∑–∞–≤–µ—Ä—à–∞—Ç—å —Ä–∞–±–æ—Ç—É –ø–æ—Å–ª–µ –∑–∞–∫—Ä—ã—Ç–∏—è –ø–æ–∑–∏—Ü–∏–π) –∏ —Ç.–¥. –¢–∞–∫–∂–µ –µ—Å—Ç—å —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã: /router_reboot (–≤–∫–ª—é—á–∞–µ—Ç —Ä–µ–∂–∏–º –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ IP –Ω–∞ 30 –º–∏–Ω—É—Ç –±–µ–∑ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –±–æ—Ç–∞), /close_dry <symbol> (—Ñ–æ—Ä—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ –∑–∞–∫—Ä—ã—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é –ø–æ–∑–∏—Ü–∏—é –≤ DRY_RUN) –∏ /resume_after_ip (–ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Ä–∞–±–æ—Ç—É –±–æ—Ç–∞ –ø–æ—Å–ª–µ —Å–º–µ–Ω—ã IP)‚Äã
file-fhwukdhoxi8etgflllknpf
‚Äã
file-fhwukdhoxi8etgflllknpf
. –≠—Ç–∏ –∫–æ–º–∞–Ω–¥—ã –ø–æ–∑–≤–æ–ª—è—é—Ç –≥–∏–±–∫–æ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–±–æ—Ç—É –±–æ—Ç–∞ –≤–æ –≤—Ä–µ–º—è –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è.
telegram_handler.py ‚Äì –∑–∞–ø—É—Å–∫–∞–µ—Ç –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ü–∏–∫–ª, –æ–ø—Ä–∞—à–∏–≤–∞—è Telegram API (getUpdates) —Å –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º (–≤ DRY_RUN —Ä–µ–∂–µ, —Ä–∞–∑ –≤ 60 —Å–µ–∫, –≤ –±–æ–µ–≤–æ–º —á–∞—â–µ ‚Äì —Ä–∞–∑ –≤ 3 —Å–µ–∫, —Å–æ–≥–ª–∞—Å–Ω–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º Priority 0) –∏ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –≤—ã–∑—ã–≤–∞–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∏–∑ telegram_commands. –ë–ª–∞–≥–æ–¥–∞—Ä—è —ç—Ç–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç –¥–∞—Ç—å –∫–æ–º–∞–Ω–¥—É –±–æ—Ç—É –∏ –ø–æ–ª—É—á–∏—Ç—å –æ—Ç–∫–ª–∏–∫, –Ω–µ –ø—Ä–µ—Ä—ã–≤–∞—è –æ—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ—Ü–µ—Å—Å —Ç–æ—Ä–≥–æ–≤–ª–∏.
–ú–æ–¥—É–ª–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏:
stats.py ‚Äì —Å–æ–±–∏—Ä–∞–µ—Ç –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –¥–ª—è –æ—Ç—á–µ—Ç–æ–≤. –í–µ–¥–µ—Ç—Å—è —Å–ª–æ–≤–∞—Ä—å trade_stats (–≤ config.py –∏–ª–∏ –≥–ª–æ–±–∞–ª—å–Ω–æ) —Å –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ win/loss, —Ç–µ–∫—É—â–∞—è —Å–µ—Ä–∏—è –ø—Ä–æ–∏–≥—Ä—ã—à–µ–π, —Å—É–º–º–∞—Ä–Ω—ã–π PnL, –¥–µ–ø–æ–∑–∏—Ç—ã/–≤—ã–≤–æ–¥—ã –∏ —Ç.–ø. –§—É–Ω–∫—Ü–∏—è get_safe_stats() –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ–ø–∏—é —ç—Ç–∏—Ö –º–µ—Ç—Ä–∏–∫ –ø–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ‚Äã
file-ljbs4tzzripdayx84b8fyv
.
build_performance_report(title, period) —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç —Ç–µ–∫—Å—Ç –æ—Ç—á–µ—Ç–∞ —Å –æ—Å–Ω–æ–≤–Ω—ã–º–∏ —Ü–∏—Ñ—Ä–∞–º–∏ (–∫–æ–ª-–≤–æ —Å–¥–µ–ª–æ–∫, –≤–∏–Ω—Ä–µ–π—Ç, —Å—É–º–º–∞—Ä–Ω—ã–π PnL, —Ç–µ–∫—É—â–∏–π —Ä–µ–∂–∏–º –∞–≥—Ä–µ—Å—Å–∏–≤–Ω–æ—Å—Ç–∏ –∏ –∫–æ—Ä–æ—Ç–∫–∏–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –ø–µ—Ä–∏–æ–¥–∞)‚Äã
file-ljbs4tzzripdayx84b8fyv
‚Äã
file-ljbs4tzzripdayx84b8fyv
.
generate_daily_report(days) –∏ –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–µ ‚Äì —á–∏—Ç–∞—é—Ç CSV —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ (EXPORT_PATH, —Ç.–µ. tp_performance.csv) –∏ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—é—Ç –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π –¥–µ–Ω—å (–∏–ª–∏ –Ω–µ–¥–µ–ª—é –∏ —Ç.–¥.): —á–∏—Å–ª–æ —Å–¥–µ–ª–æ–∫, –≤–∏–Ω—Ä–µ–π—Ç (–¥–æ–ª—è –∑–∞–ø–∏—Å–µ–π —Å –∏—Å—Ö–æ–¥–æ–º TP1/TP2), —Å—É–º–º–∞—Ä–Ω—ã–π –ø—Ä–æ—Ü–µ–Ω—Ç –ø—Ä–∏–±—ã–ª–∏, —Å—Ä–µ–¥–Ω–∏–π PnL –Ω–∞ —Å–¥–µ–ª–∫—É‚Äã
file-ljbs4tzzripdayx84b8fyv
‚Äã
file-ljbs4tzzripdayx84b8fyv
, –∞ —Ç–∞–∫–∂–µ —Ç–µ–∫—É—â–∏–π relax_factor (–∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –æ—Å–ª–∞–±–ª–µ–Ω–∏—è —Ñ–∏–ª—å—Ç—Ä–æ–≤ –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏, –±–µ—Ä–µ—Ç—Å—è –∏–∑ core.volatility_controller). –ó–∞—Ç–µ–º —Ç–µ–∫—Å—Ç –æ—Ç—á–µ—Ç–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ Telegram –∏ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è‚Äã
file-ljbs4tzzripdayx84b8fyv
. –í —Å–ª—É—á–∞–µ –æ—à–∏–±–æ–∫ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ ‚Äì –ª–æ–≤–∏—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏—è –∏ —É–≤–µ–¥–æ–º–ª—è–µ—Ç –æ–± –æ—à–∏–±–∫–µ.
–≠—Ç–∏ –æ—Ç—á–µ—Ç—ã –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –ø–æ —Ç–∞–π–º–µ—Ä—É (—Å–º. main.py –ø–æ—Ç–æ–∫–∏) –≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–µ –≤—Ä–µ–º—è –∫–∞–∂–¥—ã–π –¥–µ–Ω—å/–Ω–µ–¥–µ–ª—é, –¥–∞–≤–∞—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Å–≤–æ–¥–∫—É —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏.
score_heatmap.py ‚Äì –≤–µ—Ä–æ—è—Ç–Ω–æ, —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –≥—Ä–∞—Ñ–∏–∫-heatmap –ø–æ –∏—Å—Ç–æ—Ä–∏–∏ —Å–∫–æ—Ä–∏–Ω–≥–æ–≤ (—É–ø–æ–º–∏–Ω–∞–µ—Ç—Å—è –æ—Ç–ø—Ä–∞–≤–∫–∞ —Ä–∞–∑ –≤ –Ω–µ–¥–µ–ª—é). tp_optimizer.py –∏ tp_optimizer_ml.py ‚Äì –º–æ–¥—É–ª–∏ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Ç–µ–π–∫-–ø—Ä–æ—Ñ–∏—Ç–æ–≤, –≤–æ–∑–º–æ–∂–Ω–æ, –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É—é—Ç –∑–Ω–∞—á–µ–Ω–∏—è TP1/TP2 –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏—Å—Ç–æ—Ä–∏–∏ (–≤ –∫–æ–¥–µ –µ—Å—Ç—å —É–ø–æ–º–∏–Ω–∞–Ω–∏—è ML-–æ–ø—Ç–∏–º–∏–∑–∞—Ç–æ—Ä–∞, –Ω–æ –¥–µ—Ç–∞–ª—å–Ω—ã–π —Ä–∞–∑–±–æ—Ä —ç—Ç–∏—Ö –º–æ–¥—É–ª–µ–π –≤–Ω–µ —Ä–∞–º–æ–∫ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π Priority 1). –û–Ω–∏ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é (–∫–∞–∂–¥—ã–µ 2 –¥–Ω—è) –∏ –º–æ–≥—É—Ç –æ–±–Ω–æ–≤–ª—è—Ç—å –∫–æ–Ω—Ñ–∏–≥ (TP_THRESHOLDS) –ª–∏–±–æ —Å–æ–±–∏—Ä–∞—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –ª–æ–≥–∏.
–í —Ü–µ–ª–æ–º, –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –≤—ã—Å—Ç—Ä–æ–µ–Ω–∞ –≤–æ–∫—Ä—É–≥ —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ —Ç–æ—Ä–≥–æ–≤–ª–∏ (Trade Engine + Strategy), —Å —Ä—è–¥–æ–º –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ (–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ IP, Telegram –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, –æ—Ç—á–µ—Ç—ã, –ø–æ–¥–±–æ—Ä —Å–∏–º–≤–æ–ª–æ–≤). –õ–æ–≥–∏–∫–∞ DRY_RUN/REAL_RUN –≤–Ω–µ–¥—Ä–µ–Ω–∞ –Ω–∞ –≤—Å–µ—Ö —É—Ä–æ–≤–Ω—è—Ö ‚Äì –æ—Ç —Ñ–∏–ª—å—Ç—Ä–æ–≤ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ (–æ—Å–ª–∞–±–ª–µ–Ω–∏–µ –ø–æ—Ä–æ–≥–æ–≤ –≤ DRY_RUN)‚Äã
file-h6xu4badmdq3fnguzlxbzt
‚Äã
file-h6xu4badmdq3fnguzlxbzt
–¥–æ —É—Å–ª–æ–≤–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ—Ä–¥–µ—Ä–æ–≤ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è. –¢–∞–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ–±–ª–µ–≥—á–∞–µ—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π –≤ —Å–∏–º—É–ª—è—Ü–∏–∏ –∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤ –±–æ–µ–≤–æ–π —Ä–µ–∂–∏–º –±–µ–∑ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∫–æ–¥–∞. –î–∏–∞–≥—Ä–∞–º–º–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –º–æ–¥—É–ª–µ–π –≤ –æ–±—â–∏—Ö —á–µ—Ä—Ç–∞—Ö:
main.py –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç: core.engine_controller (—Ü–∏–∫–ª —Ç–æ—Ä–≥–æ–≤–ª–∏), pair_selector (—Å–∏–º–≤–æ–ª—ã), ip_monitor, stats (–æ—Ç—á–µ—Ç—ã), telegram._, tp_optimizer –∏ tp_optimizer_ml, utils_core (–¥–ª—è load/save state), utils_logging.
core.engine_controller –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç: core.strategy, core.trade_engine, symbol_processor, –∞ —Ç–∞–∫–∂–µ utils –¥–ª—è –±–∞–ª–∞–Ω—Å–∞ (get_cached_balance) –∏ Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (send_telegram_message).
core.strategy –∏—Å–ø–æ–ª—å–∑—É–µ—Ç: core.volatility_controller (—Ñ–∏–ª—å—Ç—Ä—ã –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏), core.score_evaluator (—Å–∫–æ—Ä–∏–Ω–≥), core.trade_engine (—á—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–∑–∏—Ü–∏–∏ —á–µ—Ä–µ–∑ trade_manager), tp_logger.get_trade_stats (–≤–∏–Ω—Ä–µ–π—Ç –¥–ª—è –∞–¥–∞–ø—Ç–∞—Ü–∏–∏), utils (–±–∞–ª–∞–Ω—Å, safe_call_retry) –∏ Telegram –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π.
core.trade_engine –∏—Å–ø–æ–ª—å–∑—É–µ—Ç: core.aggressiveness_controller (–æ—Ü–µ–Ω–∫–∞ —Ä–µ–∂–∏–º–∞ –¥–ª—è —Ç—Ä–µ–π–ª–∏–Ω–≥–∞), tp_logger.log_trade_result, utils_core.safe_call_retry, utils_logging –∏ Telegram utils.
symbol_processor –∏—Å–ø–æ–ª—å–∑—É–µ—Ç: core.strategy –∏ core.trade_engine (—Ä–∞—Å—á–µ—Ç—ã), –∞ —Ç–∞–∫–∂–µ utils_core (—Ä–∏—Å–∫ % –∏ –±–∞–ª–∞–Ω—Å).
ip_monitor –∏—Å–ø–æ–ª—å–∑—É–µ—Ç: telegram_utils –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π, utils_logging –∏ config –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–µ–∫.
utils_core/utils_logging ‚Äì —É—Ç–∏–ª–∏—Ç–∞—Ä–Ω—ã–µ, –ø–æ—á—Ç–∏ –≤–æ –≤—Å–µ—Ö –º–æ–¥—É–ª—è—Ö –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∏—Ö —Ñ—É–Ω–∫—Ü–∏–∏ (safe_call_retry, log, send_telegram_message –∏ —Ç.–¥.).
telegram_handler/commands –∏—Å–ø–æ–ª—å–∑—É—é—Ç stats, pair_selector, ip_monitor –∏ —Ñ—É–Ω–∫—Ü–∏–∏ core (–Ω–∞–ø—Ä–∏–º–µ—Ä, handle_stop –≤—ã–∑—ã–≤–∞–µ—Ç –æ—Å—Ç–∞–Ω–æ–≤–∫—É –≤ engine_controller —á–µ—Ä–µ–∑ state flags).
stats.py –∏—Å–ø–æ–ª—å–∑—É–µ—Ç core.aggressiveness_controller –∏ core.volatility_controller (–¥–ª—è —Ä–µ–∂–∏–º–∞ –∏ relax_factor), tp_logger (—á—Ç–µ–Ω–∏–µ –ª–æ–≥–∞ —Å–¥–µ–ª–æ–∫) –∏ Telegram utils –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏.
–¢–∞–∫–∞—è –º–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–µ–ª–∞–µ—Ç —Å–∏—Å—Ç–µ–º—É –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —á–∏—Ç–∞–±–µ–ª—å–Ω–æ–π: –∫–∞–∂–¥—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Å–≤–æ—é —á–∞—Å—Ç—å (—Å—Ç—Ä–∞—Ç–µ–≥–∏—è, –≤–µ–¥–µ–Ω–∏–µ –æ—Ä–¥–µ—Ä–æ–≤, –æ—Ç—á–µ—Ç—ã, —Å–≤—è–∑—å –∏ —Ç.–¥.), –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ —á–µ—Ç–∫–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã, —á—Ç–æ –ø–æ–≤—ã—à–∞–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç—å.
–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ –Ω–µ–¥–æ—á–µ—Ç—ã
–ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ñ–æ—Ä–º–∞—Ç–∞ –ª–æ–≥–æ–≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏. –í tp_logger.log_trade_result –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –∫–æ–ª–æ–Ω–∫–∏ –±–µ–∑ —è–≤–Ω–æ–≥–æ –ø–æ–ª—è –∏—Å—Ö–æ–¥–∞ —Å–¥–µ–ª–∫–∏. –ù–∞–ø—Ä–∏–º–µ—Ä, –Ω–µ—Ç –∫–æ–ª–æ–Ω–∫–∏ ‚ÄúResult‚Äù (TP1/TP2/SL), —Ö–æ—Ç—è –≤ –∫–æ–¥–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∏ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –æ–Ω–∞ –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è. –§—É–Ω–∫—Ü–∏—è get_trade_stats() –∏—â–µ—Ç –≤ CSV —Å—Ç–æ–ª–±–µ—Ü Result –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è winrate‚Äã
file-enxkz91uukojmm5cyikyhq
, –Ω–æ —Ç–µ–∫—É—â–∏–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ EXPORT_PATH —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–ª—å–∫–æ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –ø–æ–ª—è (HTF Confirmed, ATR –∏ –¥—Ä.)‚Äã
file-enxkz91uukojmm5cyikyhq
‚Äã
file-enxkz91uukojmm5cyikyhq
. –≠—Ç–æ —Ä–∞—Å—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–æ —Å –æ–∂–∏–¥–∞–Ω–∏—è–º–∏: –Ω–∞–ø—Ä–∏–º–µ—Ä, generate_daily_report —Å—á–∏—Ç–∞–µ—Ç win_trades –ø–æ df["Result"].isin(["TP1","TP2"])‚Äã
file-ljbs4tzzripdayx84b8fyv
, —á—Ç–æ –ø—Ä–∏–≤–µ–¥–µ—Ç –∫ –æ—à–∏–±–∫–µ, —Ç–∞–∫ –∫–∞–∫ —Å—Ç–æ–ª–±—Ü–∞ Result –º–æ–∂–µ—Ç –Ω–µ –±—ã—Ç—å. –í–µ—Ä–æ—è—Ç–Ω–æ, –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–ª–æ—Å—å –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å —Ç–∏–ø –∏—Å—Ö–æ–¥–∞ (TP1, TP2, SL, trailing, etc.) –≤ CSV, –Ω–æ —Å–µ–π—á–∞—Å —ç—Ç–æ–≥–æ –Ω–µ—Ç ‚Äì –ª–∏—à—å –∫–æ—Å–≤–µ–Ω–Ω–æ –º–æ–∂–Ω–æ –ø–æ–Ω—è—Ç—å –ø–æ —Ñ–ª–∞–≥–∞–º hit –∏ –∑–Ω–∞–∫—É PnL. –í–æ–∑–º–æ–∂–Ω—ã–π –±–∞–≥: –æ—Ç—á–µ—Ç—ã –º–æ–≥—É—Ç –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å –∏–ª–∏ –Ω–µ —É—á–∏—Ç—ã–≤–∞—Ç—å —á–∞—Å—Ç–∏—á–Ω—ã–µ —Ç–µ–π–∫-–ø—Ä–æ—Ñ–∏—Ç—ã, –∏–∑-–∑–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è —è–≤–Ω–æ–≥–æ –ø–æ–ª—è Result. –ù—É–∂–Ω–æ —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å —Ñ–æ—Ä–º–∞—Ç: –ª–∏–±–æ –¥–æ–±–∞–≤–∏—Ç—å –∫–æ–ª–æ–Ω–∫—É Result –ø—Ä–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–∏, –ª–∏–±–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –∫–æ–¥ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ —Ñ–ª–∞–≥–æ–≤ (tp1_hit, tp2_hit, sl_hit) –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∏—Å—Ö–æ–¥–∞ —Å–¥–µ–ª–∫–∏.
–ù–µ—É—á—Ç–µ–Ω–Ω—ã–π PnL –ø—Ä–∏ Soft Exit. –ú–µ—Ö–∞–Ω–∏–∑–º Soft Exit –ø—Ä–æ–¥–∞–µ—Ç —á–∞—Å—Ç—å –ø–æ–∑–∏—Ü–∏–∏ –¥–æ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –≤—ã—Ö–æ–¥–∞, –Ω–æ –ø—Ä–∏ —Ñ–∏–Ω–∞–ª—å–Ω–æ–º —Ä–∞—Å—á–µ—Ç–µ PnL –≤ record_trade_result —ç—Ç–æ –Ω–µ –æ—Ç—Ä–∞–∂–∞–µ—Ç—Å—è. –§–æ—Ä–º—É–ª–∞ PnL –±–µ—Ä—ë—Ç —Ç–æ–ª—å–∫–æ –Ω–∞—á–∞–ª—å–Ω—ã–π –∏ –∫–æ–Ω–µ—á–Ω—ã–π —Ü–µ–Ω—ã –ø–æ–∑–∏—Ü–∏–∏‚Äã
file-lkxtdfakr2ta7gnrcw6rb7
, –ø–æ—ç—Ç–æ–º—É –µ—Å–ª–∏, –∫ –ø—Ä–∏–º–µ—Ä—É, –ø–æ–ª–æ–≤–∏–Ω–∞ –ø–æ–∑–∏—Ü–∏–∏ –±—ã–ª–∞ –ø—Ä–æ–¥–∞–Ω–∞ –ø–æ –±–æ–ª–µ–µ –≤—ã—Å–æ–∫–æ–π —Ü–µ–Ω–µ, –∞ –æ—Å—Ç–∞—Ç–æ–∫ –∑–∞–∫—Ä—ã—Ç –ø–æ —Å—Ç–æ–ø—É (–Ω–∏–∂–µ –≤—Ö–æ–¥–∞), —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–π —Å—É–º–º–∞—Ä–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –º–æ–≥ –±—ã—Ç—å –æ–∫–æ–ª–æ –Ω—É–ª—è –∏–ª–∏ –¥–∞–∂–µ –ø–ª—é—Å–æ–≤–æ–π, –Ω–æ —Ñ–æ—Ä–º—É–ª–∞ –ø–æ–∫–∞–∂–µ—Ç —É–±—ã—Ç–æ–∫ (—Ä–∞—Å—Å—á–∏—Ç–∞–Ω–Ω—ã–π –ø–æ –ø–æ—Å–ª–µ–¥–Ω–µ–π —Ü–µ–Ω–µ –≤—ã—Ö–æ–¥–∞ –Ω–∞ –≤–µ—Å—å –æ–±—ä–µ–º). –§–ª–∞–≥ soft_exit_hit=True —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è –ø–æ–º–µ—Ç–∫–∏ –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏, –Ω–æ –Ω–µ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ—Ç —Ä–∞—Å—á–µ—Ç PnL. –≠—Ç–æ –≤–µ–¥–µ—Ç –∫ –Ω–µ—Ç–æ—á–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–µ: –±–æ—Ç –º–æ–∂–µ—Ç –∑–∞–Ω–∏–∂–∞—Ç—å –≤–∏–Ω—Ä–µ–π—Ç –∏ PnL –ø–æ —Å–¥–µ–ª–∫–∞–º —Å —á–∞—Å—Ç–∏—á–Ω–æ–π —Ñ–∏–∫—Å–∞—Ü–∏–µ–π. –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ, –ø—Ä–∏ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–∏ —Ç—Ä–µ–π–ª–∏–Ω–≥-—Å—Ç–æ–ø–∞ –ø–æ—Å–ª–µ TP1, –ø–µ—Ä–≤—ã–π —Ç–µ–π–∫ (tp1_hit) –Ω–µ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç PnL, —Ç.–∫. —Ñ–æ—Ä–º—É–ª–∞ –≤—Å–µ –µ—â–µ —Å—á–∏—Ç–∞–µ—Ç –æ—Ç –Ω–∞—á–∞–ª—å–Ω–æ–π —Ü–µ–Ω—ã –¥–æ —Ñ–∏–Ω–∞–ª—å–Ω–æ–π. –ù–µ–¥–æ—á–µ—Ç: —Å–ª–µ–¥–æ–≤–∞–ª–æ –±—ã —Å–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É —Ä–∞—Å—á–µ—Ç–∞ –ø—Ä–∏–±—ã–ª–∏ —Å —É—á–µ—Ç–æ–º —á–∞—Å—Ç–∏—á–Ω–æ–≥–æ –∑–∞–∫—Ä—ã—Ç–∏—è. –ù–∞–ø—Ä–∏–º–µ—Ä, —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—Ç—å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π —Å—Ä–µ–¥–Ω–∏–π exit price –∏–ª–∏ —Ä–∞–∑–±–∏–≤–∞—Ç—å —Å–¥–µ–ª–∫—É –Ω–∞ –¥–≤–µ –∑–∞–ø–∏—Å–∏ (TP –∏ –æ—Å—Ç–∞—Ç–æ–∫) –≤ –ª–æ–≥–µ. –í —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏ —ç—Ç–æ —É–ø—É—â–µ–Ω–∏–µ –º–æ–∂–µ—Ç –∑–∞–ø—É—Ç–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ—Ç—á–µ—Ç–∞ (–æ–Ω –≤–∏–¥–∏—Ç ‚ÄúSoft Exit hit‚Äù –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏, –Ω–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å–¥–µ–ª–∫–∏ –º–æ–∂–µ—Ç —á–∏—Å–ª–∏—Ç—å—Å—è –∫–∞–∫ LOSS –ø—Ä–∏ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–º –∫—É–º–µ).
–ì–ª–æ–±–∞–ª—å–Ω—ã–π —Å—á–µ—Ç—á–∏–∫ –ø–æ–∑–∏—Ü–∏–π –≤ DRY_RUN. –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è open_positions_count —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –≤—ã–∑–æ–≤–µ enter_trade –¥–∞–∂–µ –≤ —Ä–µ–∂–∏–º–µ DRY_RUN‚Äã
file-lkxtdfakr2ta7gnrcw6rb7
‚Äã
file-lkxtdfakr2ta7gnrcw6rb7
, –∞ —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è record_trade_result (—á—Ç–æ –≤ DRY_RUN –æ–±—ã—á–Ω–æ –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç, —Ç.–∫. —Å–¥–µ–ª–∫–∏ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ). –í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –ø—Ä–∏ –¥–ª–∏—Ç–µ–ª—å–Ω–æ–º –∑–∞–ø—É—Å–∫–µ –≤ —Ç–µ—Å—Ç–æ–≤–æ–º —Ä–µ–∂–∏–º–µ —Å—á–µ—Ç—á–∏–∫ –±—É–¥–µ—Ç —Ä–∞—Å—Ç–∏ —Å –∫–∞–∂–¥–æ–π —Å–º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Å–¥–µ–ª–∫–æ–π –∏ –º–æ–∂–µ—Ç –¥–æ—Å—Ç–∏—á—å max_open_positions, –ø–æ—Å–ª–µ —á–µ–≥–æ symbol_processor –Ω–∞—á–Ω–µ—Ç –ø—Ä–æ–ø—É—Å–∫–∞—Ç—å –Ω–æ–≤—ã–µ —Å–∏–≥–Ω–∞–ª—ã‚Äã
file-3d95hakkuxdq6khydn2tvj
, –æ—à–∏–±–æ—á–Ω–æ —Å—á–∏—Ç–∞—è, —á—Ç–æ —É–∂–µ –æ—Ç–∫—Ä—ã—Ç–æ —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –ø–æ–∑–∏—Ü–∏–π. –ü—Ä–∏ —ç—Ç–æ–º —Ä–µ–∞–ª—å–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç (get_position_size –≤ DRY_RUN –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 0, —Ç.–∫. –Ω–µ—Ç –æ—Ç–∫—Ä—ã—Ç—ã—Ö –æ—Ä–¥–µ—Ä–æ–≤). –≠—Ç–æ –ª–æ–≥–∏—á–µ—Å–∫–∏–π –∫–æ–Ω—Ñ–ª–∏–∫—Ç: –±–æ—Ç –º–æ–∂–µ—Ç ‚Äú–∑–∞—Å—Ç—Ä—è—Ç—å‚Äù –≤ DRY_RUN, –ø–µ—Ä–µ—Å—Ç–∞–≤ –æ—Ç–∫—Ä—ã–≤–∞—Ç—å –Ω–æ–≤—ã–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ —Å–¥–µ–ª–∫–∏ –∏–∑-–∑–∞ –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –ª–∏–º–∏—Ç–∞. –ü—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ /close_dry <symbol> –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –∑–∞–∫—Ä—ã—Ç–∏—è —Å–∏–º—É–ª—è—Ç–∏–≤–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏‚Äã
file-fhwukdhoxi8etgflllknpf
, –Ω–æ –æ–Ω–∞ —Ç—Ä–µ–±—É–µ—Ç –∑–Ω–∞—Ç—å, –∫–∞–∫–∏–µ —Å–∏–º–≤–æ–ª—ã ‚Äú–æ—Ç–∫—Ä—ã—Ç—ã‚Äù –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ (—Ç–∞–∫–∞—è –∏–Ω—Ñ–æ –Ω–µ –≤—ã–≤–æ–¥–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –∫—Ä–æ–º–µ –∫–∞–∫ –≤ –ª–æ–≥–∞—Ö). –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞: —Ä–æ—Å—Ç open_positions_count –±–µ–∑ —Å–±—Ä–æ—Å–∞. –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –ª–∏–±–æ —Å–±—Ä–∞—Å—ã–≤–∞—Ç—å/—É–º–µ–Ω—å—à–∞—Ç—å —ç—Ç–æ—Ç —Å—á–µ—Ç—á–∏–∫ –≤ DRY_RUN (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –∏–º–∏—Ç–∞—Ü–∏–∏ –≤—Ö–æ–¥–∞, –ª–∏–±–æ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏), –ª–∏–±–æ –≤–µ—Å—Ç–∏ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å—á–µ—Ç—á–∏–∫ –¥–ª—è —Ä–µ–∞–ª—å–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π. –û–¥–Ω–æ —Ä–µ—à–µ–Ω–∏–µ ‚Äì –≤ —Ñ—É–Ω–∫—Ü–∏–∏ log_entry –ø—Ä–∏ DRY_RUN —Å—Ä–∞–∑—É –≤—ã—á–∏—Ç–∞—Ç—å –ø–æ–∑–∏—Ü–∏—é, —Ä–∞–∑ –æ–Ω–∞ –ª–∏—à—å –¥–ª—è –ª–æ–≥–∞, –∏–ª–∏ –≤–æ–æ–±—â–µ –Ω–µ —Ç—Ä–æ–≥–∞—Ç—å open_positions_count –≤ DRY_RUN. –≠—Ç–æ —Å–¥–µ–ª–∞–µ—Ç —Ç–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º –±–æ–ª–µ–µ —Å—Ç–∞–±–∏–ª—å–Ω—ã–º –¥–ª—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ–≥–æ –ø—Ä–æ–≥–æ–Ω–∞.
–ì–æ–Ω–∫–∏ –º–µ–∂–¥—É last_trade_times –∏ TradeInfoManager. –ö–æ–¥ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –¥–≤–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –¥–ª—è –¥–∞–Ω–Ω—ã—Ö –æ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —Å–¥–µ–ª–∫–∞—Ö:
–ì–ª–æ–±–∞–ª—å–Ω—ã–π —Å–ª–æ–≤–∞—Ä—å last_trade_times (—Å –æ—Ç–¥–µ–ª—å–Ω—ã–º lock) ‚Äì —Ö—Ä–∞–Ω–∏—Ç –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –≤—Ö–æ–¥–∞ –ø–æ —Å–∏–º–≤–æ–ª—É –¥–ª—è cooldown.
TradeInfoManager (trade_manager) ‚Äì —Ö—Ä–∞–Ω–∏—Ç last_closed_time –∏ last_score –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ re-entry. –≠—Ç–∏ –º–µ—Ö–∞–Ω–∏–∑–º—ã —Ä–∞–±–æ—Ç–∞—é—Ç —Å–æ–≤–º–µ—Å—Ç–Ω–æ, –Ω–æ –µ—Å—Ç—å –Ω—é–∞–Ω—Å: –ø–æ—Å–ª–µ –∑–∞–∫—Ä—ã—Ç–∏—è —Å–¥–µ–ª–∫–∏ trade_manager.remove_trade —É–±–∏—Ä–∞–µ—Ç –∑–∞–ø–∏—Å—å, –∑–∞—Ç–µ–º set_last_closed_time –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –≤—Ä–µ–º—è –∑–∞–∫—Ä—ã—Ç–∏—è –≤ –Ω–æ–≤—ã–π –ø—É—Å—Ç–æ–π —Å–ª–æ—Ç (–Ω–æ —É–∂–µ –±–µ–∑ score)‚Äã
file-lkxtdfakr2ta7gnrcw6rb7
‚Äã
file-lkxtdfakr2ta7gnrcw6rb7
. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, trade_manager.get_last_score(symbol) –≤–µ—Ä–Ω–µ—Ç 0 –ø–æ—Å–ª–µ –∑–∞–∫—Ä—ã—Ç–∏—è —Å–¥–µ–ª–∫–∏ (—Ç–∞–∫ –∫–∞–∫ score —É–¥–∞–ª–µ–Ω). –í —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ —É—Å–ª–æ–≤–∏–µ re-entry ‚Äú–µ—Å–ª–∏ score –≤—ã—Ä–æ—Å –Ω–∞ ‚â•1.5 –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ‚Äù –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ last_score‚Äã
file-h6xu4badmdq3fnguzlxbzt
‚Äã
file-h6xu4badmdq3fnguzlxbzt
, –Ω–æ last_score –±—É–¥–µ—Ç 0 (false) –ø–æ—Å–ª–µ –∑–∞–∫—Ä—ã—Ç–∏—è. –¢–æ –µ—Å—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –≤—Ö–æ–¥ –∏–∑-–∑–∞ —É–ª—É—á—à–µ–Ω–∏—è —Å–∏–≥–Ω–∞–ª–∞ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç, –µ—Å–ª–∏ –ø—Ä–µ–¥—ã–¥—É—â–∞—è –ø–æ–∑–∏—Ü–∏—è –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–∫—Ä—ã—Ç–∞ ‚Äì –æ–Ω —Å—Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –ø–æ–∫–∞ —Å—Ç–∞—Ä–∞—è –ø–æ–∑–∏—Ü–∏—è –µ—â–µ –æ—Ç–∫—Ä—ã—Ç–∞ (—á—Ç–æ –ø–æ–∫—Ä—ã—Ç–æ SmartSwitch) –ª–∏–±–æ –µ—Å–ª–∏ trade_manager –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ –æ—á–∏—Å—Ç–∏–ª score. –í–æ–∑–º–æ–∂–Ω–æ, —Ç–∞–∫ –∏ –∑–∞–¥—É–º–∞–Ω–æ (—Ä–µ-–µ–Ω—Ç—Ä–∏ –ø–æ —É–ª—É—á—à–µ–Ω–Ω–æ–º—É —Å–∫–æ—Ä—É –∞–∫—Ç—É–∞–ª–µ–Ω —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —Å–≤–∏—Ç—á–µ –∞–∫—Ç–∏–≤–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏), –Ω–æ –ª–æ–≥–∏–∫–∞ –Ω–µ–º–Ω–æ–≥–æ –∑–∞–ø—É—Ç–∞–Ω–Ω–∞—è: –Ω–∞–ª–∏—á–∏–µ –¥–≤—É—Ö —Ö—Ä–∞–Ω–∏–ª–∏—â –¥–∞–Ω–Ω—ã—Ö –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ —Ç–æ–º—É, —á—Ç–æ –ø—Ä–∏ –æ—á–µ–Ω—å –±—ã—Å—Ç—Ä–æ–º –∑–∞–∫—Ä—ã—Ç–∏–∏ –∏ –Ω–æ–≤–æ–º —Å–∏–≥–Ω–∞–ª–µ elapsed < cooldown –≤–µ—Ç–∫–∞ re-entry –ø–æ –≤—Ä–µ–º–µ–Ω–∏ —Å—Ö–≤–∞—Ç–∏—Ç—Å—è –≤–º–µ—Å—Ç–æ –≤–µ—Ç–∫–∏ –ø–æ —É–ª—É—á—à–µ–Ω–Ω–æ–º—É —Å–∫–æ—Ä—É. –≠—Ç–æ –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ, –Ω–æ –º–æ–∂–µ—Ç —Å—Ç–æ–∏—Ç—å –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å —Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –¥–∞–Ω–Ω—ã—Ö –ø–æ —Å–∏–º–≤–æ–ª—É –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ. –ù–∞–ø—Ä–∏–º–µ—Ä, –¥–æ–±–∞–≤–∏—Ç—å –≤ TradeInfoManager –ø–æ–ª–µ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ score –∑–∞–∫—Ä—ã—Ç–æ–π —Å–¥–µ–ª–∫–∏. –¢–æ–≥–¥–∞ –º–æ–∂–Ω–æ –∏–∑–±–∞–≤–∏—Ç—å—Å—è –æ—Ç –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ last_trade_times –∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é –¥–æ–≤–µ—Ä—è—Ç—å trade_manager –¥–ª—è –≤—Å–µ—Ö —É—Å–ª–æ–≤–∏–π (—Ö—Ä–∞–Ω–∏—Ç—å —Ç–∞–º –∏ –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –≤—Ö–æ–¥–∞, –∏ –≤—Ä–µ–º—è –∑–∞–∫—Ä—ã—Ç–∏—è, –∏ score). –°–µ–π—á–∞—Å –∂–µ –µ—Å—Ç—å –Ω–µ–±–æ–ª—å—à–æ–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ: –≤—Ä–µ–º—è –≤—Ö–æ–¥–∞ —Ö—Ä–∞–Ω–∏—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ, –≤—Ä–µ–º—è –∑–∞–∫—Ä—ã—Ç–∏—è ‚Äì –≤ –¥—Ä—É–≥–æ–º –º–µ—Å—Ç–µ.
–û—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ /stop –∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø–æ—Ç–æ–∫–æ–≤. –ú–µ—Ö–∞–Ω–∏–∑–º –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –ø—É—Ç–µ–º —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Ñ–ª–∞–≥–∞ stopping –≤ state –∏ –æ–∂–∏–¥–∞–Ω–∏—è, –ø–æ–∫–∞ –≤—Å–µ –æ—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ–∑–∏—Ü–∏–∏ –∑–∞–∫—Ä–æ—é—Ç—Å—è‚Äã
file-k6v5erujzuuurkbgajvjes
‚Äã
file-k6v5erujzuuurkbgajvjes
. –í engine_controller –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Ü–∏–∫–ª–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —ç—Ç–æ—Ç —Ñ–ª–∞–≥: –µ—Å–ª–∏ stopping=True, –∞ –æ—Ç–∫—Ä—ã—Ç—ã—Ö —Ç—Ä–µ–π–¥–æ–≤ –Ω–µ—Ç ‚Äì –±–æ—Ç –≤—ã—Ö–æ–¥–∏—Ç (–∏ –µ—Å–ª–∏ shutdown=True, —Ç–æ –¥–µ–ª–∞–µ—Ç os.\_exit(0) –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ)‚Äã
file-k6v5erujzuuurkbgajvjes
‚Äã
file-k6v5erujzuuurkbgajvjes
. –≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Ü–∏–∫–ª–∞. –û–¥–Ω–∞–∫–æ, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ os.\_exit(0) –∑–∞–≤–µ—Ä—à–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å –º–≥–Ω–æ–≤–µ–Ω–Ω–æ, –Ω–µ –¥–∞–≤–∞—è –∑–∞–∫—Ä—ã–≤–∞—é—â–∏–º—Å—è –ø–æ—Ç–æ–∫–∞–º (—Ä–µ–ø–æ—Ä—Ç—ã, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥) –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞–≤–µ—Ä—à–∏—Ç—å—Å—è. –í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä, –ª–æ–≥-—Ñ–∞–π–ª –º–æ–∂–µ—Ç –Ω–µ —Å–±—Ä–æ—Å–∏—Ç—å—Å—è, –∏–ª–∏ –¥—Ä—É–≥–∏–µ —Ä–µ—Å—É—Ä—Å—ã –Ω–µ –æ—Å–≤–æ–±–æ–¥–∏—Ç—å—Å—è. –†–∏—Å–∫ –Ω–µ–±–æ–ª—å—à–æ–π (–±–æ—Ç –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –ø–∏—à–µ—Ç —Ñ–∞–π–ª—ã —Ä–µ–≥—É–ª—è—Ä–Ω–æ, –∏ os.\_exit —Ç—É—Ç –æ—Å–æ–∑–Ω–∞–Ω–Ω–æ –ø—Ä–∏–º–µ–Ω–µ–Ω –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ–≥–æ –æ—Ç–∫–ª—é—á–µ–Ω–∏—è), –Ω–æ –±–æ–ª–µ–µ ‚Äú—á–∏—Å—Ç—ã–º‚Äù —Ä–µ—à–µ–Ω–∏–µ–º –±—ã–ª–æ –±—ã —Å–∏–≥–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ–º –ø–æ—Ç–æ–∫–∞–º –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏. –ù–∞–ø—Ä–∏–º–µ—Ä, –º–æ–∂–Ω–æ –∑–∞–≤–µ—Å—Ç–∏ –≥–ª–æ–±–∞–ª—å–Ω—ã–π —Ñ–ª–∞–≥ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∏ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –µ–≥–æ –≤–Ω—É—Ç—Ä–∏ –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã—Ö —Ü–∏–∫–ª–æ–≤ (–≤ start_report_loops, start_symbol_rotation, start_ip_monitor), —á—Ç–æ–±—ã –∞–∫–∫—É—Ä–∞—Ç–Ω–æ –≤—ã–π—Ç–∏ –∏–∑ –Ω–∏—Ö. –≠—Ç–æ –ø–æ–≤—ã—Å–∏–ª–æ –±—ã —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏ –º–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω–æ–º –∑–∞–ø—É—Å–∫–µ-–æ—Å—Ç–∞–Ω–æ–≤–∫–µ –±–æ—Ç–∞, —Ö–æ—Ç—è –≤ —Ç–µ–∫—É—â–µ–º –≤–∏–¥–µ –ø—Ä–æ–±–ª–µ–º –Ω–µ –Ω–∞–±–ª—é–¥–∞–µ—Ç—Å—è, —Ç–∞–∫ –∫–∞–∫ –ø—Ä–∏ shutdown –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è –ø—Ä–µ–∫—Ä–∞—â–µ–Ω–∏–µ –≤—Å–µ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞.
–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –∏ –∑–∞–¥–µ—Ä–∂–∫–∏. –í —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –≤—Å–µ —Å–µ—Ç–µ–≤—ã–µ –≤—ã–∑–æ–≤—ã (API –±–∏—Ä–∂–∏, Telegram) –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –ø–æ—Ç–æ–∫–∞—Ö, —á—Ç–æ, –∫–∞–∫ –ø—Ä–∞–≤–∏–ª–æ, –Ω–æ—Ä–º–∞–ª—å–Ω–æ. –ù–æ –µ—Å—Ç—å –º–µ—Å—Ç–∞, –≥–¥–µ –º–æ–≥—É—Ç –±—ã—Ç—å –∑–∞–¥–µ—Ä–∂–∫–∏:
–§—É–Ω–∫—Ü–∏—è fetch_all_symbols –≤ pair_selector –º–æ–∂–µ—Ç –±—ã—Ç—å —Ç—è–∂–µ–ª–æ–π ‚Äì –æ–Ω–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç –≤—Å–µ —Ä—ã–Ω–∫–∏ (—Å–æ—Ç–Ω–∏ —Å–∏–º–≤–æ–ª–æ–≤) –∏ –ø–æ—Ç–æ–º –µ—â–µ –≤—ã–∑—ã–≤–∞–µ—Ç fetch_ohlcv –ø–æ –∫–∞–∂–¥–æ–º—É –∏–∑ ~30 –ª—É—á—à–∏—Ö —Å–∏–º–≤–æ–ª–æ–≤ –¥–ª—è –æ—Ü–µ–Ω–∫–∏ –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏‚Äã
file-btgyem4bdutqonzdrerqgw
‚Äã
file-btgyem4bdutqonzdrerqgw
. –≠—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ä–∞–∑ –≤ —á–∞—Å, –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø–æ—Ç–æ–∫–µ, –∏ –º–æ–∂–µ—Ç –∑–∞–Ω–∏–º–∞—Ç—å –¥–µ—Å—è—Ç–∫–∏ —Å–µ–∫—É–Ω–¥. –ï—Å–ª–∏ –≤ —ç—Ç–æ –≤—Ä–µ–º—è –æ—Å–Ω–æ–≤–Ω–æ–π –ø–æ—Ç–æ–∫ —Ç–æ—Ä–≥–æ–≤–ª–∏ —Ç–æ–∂–µ –¥–µ–ª–∞–µ—Ç API-–≤—ã–∑–æ–≤—ã, –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä—ã–π —Å–∫–∞—á–æ–∫ –Ω–∞–≥—Ä—É–∑–∫–∏. –ü–æ–∫–∞ —ç—Ç–æ –Ω–µ —Å–æ–∑–¥–∞–µ—Ç —è–≤–Ω–æ–π –ø—Ä–æ–±–ª–µ–º—ã (—Ä–∞–∑–Ω—ã–µ –ø–æ—Ç–æ–∫–∏, Safe Retry —Ä–∞–∑–≥—Ä—É–∑–∏—Ç –ø–∏–∫–æ–≤—ã–µ –æ—à–∏–±–∫–∏), –Ω–æ —Å–ª–µ–¥—É–µ—Ç —Å–ª–µ–¥–∏—Ç—å –∑–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é. –£–ª—É—á—à–µ–Ω–∏–µ –º–æ–≥–ª–æ –±—ã –∑–∞–∫–ª—é—á–∞—Ç—å—Å—è –≤ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–º –∏–ª–∏ –±–∞—Ç—á–µ–≤–æ–º –∑–∞–ø—Ä–æ—Å–µ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–∏–º–≤–æ–ª–æ–≤ —Å—Ä–∞–∑—É, –ª–∏–±–æ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–∏ –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏, —á—Ç–æ–±—ã –Ω–µ –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞—Ç—å –∫–∞–∂–¥—ã–π —á–∞—Å —Å –Ω—É–ª—è –¥–ª—è –≤—Å–µ—Ö.
–í telegram_handler, –ø—Ä–∏ DRY_RUN –æ–ø—Ä–æ—Å API —Ä–∞–∑ –≤ 60 —Å–µ–∫—É–Ω–¥ ‚Äì —ç—Ç–æ —Å–¥–µ–ª–∞–Ω–æ –¥–ª—è —Å–Ω–∏–∂–µ–Ω–∏—è —à—É–º–∞ –≤ —Ç–µ—Å—Ç–µ. –û–¥–Ω–∞–∫–æ, –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤ DRY_RUN –æ—Ç–ø—Ä–∞–≤–∏—Ç –∫–æ–º–∞–Ω–¥—É, –æ—Ç–≤–µ—Ç –ø—Ä–∏–¥–µ—Ç —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π –¥–æ –º–∏–Ω—É—Ç—ã. –≠—Ç–æ –ø—Ä–∏–µ–º–ª–µ–º–æ, –Ω–æ –º–æ–∂–Ω–æ –±—ã–ª–æ –±—ã —Å–ª—É—à–∞—Ç—å —á–∞—â–µ –∏–ª–∏ —Å—Ä–∞–∑—É –ø–æ –∫–æ–º–∞–Ω–¥–µ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ –∂–¥–∞—Ç—å —Ü–∏–∫–ª. –í REAL_RUN (3 —Å–µ–∫ –∏–Ω—Ç–µ—Ä–≤–∞–ª) —Ç–∞–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º –Ω–µ—Ç.
–ß–∏—Ç–∞–µ–º–æ—Å—Ç—å –∫–æ–¥–∞ –∏ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏. –í —Ü–µ–ª–æ–º –∫–æ–¥ —Ö–æ—Ä–æ—à–æ –ø—Ä–æ–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω –∏ —Ä–∞–∑–±–∏—Ç –Ω–∞ —Ñ—É–Ω–∫—Ü–∏–∏, –æ–¥–Ω–∞–∫–æ –µ—Å—Ç—å –Ω–µ–±–æ–ª—å—à–∏–µ –ø–æ–≤—Ç–æ—Ä—ã:
–§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ Telegram-—Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è –æ–¥–Ω–∏—Ö –∏ —Ç–µ—Ö –∂–µ —Å–æ–±—ã—Ç–∏–π —Ä–∞–∑–±—Ä–æ—Å–∞–Ω–æ –ø–æ –∫–æ–¥—É. –ù–∞–ø—Ä–∏–º–µ—Ä, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ —Ä–µ-–µ–Ω—Ç—Ä–∏ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –∏ –≤ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ (DRY_RUN —Å–ª—É—á–∞–π)‚Äã
file-h6xu4badmdq3fnguzlxbzt
, –∏ –≤ enter_trade (–≤ —Å–æ–æ–±—â–µ–Ω–∏–∏ ‚ÄúNEW TRADE (Re-entry)‚Äù –ø—Ä–∏ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ö–æ–¥–µ)‚Äã
file-lkxtdfakr2ta7gnrcw6rb7
. –û–Ω–∏ –Ω–µ–º–Ω–æ–≥–æ –æ—Ç–ª–∏—á–∞—é—Ç—Å—è –ø–æ —Ñ–æ—Ä–º–∞—Ç—É. –ú–æ–∂–Ω–æ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞—Ç—å —à–∞–±–ª–æ–Ω—ã —Å–æ–æ–±—â–µ–Ω–∏–π, —á—Ç–æ–±—ã —Å—Ç–∏–ª—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –±—ã–ª –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω—ã–º.
–ü–æ—Ä–æ–≥–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –∏ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã —Ä–∞–∑–±—Ä–æ—Å–∞–Ω—ã –ø–æ config.py. –ù–∞–ø—Ä–∏–º–µ—Ä, MIN_SCORE_DELTA_SWITCH, BREAKEVEN_TRIGGER, SOFT_EXIT_THRESHOLD ‚Äì –≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–µ—á–∫–∏, –≤–ª–∏—è—é—â–∏–µ –Ω–∞ –ª–æ–≥–∏–∫—É. –°—Ç–æ–∏–ª–æ –±—ã —Å–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞—Ç—å –∏—Ö –≤ –∫–æ–Ω—Ñ–∏–≥–µ –ø–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º –±–ª–æ–∫–∞–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, –±–ª–æ–∫ SmartSwitch, –±–ª–æ–∫ RiskManagement) –∏–ª–∏ —Ö–æ—Ç—è –±—ã –¥–∞—Ç—å –±–æ–ª–µ–µ –æ—á–µ–≤–∏–¥–Ω—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤ config. –°–µ–π—á–∞—Å –ø–æ–Ω–∏–º–∞–Ω–∏–µ, –∑–∞ —á—Ç–æ –æ—Ç–≤–µ—á–∞–µ—Ç —Ç–∞ –∏–ª–∏ –∏–Ω–∞—è –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞, —Ç—Ä–µ–±—É–µ—Ç —á—Ç–µ–Ω–∏—è –∫–æ–¥–∞ (—Ö–æ—Ç—è –Ω–∞–∑–≤–∞–Ω–∏—è –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –≥–æ–≤–æ—Ä—è—â–∏–µ).
–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è vs –∫–æ–¥: –í –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ (MASTER PLAN v1.6.2) –æ—Ç–º–µ—á–µ–Ω–æ, —á—Ç–æ Soft Exit –∏ Re-entry ‚Äú‚ùå –Ω–µ –Ω–∞—á–∏–Ω–∞–ª–∏‚Äù –Ω–∞ –º–æ–º–µ–Ω—Ç –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è‚Äã
file-vksg6mj1tgbvgbyhta9b96
, –Ω–æ –≤ –∫–æ–¥–µ —ç—Ç–∏ —Ñ—É–Ω–∫—Ü–∏–∏ —É–∂–µ –µ—Å—Ç—å. –í–æ–∑–º–æ–∂–Ω–æ, —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –µ—â–µ —Å–≤–µ–∂–∏–µ, –∏ —Å—Ç–æ–∏—Ç —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –æ–Ω–∏ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã. –ù–∞–ø—Ä–∏–º–µ—Ä, —Ä–µ-–µ–Ω—Ç—Ä–∏ –ø—Ä–∏ —É–ª—É—á—à–µ–Ω–∏–∏ score ‚Äì –Ω–æ–≤–∞—è –ª–æ–≥–∏–∫–∞, –≤–∞–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ –±—ç–∫—Ç–µ—Å—Ç–∞—Ö, —á—Ç–æ –æ–Ω–∞ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —É–ª—É—á—à–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã. –°–µ–π—á–∞—Å –µ–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (—Ä–∞–∑–Ω–∏—Ü–∞ ‚â•1.5) –≤—ã–±—Ä–∞–Ω—ã –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ; –≤–æ–∑–º–æ–∂–Ω–æ, –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –∫–∞–ª–∏–±—Ä–æ–≤–∫–∞.
–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å. –í —Ü–µ–ª–æ–º, –ø—Ä–æ–µ–∫—Ç —É–¥–µ–ª—è–µ—Ç –≤–Ω–∏–º–∞–Ω–∏–µ –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏ (safe_call_retry, –ª–æ–≤–ª—è –∏—Å–∫–ª—é—á–µ–Ω–∏–π, —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥–æ–≤). –¢–µ–º –Ω–µ –º–µ–Ω–µ–µ, –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –º–æ–º–µ–Ω—Ç—ã:
–í–Ω–µ—à–Ω–∏–µ –∑–∞–ø—Ä–æ—Å—ã: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ requests –¥–ª—è Telegram –∏ IP –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –±–µ–∑ —è–≤–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª—è –æ—à–∏–±–æ–∫. –•–æ—Ç—è –µ—Å—Ç—å try/except, –Ω–æ, –Ω–∞–ø—Ä–∏–º–µ—Ä, requests.get(ipify) –≤ get_current_ip –Ω–µ –∏–º–µ–µ—Ç —Ç–∞–π–º–∞—É—Ç–∞‚Äã
file-khpr4su3quufvmsox6nr6q
‚Äì –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ, –µ—Å–ª–∏ —Å–µ—Ä–≤–∏—Å –∑–∞–≤–∏—Å–Ω–µ—Ç, –ø–æ—Ç–æ–∫ –º–æ–∂–µ—Ç –ø–æ–¥–≤–∏—Å–Ω—É—Ç—å –Ω–∞–¥–æ–ª–≥–æ. –õ—É—á—à–µ –∑–∞–¥–∞—Ç—å timeout=5 –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ IP.
API-–∫–ª—é—á–∏: —Ç–æ–∫–µ–Ω Telegram –∏ –∫–ª—é—á–∏ –±–∏—Ä–∂–∏ –±–µ—Ä—É—Ç—Å—è –∏–∑ config.py. –í –∫–æ–¥–µ –æ–Ω–∏ –Ω–µ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è (–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ), –Ω–æ —Å—Ç–æ–∏—Ç —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –Ω–∏–≥–¥–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ –æ—à–∏–±–∫–µ requests) –Ω–µ –≤—ã–≤–µ–¥—É—Ç —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ. –ü–æ–∫–∞ —Ç–∞–∫–∏—Ö –º–µ—Å—Ç –Ω–µ –≤–∏–¥–Ω–æ.
–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —è–≤–Ω—ã—Ö —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π: –∫–æ–¥ –Ω–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –≤–Ω–µ—à–Ω–µ–≥–æ –≤–≤–æ–¥–∞ (–∫—Ä–æ–º–µ Telegram –∫–æ–º–∞–Ω–¥, –∫–æ—Ç–æ—Ä—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω—ã –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω–Ω—ã–º —Å–ø–∏—Å–∫–æ–º), –ø–æ—ç—Ç–æ–º—É —É–≥—Ä–æ–∑ SQL-–∏–Ω—ä–µ–∫—Ü–∏–π –∏–ª–∏ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–¥–∞ –Ω–µ—Ç. –ì–ª–∞–≤–Ω–æ–µ ‚Äì —Å–æ—Ö—Ä–∞–Ω—è—Ç—å API-–∫–ª—é—á–∏ –∏ —Ç–æ–∫–µ–Ω—ã –≤ —Ç–∞–π–Ω–µ, –∞ —Å —ç—Ç–∏–º —Å–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è.
–ü–æ–¥—ã—Ç–æ–∂–∏–≤–∞—è: –Ω–µ—Å–º–æ—Ç—Ä—è –Ω–∞ –ø—Ä–∏–≤–µ–¥–µ–Ω–Ω—ã–µ –≤—ã—à–µ –Ω–µ–¥–æ—á–µ—Ç—ã, –æ–±—â–∞—è –ª–æ–≥–∏–∫–∞ –≤—ã–≥–ª—è–¥–∏—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π –∏ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –Ω–∞–¥–µ–∂–Ω–æ–π. –†–µ–∂–∏–º—ã DRY_RUN/REAL_RUN —É—á—Ç–µ–Ω—ã –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –≤ –∫–∞–∂–¥–æ–º –∫—Ä–∏—Ç–∏—á–Ω–æ–º –º–µ—Å—Ç–µ (–æ—Ç —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è —Å–∏–≥–Ω–∞–ª–æ–≤ –¥–æ –∑–∞–ø–∏—Å–∏ –ª–æ–≥–æ–≤), –º–∏–Ω–∏–º–∏–∑–∏—Ä—É—è —Ä–∏—Å–∫ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã. –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∏ —á–∞—Å—Ç–∏—á–Ω—ã–º–∏ –≤—ã—Ö–æ–¥–∞–º–∏ –º–æ–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å —Ç–æ—á–µ—á–Ω—ã–º–∏ —É–ª—É—á—à–µ–Ω–∏—è–º–∏.
–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é
–ù–∞ –±–∞–∑–µ –≤—ã—è–≤–ª–µ–Ω–Ω—ã—Ö –º–æ–º–µ–Ω—Ç–æ–≤, –≤–æ—Ç —Å–ø–∏—Å–æ–∫ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏, —á–∏—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ —Ä–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç–∏ –∫–æ–¥–∞:
–ï–¥–∏–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –ª–æ–≥–æ–≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤: –°–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å tp_logger –∏ stats. –ñ–µ–ª–∞—Ç–µ–ª—å–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤ CSV –ø–æ–ª–µ —è–≤–Ω–æ–≥–æ –∏—Å—Ö–æ–¥–∞ —Å–¥–µ–ª–∫–∏. –ù–∞–ø—Ä–∏–º–µ—Ä, –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å ‚ÄúTP1‚Äù / ‚ÄúTP2‚Äù / ‚ÄúSL‚Äù / ‚ÄúTrailing‚Äù / ‚ÄúManual‚Äù –∏ —Ç.–ø. –¢–æ–≥–¥–∞ –æ—Ç—á–µ—Ç—ã —Å–º–æ–≥—É—Ç –Ω–∞–ø—Ä—è–º—É—é –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã. –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ, –º–æ–∂–Ω–æ –ø–æ–ø—Ä–∞–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏, —á—Ç–æ–±—ã –æ–Ω–∏ –≤—ã–≤–æ–¥–∏–ª–∏ –≤–∏–Ω—Ä–µ–π—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ —Ñ–ª–∞–≥–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å—á–∏—Ç–∞—Ç—å –≤—ã–∏–≥—Ä—ã—à–∞–º–∏ —Å—Ç—Ä–æ–∫–∏, –≥–¥–µ SL Hit = False –∏ PnL > 0). –Ø—Å–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö –ª–æ–≥–æ–≤ –≤–∞–∂–Ω–∞ –¥–ª—è –¥–æ–≤–µ—Ä–∏—è –∫ –æ—Ç—á–µ—Ç–∞–º ‚Äì —Å–µ–π—á–∞—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –Ω–µ–ø–æ–Ω—è—Ç–Ω–æ, —á—Ç–æ —Å—á–∏—Ç–∞—Ç—å ‚Äúwin‚Äù. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–æ–ª–±—Ü–∞ Result —Ä–µ—à–∏–ª–æ –±—ã —ç—Ç–æ (–≤ record_trade_result –º–æ–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ result_type –∏ —Ñ–ª–∞–≥–∞–º –∏ –ø–µ—Ä–µ–¥–∞—Ç—å –≤ log_trade_result). –¢–∞–∫–∂–µ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ entry_logger –∏ tp_logger —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω—ã —Å DRY_RUN: –≤ –∏–¥–µ–∞–ª–µ, DRY_RUN-–¥–µ–π—Å—Ç–≤–∏—è –≤–æ–æ–±—â–µ –Ω–µ –¥–æ–ª–∂–Ω—ã –ø–∏—Å–∞—Ç—å –≤ –∏—Ç–æ–≥–æ–≤—ã–µ CSV (—Å–µ–π—á–∞—Å —Ç–∞–∫ –∏ —Å–¥–µ–ª–∞–Ω–æ), –ø–æ—ç—Ç–æ–º—É —ç—Ç–∏ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ, –ø—Ä–æ—Å—Ç–æ –∏—Ö –≤—ã–≤–æ–¥ —Å—Ç–æ–∏—Ç –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ –±–æ–µ–≤–æ–º —Ä–µ–∂–∏–º–µ.
–£—á–µ—Å—Ç—å —á–∞—Å—Ç–∏—á–Ω—ã–µ –∑–∞–∫—Ä—ã—Ç–∏—è –ø—Ä–∏ —Ä–∞—Å—á–µ—Ç–µ PnL: –ú–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å record_trade_result. –ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ soft_exit_hit=True, –ø–æ—Å—á–∏—Ç–∞—Ç—å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π –≤—ã—Ö–æ–¥ –∫–∞–∫ —Å—Ä–µ–¥–Ω–µ–≤–∑–≤–µ—à–µ–Ω–Ω—É—é —Ü–µ–Ω—É: –ø–æ–ª–æ–≤–∏–Ω–∞ –æ–±—ä–µ–º–∞ –ø–æ soft_exit_price, –ø–æ–ª–æ–≤–∏–Ω–∞ –ø–æ final_exit ‚Äì –∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ —ç—Ç–æ–≥–æ –ø–µ—Ä–µ—Å—á–∏—Ç–∞—Ç—å PnL%. –õ–∏–±–æ —Ö–æ—Ç—è –±—ã –ø–æ–º–µ—á–∞—Ç—å —Ç–∞–∫–∏–µ —Å–¥–µ–ª–∫–∏ –æ—Å–æ–±—ã–º –∏—Å—Ö–æ–¥–æ–º ‚ÄúPartial‚Äù –∏ –≤ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ. –°–µ–π—á–∞—Å Soft Exit –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Å–≤–æ—é —Ñ—É–Ω–∫—Ü–∏—é (—Å–Ω–∏–∂–∞–µ—Ç —Ä–∏—Å–∫), –Ω–æ –µ–≥–æ —ç—Ñ—Ñ–µ–∫—Ç –Ω–µ –ø—Ä–æ–∑—Ä–∞—á–µ–Ω –≤ –ª–æ–≥–∞—Ö. –ü–æ–¥–æ–±–Ω–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ –ø–æ–≤—ã—Å–∏—Ç —Ç–æ—á–Ω–æ—Å—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∏ –¥–æ–≤–µ—Ä–∏–µ –∫ –Ω–µ–π ‚Äì –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–≤–∏–¥–∏—Ç, —á—Ç–æ, —Å–∫–∞–∂–µ–º, —Å–¥–µ–ª–∫–∞ –∑–∞–∫—Ä—ã—Ç–∞ —á–∞—Å—Ç–∏—á–Ω–æ –ø–æ—Ä–∞–Ω—å—à–µ –∏ —É–±—ã—Ç–æ–∫ —Å–æ–∫—Ä–∞—â–µ–Ω, –∞ –Ω–µ –ø–æ–ª–Ω—ã–π —Å—Ç–æ–ø-–ª–æ—Å—Å.
–†–∞–∑–¥–µ–ª–∏—Ç—å —É—á–µ—Ç –ø–æ–∑–∏—Ü–∏–π –≤ —Å–∏–º—É–ª—è—Ü–∏–∏ –∏ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏: –î–ª—è DRY_RUN –º–æ–∂–Ω–æ –ª–∏–±–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å open_positions_count –≤–æ–æ–±—â–µ, –ª–∏–±–æ —Å–±—Ä–∞—Å—ã–≤–∞—Ç—å –µ–≥–æ. –û–¥–∏–Ω –≤–∞—Ä–∏–∞–Ω—Ç: –æ–±–Ω—É–ª—è—Ç—å open_positions_count –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Ü–∏–∫–ª–µ –≤ DRY_RUN (—Ç.–∫. —ç—Ç–æ –≤–µ–¥—å —Å–∏–º—É–ª—è—Ü–∏—è, –º–æ–∂–Ω–æ —Å—á–∏—Ç–∞—Ç—å, —á—Ç–æ ‚Äú–≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ —Å–¥–µ–ª–∫–∏‚Äù –Ω–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω—ã –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É). –ï—Å–ª–∏ –∂–µ —Ö–æ—á–µ—Ç—Å—è –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—Ç—å –∏ –≤ DRY_RUN, —Ç–æ –Ω—É–∂–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –¥–µ–∫—Ä–µ–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å: –¥–æ–±–∞–≤–∏—Ç—å, –Ω–∞–ø—Ä–∏–º–µ—Ä, —Ç–∞–π–º–∞—É—Ç —É–¥–µ—Ä–∂–∞–Ω–∏—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ. –ö—Å—Ç–∞—Ç–∏, –º–æ–∂–Ω–æ —Ä–∞—Å—à–∏—Ä–∏—Ç—å /close_dry ‚Äì —Å–¥–µ–ª–∞—Ç—å –±–µ–∑ —Å–∏–º–≤–æ–ª–∞, —á—Ç–æ–±—ã –æ–Ω–∞ –∑–∞–∫—Ä—ã–≤–∞–ª–∞ –≤—Å–µ –æ—Ç–∫—Ä—ã—Ç—ã–µ DRY-–ø–æ–∑–∏—Ü–∏–∏ —Ä–∞–∑–æ–º. –°–µ–π—á–∞—Å open_positions_count –≤ DRY_RUN —Å–∫–æ—Ä–µ–µ –º–µ—à–∞–µ—Ç, –ø–æ—ç—Ç–æ–º—É –ø—Ä–æ—â–µ –ø—Ä–∏ DRY_RUN=True –Ω–µ —É—á–∏—Ç—ã–≤–∞—Ç—å –µ–≥–æ –≤ process_symbol (–ø—Ä–æ–ø—É—Å–∫–∞—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –ª–∏–º–∏—Ç–∞ –∏ –Ω–µ –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –≤—Ö–æ–¥–µ). –≠—Ç–æ –Ω–µ –ø–æ–≤–ª–∏—è–µ—Ç –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π —Ä–µ–∂–∏–º, –Ω–æ –∏–∑–±–∞–≤–∏—Ç –æ—Ç –ª–æ–∂–Ω—ã—Ö –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –≤ —Ç–µ—Å—Ç–∞—Ö.
–£–ø—Ä–æ—â–µ–Ω–∏–µ —Ö—Ä–∞–Ω–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –º–µ—Ç–æ–∫ —Å–¥–µ–ª–æ–∫: –û–±—ä–µ–¥–∏–Ω–∏—Ç—å last_trade_times –∏ trade_manager —Ö–æ—Ç—è –±—ã —á–∞—Å—Ç–∏—á–Ω–æ. –ù–∞–ø—Ä–∏–º–µ—Ä, –º–æ–∂–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å –≤ trade_manager.\_trades[symbol] –ø–æ–ª—è last_entry_time –∏ last_close_time. –¢–æ–≥–¥–∞ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –º–æ–∂–µ—Ç —á–∏—Ç–∞—Ç—å –∏—Ö —á–µ—Ä–µ–∑ –æ–±—â–∏–µ –º–µ—Ç–æ–¥—ã –∏ —É–¥–∞–ª–∏—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –¥–µ—Ä–∂–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å–ª–æ–≤–∞—Ä—å —Å lock. –ú–µ–Ω—å—à–µ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π ‚Äì –º–µ–Ω—å—à–µ —Ä–∏—Å–∫–∞ –∑–∞–±—ã—Ç—å –∏—Ö –æ–±–Ω–æ–≤–∏—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ. –í –Ω—ã–Ω–µ—à–Ω–µ–º –≤–∏–¥–µ —ç—Ç–æ –Ω–µ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –±–∞–≥–∞–º, –Ω–æ –µ—Å—Ç—å –∏–∑–±—ã—Ç–æ—á–Ω–æ—Å—Ç—å: –Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Å–¥–µ–ª–∫–∏ last_trade_times –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è‚Äã
file-h6xu4badmdq3fnguzlxbzt
, –∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤—Ä–µ–º–µ–Ω–∏ –≤—Ö–æ–¥–∞ —Ö—Ä–∞–Ω–∏—Ç—Å—è –µ—â–µ –∏ –∫–æ—Å–≤–µ–Ω–Ω–æ (—á–µ—Ä–µ–∑ start_time –≤ trade_data –≤–Ω—É—Ç—Ä–∏ trade_manager). –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ trade_manager –≤–æ –≤—Å–µ—Ö –º–µ—Å—Ç–∞—Ö.
–ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø–æ—Ç–æ–∫–æ–≤: –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –±–æ–ª–µ–µ –º—è–≥–∫–∏–π —Å–ø–æ—Å–æ–± –æ—Å—Ç–∞–Ω–æ–≤–∫–∏, —á–µ–º os.\_exit. –ù–∞–ø—Ä–∏–º–µ—Ä, —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–µ–∫–∏–π –≥–ª–æ–±–∞–ª—å–Ω—ã–π —Ñ–ª–∞–≥ SHUTDOWN=True –∏ –≤ –∫–∞–∂–¥–æ–º —Ñ–æ–Ω–æ–≤–æ–π —Ü–∏–∫–ª–µ (report_loops, rotation, monitor) –¥–µ–ª–∞—Ç—å break –ø—Ä–∏ –µ–≥–æ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏. –¢–æ–≥–¥–∞ –ø—Ä–∏ /shutdown –æ—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –¥–æ–∂–¥–µ—Ç—Å—è –∑–∞–∫—Ä—ã—Ç–∏—è –ø–æ–∑–∏—Ü–∏–π, —É—Å—Ç–∞–Ω–æ–≤–∏—Ç SHUTDOWN, –∏ –≤—Å–µ –ø–æ—Ç–æ–∫–∏ –∞–∫–∫—É—Ä–∞—Ç–Ω–æ –≤—ã–π–¥—É—Ç. –í –∫–æ–Ω—Ü–µ main.py –º–æ–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ sys.exit(0) –≤—ã–∑–≤–∞—Ç—å, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø–æ—Ç–æ–∫–æ–≤. –•–æ—Ç—è os.\_exit —Ä–∞–±–æ—Ç–∞–µ—Ç, –æ–Ω –º–æ–∂–µ—Ç –∑–∞—Ç—Ä—É–¥–Ω–∏—Ç—å —Ä–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å (–Ω–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –≤ –±—É–¥—É—â–µ–º –Ω—É–∂–Ω–æ –≤—ã–ø–æ–ª–Ω—è—Ç—å –∫–∞–∫–∏–µ-—Ç–æ –¥–µ–π—Å—Ç–≤–∏—è –ø—Ä–∏ —à—Ç–∞—Ç–Ω–æ–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏, –æ–Ω–∏ –Ω–µ –≤—ã–ø–æ–ª–Ω—è—Ç—Å—è).
–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –≤—ã–±–æ—Ä–∞ –ø–∞—Ä: –ï—Å–ª–∏ fetch_all_symbols –Ω–∞—á–∏–Ω–∞–µ—Ç —Å—ä–µ–¥–∞—Ç—å –º–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –∏–ª–∏ API-–ª–∏–º–∏—Ç–æ–≤, —Å—Ç–æ–∏—Ç –≤–Ω–µ–¥—Ä–∏—Ç—å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ. –ù–∞–ø—Ä–∏–º–µ—Ä, –æ–±–Ω–æ–≤–ª—è—Ç—å —Å–ø–∏—Å–æ–∫ —Ä—ã–Ω–∫–æ–≤ –Ω–µ –∫–∞–∂–¥—ã–π —á–∞—Å —Å –Ω—É–ª—è, –∞ –ø–æ–ª—É—á–∞—Ç—å —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è (—É Binance/CCXT –∏–Ω–æ–≥–¥–∞ –µ—Å—Ç—å –º–µ—Ç–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ä—ã–Ω–∫–æ–≤). –õ–∏–±–æ —Ö–æ—Ç—è –±—ã —É–º–µ–Ω—å—à–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–∏–º–≤–æ–ª–æ–≤, –ø–æ –∫–æ—Ç–æ—Ä—ã–º —Å–æ–±–∏—Ä–∞—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ –¥–ª—è –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏ ‚Äì —Å–µ–π—á–∞—Å –±–µ—Ä–µ—Ç—Å—è —Ç–æ–ø-30. –ú–æ–∂–Ω–æ –±—Ä–∞—Ç—å —Ç–æ–ø-50 –ø–æ –æ–±—ä–µ–º–∞–º, –∞ –∏–∑ –Ω–∏—Ö –≤—ã–±–∏—Ä–∞—Ç—å 30 –ø–æ –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏, –∏–∑–±–µ–≥–∞—è –ª–∏—à–Ω–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤. –¢–∞–∫–∂–µ, calculate_volatility –º–æ–∂–Ω–æ –≤—ã–Ω–µ—Å—Ç–∏ –æ—Ç–¥–µ–ª—å–Ω–æ (–≤ –∫–æ–¥–µ –Ω–µ –ø–æ–∫–∞–∑–∞–Ω, –≤–µ—Ä–æ—è—Ç–Ω–æ —Å—á–∏—Ç–∞–µ—Ç —á—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ ATR% –∑–∞ –ø–µ—Ä–∏–æ–¥), –µ–≥–æ –º–æ–∂–Ω–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å, —á—Ç–æ–±—ã –Ω–µ –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞—Ç—å –Ω–∞ –∫–∞–∂–¥—É—é –∏—Ç–µ—Ä–∞—Ü–∏—é —Ü–∏–∫–ª–∞.
–õ–æ–≥–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è: –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—Å–µ –≤–∞–∂–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è –ø–æ–∫—Ä—ã—Ç—ã. –ù–∞–ø—Ä–∏–º–µ—Ä, —Å–µ–π—á–∞—Å –ø—Ä–∏ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–∏ TP1 –∏ –ø–æ—Å–ª–µ–¥—É—é—â–µ–º –∑–∞–∫—Ä—ã—Ç–∏–∏ –ø–æ SL –±–æ—Ç –æ—Ç–º–µ—Ç–∏—Ç –≤ CSV TP1 Hit = True –∏ Result = LOSS (–µ—Å–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ) ‚Äì —Å—Ç–æ–∏—Ç –ª–∏ –ø—Ä–∏—Å–ª–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ, —á—Ç–æ —Ö–æ—Ç—è TP1 –¥–æ—Å—Ç–∏–≥–Ω—É—Ç, —Å–¥–µ–ª–∫–∞ –∑–∞–∫—Ä—ã–ª–∞—Å—å –ø–æ —Å—Ç–æ–ø—É? –í–æ–∑–º–æ–∂–Ω–æ, –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –æ –∑–∞–∫—Ä—ã—Ç–∏–∏ —Å –ø–æ–º–µ—Ç–∫–æ–π. –ù–æ —Ç–∞–∫–∏–µ –Ω—é–∞–Ω—Å—ã —Å—Ç–æ–∏—Ç –ø—Ä–æ–¥—É–º–∞—Ç—å —Å —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å –¥–µ–π—Å—Ç–≤–∏–π –±–æ—Ç–∞ ‚Äì –∫–ª—é—á –∫ –¥–æ–≤–µ—Ä–∏—é. –ù–∞–ø—Ä–∏–º–µ—Ä, –º–æ–∂–Ω–æ –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏ –æ –∑–∞–∫—Ä—ã—Ç–∏–∏ —É–∫–∞–∑—ã–≤–∞—Ç—å, —Å–∫–æ–ª—å–∫–æ –¥–æ–ª–µ–π –ø–æ–∑–∏—Ü–∏–∏ –∑–∞–∫—Ä—ã—Ç–æ –Ω–∞ –∫–∞–∫–∏—Ö —É—Ä–æ–≤–Ω—è—Ö (—Ö–æ—Ç—è –±—ã ‚ÄúTP1 hit: yes/no‚Äù).
–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ—à–∏–±–æ–∫: –¥–æ–±–∞–≤–∏—Ç—å timeout –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞ IP, –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–ª–æ –∏—Å–∫–ª—é—á–µ–Ω–∏—è –ø—Ä–∏ –ø—Ä–æ–≤–∞–ª–∞—Ö API (—Å–µ–π—á–∞—Å –º–Ω–æ–≥–æ –≥–¥–µ –ø—Ä–æ—Å—Ç–æ log(..., level="ERROR") –≤—ã–≤–æ–¥–∏—Ç e, —ç—Ç–æ–≥–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ, –Ω–æ –º–æ–∂–Ω–æ –∫–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å —Ç–∏–ø –æ—à–∏–±–æ–∫ ‚Äì —Å–µ—Ç—å, –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∏ —Ç.–¥.). –ú–æ–∂–Ω–æ —Ç–∞–∫–∂–µ –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –ø–∞—É–∑—É –ø—Ä–∏ —Å–µ—Ä–∏–∏ –æ—à–∏–±–æ–∫ API (–Ω–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ 5 —Ä–∞–∑ –ø–æ–¥—Ä—è–¥ safe_call_retry –≤–µ—Ä–Ω—É–ª None, –≤–æ–∑–º–æ–∂–Ω–æ, –∫–ª—é—á –Ω–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω ‚Äì —Å—Ç–æ–∏—Ç –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±–æ—Ç). –¢–∞–∫–∏—Ö —Å–∏—Ç—É–∞—Ü–∏–π –º–∞–ª–æ–≤–µ—Ä–æ—è—Ç–Ω–æ, –Ω–æ –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å.
–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ –∫–æ–Ω—Ñ–∏–≥: –û–±–Ω–æ–≤–∏—Ç—å README/–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –ø–æ–¥ —Ä–µ–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π (–æ—Ç–º–µ—Ç–∏—Ç—å, —á—Ç–æ Smart Re-entry –∏ Soft Exit —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã). –ö—Ä–æ–º–µ —Ç–æ–≥–æ, —Ä–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫—É –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –≤ config.py. –°–µ–π—á–∞—Å —Ñ–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ —Å–æ–¥–µ—Ä–∂–∏—Ç –¥–µ—Å—è—Ç–∫–∏ –∫–æ–Ω—Å—Ç–∞–Ω—Ç. –î–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –º–æ–∂–Ω–æ —Ä–∞–∑–¥–µ–ª–∏—Ç—å –Ω–∞ —Å–µ–∫—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–ª–æ–≤–∞—Ä–∏ –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏): Risk management, Strategy filters, Features toggles, API keys, etc. –≠—Ç–æ –ø–æ–º–æ–∂–µ—Ç –Ω–æ–≤—ã–º —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º –±—ã—Å—Ç—Ä–µ–µ –ø–æ–Ω–∏–º–∞—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏. –¢–∞–∫–∂–µ –ø–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è –∑–Ω–∞—á–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, 30 –º–∏–Ω—É—Ç cooldown —Ñ–∏–≥—É—Ä–∏—Ä—É–µ—Ç –∏ –≤ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏, –∏ –≤ ip_monitor –≤ –¥—Ä—É–≥–æ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ) ‚Äì –≤—ã–Ω–µ—Å—Ç–∏ –≤ –∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã.
–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π: –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Å—Ç–∏ —Ç—â–∞—Ç–µ–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–ª–æ–∫–æ–≤ Smart Re-entry –∏ Soft Exit –Ω–∞ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ –≤ sandbox. –û—Å–æ–±–µ–Ω–Ω–æ Smart Re-entry ‚Äì —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –æ–Ω –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –ø–æ–≤—ã—à–∞–µ—Ç –ø—Ä–∏–±—ã–ª—å, –∞ –Ω–µ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –ª–∏—à–Ω–∏–º –ø–µ—Ä–µ—Ç—Ä–µ–π–¥–∞–º. –ü–æ—Ä–æ–≥ score > 4 –≤ —É—Å–ª–æ–≤–∏—è—Ö cooldown –≤—ã–≥–ª—è–¥–∏—Ç —Ä–∞–∑—É–º–Ω–æ, –Ω–æ, –≤–æ–∑–º–æ–∂–Ω–æ, —Å—Ç–æ–∏—Ç —Å–¥–µ–ª–∞—Ç—å –µ–≥–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–º –≤ –∫–æ–Ω—Ñ–∏–≥–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, REENTRY_SCORE_THRESHOLD = 4). –¢–æ –∂–µ –∫–∞—Å–∞–µ—Ç—Å—è —Ä–∞–∑–Ω–∏—Ü—ã 1.5 –¥–ª—è re-entry –ø–æ—Å–ª–µ –∑–∞–∫—Ä—ã—Ç–∏—è ‚Äì —ç—Ç–∏ —á–∏—Å–ª–∞ –ª—É—á—à–µ –ø—Ä–æ–≤–µ—Ä—è—Ç—å —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω–æ. –í–æ–∑–º–æ–∂–Ω–æ, –∏–º–µ–µ—Ç —Å–º—ã—Å–ª –¥–æ–±–∞–≤–∏—Ç—å –≤ Telegram –∫–æ–º–∞–Ω–¥—É, –ø–æ–∑–≤–æ–ª—è—é—â—É—é –≤–∫–ª—é—á–∞—Ç—å/–≤—ã–∫–ª—é—á–∞—Ç—å Smart Switch –∏ Re-entry –Ω–∞ –ª–µ—Ç—É, —á—Ç–æ–±—ã –æ–ø–µ—Ä–∞—Ç–æ—Ä –º–æ–≥ –≥–∏–±–∫–æ —É–ø—Ä–∞–≤–ª—è—Ç—å –∞–≥—Ä–µ—Å—Å–∏–≤–Ω–æ—Å—Ç—å—é —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏.
–†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å: –ï—Å–ª–∏ –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ —Å–∏–≥–Ω–∞–ª–æ–≤ –∏–ª–∏ –ª–æ–≥–∏–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, Open Interest, REST API, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–º–µ—á–µ–Ω—ã –∫–∞–∫ –Ω–µ –Ω–∞—á–∞—Ç—ã–µ –≤ –ø–ª–∞–Ω–µ), —Ç–µ–∫—É—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç —ç—Ç–æ –¥–æ–≤–æ–ª—å–Ω–æ –ª–µ–≥–∫–æ. –¢–µ–º –Ω–µ –º–µ–Ω–µ–µ, –Ω—É–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø—Ä–∏–Ω—Ü–∏–ø –º–æ–¥—É–ª—å–Ω–æ—Å—Ç–∏: –≤—ã–Ω–æ—Å–∏—Ç—å –Ω–æ–≤—É—é –ª–æ–≥–∏–∫—É –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –º–æ–¥—É–ª–∏/–∫–ª–∞—Å—Å—ã. –ù–∞–ø—Ä–∏–º–µ—Ä, –ª–æ–≥–∏–∫—É Open Interest ‚Äì –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–π –º–æ–¥—É–ª—å, –∫–æ—Ç–æ—Ä—ã–π –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è –≤ strategy.should_enter_trade (—á–µ—Ä–µ–∑ –¥–æ–ø. —Ñ–∏–ª—å—Ç—Ä). –í –±—É–¥—É—â–µ–º, –≤–æ–∑–º–æ–∂–Ω–æ, —Å—Ç–æ–∏—Ç —Ä–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –æ–±—ä–µ–∫—Ç–Ω–æ-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—É—é –º–æ–¥–µ–ª—å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è–º–∏ ‚Äì —Å–µ–π—á–∞—Å –º–Ω–æ–≥–æ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä—ã–µ —Å–ª–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å, –µ—Å–ª–∏ –±—É–¥–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π. –ù–æ –ø–æ–∫–∞ –ø—Ä–æ–µ–∫—Ç —Ä–∞—Å—Å—á–∏—Ç–∞–Ω –Ω–∞ –æ–¥–Ω—É —Å—Ç—Ä–∞—Ç–µ–≥–∏—é, —ç—Ç–æ –Ω–µ –º–µ—à–∞–µ—Ç.
–í —Ü–µ–ª–æ–º, —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ —Å–≤–æ–¥—è—Ç—Å—è –∫ —É–ª—É—á—à–µ–Ω–∏—é –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç–∏ –∏ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏. –ò—Å–ø—Ä–∞–≤–∏–≤ –º–µ–ª–∫–∏–µ –±–∞–≥–∏ —Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∏ —É—á—ë—Ç–æ–º —á–∞—Å—Ç–∏—á–Ω—ã—Ö –≤—ã—Ö–æ–¥–æ–≤, –≤—ã –ø–æ–≤—ã—Å–∏—Ç–µ —Ç–æ—á–Ω–æ—Å—Ç—å –æ—Ç—á—ë—Ç–æ–≤. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ (–æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä, —á—É—Ç—å –±–æ–ª–µ–µ –∞–∫–∫—É—Ä–∞—Ç–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ) —Å–¥–µ–ª–∞—é—Ç –∫–æ–¥base –±–æ–ª–µ–µ —á–∏—Å—Ç—ã–º, –æ—Å–æ–±–µ–Ω–Ω–æ –ø–µ—Ä–µ–¥ –¥–∞–ª—å–Ω–µ–π—à–∏–º —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞.
