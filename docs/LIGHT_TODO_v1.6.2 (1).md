# BinanceBot ‚Äî LIGHT TODO v1.6.3-next [Priority 0: –£—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å]

–≠—Ç–æ –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á –¥–ª—è —Ñ–∞–∑—ã Priority 0, –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–π –Ω–∞ –ø–æ–≤—ã—à–µ–Ω–∏–µ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏ –±–æ—Ç–∞ –ø–µ—Ä–µ–¥ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏.

---

## Priority 0 ‚Äî –£—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å (–°—Ç–∞–±–∏–ª–∏–∑–∏—Ä—É—é—â–∏–π –±–ª–æ–∫) ‚úÖ

### 1. –í–Ω–µ–¥—Ä–∏—Ç—å safe_call_retry

- **–¶–µ–ª—å:** –£–≤–µ–ª–∏—á–∏—Ç—å —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –≤—ã–∑–æ–≤–æ–≤ Binance API –∫ –≤—Ä–µ–º–µ–Ω–Ω—ã–º —Å–±–æ—è–º.
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –§—É–Ω–∫—Ü–∏—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –≤ `utils_core.py` –∏ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ –≤:
  - `trade_engine.py` (fetch_ticker, create_limit_order, create_order, fetch_ohlcv)
  - `strategy.py` (fetch_data)
  - `pair_selector.py` (load_markets, fetch_ohlcv)
  - `binance_api.py` (fetch_balance, fetch_ticker –∏ —Ç.–¥.)

### 2. –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏—è last_trade_info —á–µ—Ä–µ–∑ TradeInfoManager

- **–¶–µ–ª—å:** –ò—Å–∫–ª—é—á–∏—Ç—å race conditions –ø—Ä–∏ –¥–æ—Å—Ç—É–ø–µ –∫ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å–¥–µ–ª–∫–∞—Ö.
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –°–æ–∑–¥–∞–Ω –∫–ª–∞—Å—Å TradeInfoManager –≤ `trade_engine.py` —Å –º–µ—Ç–æ–¥–∞–º–∏ `add_trade`, `get_trade`, `update_trade` –∏ `remove_trade`. –í—Å–µ –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ last_trade_info –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ –≤—ã–∑–æ–≤—ã —á–µ—Ä–µ–∑ trade_manager.

### 3. –ê–¥–∞–ø—Ç–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤ polling (DRY_RUN vs REAL_RUN)

- **–¶–µ–ª—å:** –°–Ω–∏–∑–∏—Ç—å –Ω–∞–≥—Ä—É–∑–∫—É –∏ —à—É–º –≤ –ª–æ–≥–∞—Ö –ø—Ä–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏.
- **–°—Ç–∞—Ç—É—Å:**
  - `telegram_handler.py`: –∑–∞–¥–µ—Ä–∂–∫–∞ –æ–ø—Ä–æ—Å–∞ –∏–∑–º–µ–Ω–µ–Ω–∞ –Ω–∞ `time.sleep(60 if DRY_RUN else 3)`.
  - `ip_monitor.py`: –∏–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫–∏ IP –≤—ã—Å—Ç–∞–≤–ª–µ–Ω –Ω–∞ `check_interval = 120 if DRY_RUN else 30 * 60`.
- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ: –í engine_controller.py –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã –¥–ª—è –ª–æ–≥–æ–≤ ¬´Checking {symbol}¬ª –∏ ¬´Balance for cycle¬ª (–Ω–µ —á–∞—â–µ 5 –º–∏–Ω—É—Ç).

---

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### Priority 1 ‚Äî –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –≤—Ö–æ–¥–∞ –∏ —Å–æ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏—è

- **‚ôªÔ∏è Smart Re-entry Logic:** –í–Ω–µ–¥—Ä–µ–Ω–∏–µ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –≤—Ö–æ–¥–∞ –ø–æ —Ç–æ–π –∂–µ –ø–∞—Ä–µ –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º —Å–∏–ª—å–Ω–æ–º —Å–∏–≥–Ω–∞–ª–µ (—Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º cooldown –∏ score).
- **üîÑ Soft Exit / Partial TP Optimization:** –ò–¥–µ—è –∞–¥–∞–ø—Ç–∏–≤–Ω–æ–≥–æ –≤—ã—Ö–æ–¥–∞, –µ—Å–ª–∏ TP1 –ø–æ—á—Ç–∏ –¥–æ—Å—Ç–∏–≥–Ω—É—Ç.
- **üìä Auto TP/SL based on market regime:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ TP/SL –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä—ã–Ω–æ—á–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞ (flat vs trending).

### Priority 2 ‚Äî –£–ª—É—á—à–µ–Ω–∏—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–æ–≥–æ —è–¥—Ä–∞

- –ü–µ—Ä–µ–¥–∞—á–∞ relax_factor –≤ score_evaluator.py, —É–ª—É—á—à–µ–Ω–∏–µ calculate_score() –∏ –∞–Ω–∞–ª–∏–∑ –æ—Ç–∫–∞–∑–æ–≤ —Å–¥–µ–ª–æ–∫.

### Priority 3 ‚Äî UI, –æ—Ç–ª–∞–¥–∫–∞ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –í–≤–µ–¥–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã `/errors`, —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ `/summary`, –≤—ã–≤–æ–¥ —Ç–µ–∫—É—â–µ–π –∞–≥—Ä–µ—Å—Å–∏–≤–Ω–æ—Å—Ç–∏ –∏ –ø—Ä–æ—á–µ–µ.

### Maintenance / Housekeeping

- –£–¥–∞–ª–µ–Ω–∏–µ —É—Å—Ç–∞—Ä–µ–≤—à–µ–≥–æ LIGHT_TODO_v1.6.2.md –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ README/SUMMARY.md.

---

**–ò—Ç–æ–≥:** Priority 0 –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–≤–µ—Ä—à–µ–Ω–∞. –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ –∏ —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏ (safe_call_retry, TradeInfoManager, –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã polling, –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è) –≤–Ω–µ–¥—Ä–µ–Ω—ã –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã.

---

–ß—Ç–æ –¥–∞–ª—å—à–µ?
–ü—Ä–µ–¥–ª–∞–≥–∞—é –ø–µ—Ä–µ–π—Ç–∏ –∫ Priority 1: –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ Smart Re-entry Logic. –î–ª—è —ç—Ç–æ–≥–æ –Ω–∞–º –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –æ–±–Ω–æ–≤–∏—Ç—å –ª–æ–≥–∏–∫—É –≤—Ö–æ–¥–∞ –≤ —Å–¥–µ–ª–∫—É (–≤ strategy.py) –∏, –≤–æ–∑–º–æ–∂–Ω–æ, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–¥–µ–ª–∫–∞–º–∏ (–≤ trade_engine.py).

–ï—Å–ª–∏ –≤—Å–µ —É—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç, –º–æ–∂–µ–º –æ—Ç–º–µ—Ç–∏—Ç—å Priority 0 –∫–∞–∫ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω–æ–µ, –∏ —è –≥–æ—Ç–æ–≤ –ø—Ä–æ–¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –∏–ª–∏ –æ–±—Å—É–¥–∏—Ç—å –ø–ª–∞–Ω –¥–ª—è Priority 1.
