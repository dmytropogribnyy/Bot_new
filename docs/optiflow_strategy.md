# üìò OptiFlow Strategy v2.9 ‚Äî –ü–æ–ª–Ω–æ–µ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ (Core + Expansion)

## üéØ –¶–µ–ª—å —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏:

–°–æ–∑–¥–∞—Ç—å —Å—Ç–∞–±–∏–ª—å–Ω—ã–π –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—ã–π –±–æ—Ç-–¥–≤–∏–∂–æ–∫, –ø—Ä–∏–Ω–æ—Å—è—â–∏–π:

-   üíµ \$10‚Äì25/–¥–µ–Ω—å –ø—Ä–∏ –¥–µ–ø–æ–∑–∏—Ç–µ \$220‚Äì500
-   üí∞ \$50‚Äì130/–¥–µ–Ω—å –ø—Ä–∏ \$1000+ —á–µ—Ä–µ–∑ OptiFlow Core
-   ‚ö° \$150‚Äì300/–¥–µ–Ω—å –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ —Å–∫–∞–ª—å–ø–∏–Ω–≥-–º–æ–¥—É–ª–µ–π
-   üöÄ –î–æ \$1000/–¥–µ–Ω—å –ø—Ä–∏ –º—É–ª—å—Ç–∏–±–∏—Ä–∂–µ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ —Å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–º–∏ –±–æ—Ç–∞–º–∏

---

## üõ° Safety Tuning Layer (–∞–∫—Ç—É–∞–ª–µ–Ω –¥–ª—è –≤—Å–µ—Ö —Ä–µ–∂–∏–º–æ–≤: Core –∏ Scalp)

### ‚úÖ 1. –§–∏–ª—å—Ç—Ä—ã –æ–±—ä—ë–º–∞ –∏ ATR (–∞–¥–∞–ø—Ç–∏–≤–Ω—ã–µ)

```python
volume_filter = median_volume * 1.2
atr_filter = median_atr * 0.9
```

–¶–µ–ª—å: –ø—Ä–æ–ø—É—Å–∫–∞—Ç—å –ø–æ–ª–µ–∑–Ω—ã–µ —Å–∏–≥–Ω–∞–ª—ã, –Ω–æ –∏—Å–∫–ª—é—á–∞—Ç—å –º—ë—Ä—Ç–≤—ã–π —Ä—ã–Ω–æ–∫.

### ‚úÖ 2. Anti-reentry: –ø–∞—É–∑–∞ –º–µ–∂–¥—É –≤—Ö–æ–¥–∞–º–∏

```python
min_pause_between_trades = 300  # 5 –º–∏–Ω—É—Ç
```

–¶–µ–ª—å: –Ω–µ –≤—Ö–æ–¥–∏—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω–æ –ø–æ —Ç–æ–π –∂–µ –ø–∞—Ä–µ –≤–æ —Ñ–ª–µ—Ç–µ –∏–ª–∏ –æ—Ç–∫–∞—Ç–µ.

### ‚úÖ 3. Auto-pause –ø–æ—Å–ª–µ —Å–µ—Ä–∏–∏ –ª–æ—Å—Å–æ–≤

```python
if last_3_results == ['loss', 'loss', 'loss']:
    pause_trading(symbol, duration=900)  # 15 –º–∏–Ω—É—Ç
```

–¶–µ–ª—å: –≤—Ä–µ–º–µ–Ω–Ω–æ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å —Å–∏–º–≤–æ–ª –ø–æ—Å–ª–µ —Å–µ—Ä–∏–∏ –Ω–µ—É–¥–∞—á.

### ‚úÖ 4. Daily Max Loss (–∞–Ω—Ç–∏-—Å–ª–∏–≤)

```python
if daily_pnl < -5:
    pause_all_trading(duration=3600)  # —Å—Ç–æ–ø –Ω–∞ 1 —á–∞—Å
```

–¶–µ–ª—å: –µ—Å–ª–∏ –¥–Ω–µ–≤–Ω–æ–π —É–±—ã—Ç–æ–∫ –ø—Ä–µ–≤—ã—à–µ–Ω ‚Äî —Å—Ç–æ–ø –≤—Å–µ–π —Ç–æ—Ä–≥–æ–≤–ª–∏.

### ‚úÖ 5. Max trades per hour (–∞–Ω—Ç–∏-HFT-–ø–µ—Ä–µ–≥—Ä–µ–≤)

```python
max_trades_per_hour = 6
```

–¶–µ–ª—å: –Ω–µ –¥–æ–ø—É—Å—Ç–∏—Ç—å –≥–∏–ø–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –≤ –±–æ–∫–æ–≤–∏–∫–µ –∏–ª–∏ –ø–∞–º–ø–µ.

üìå –≠—Ç–∏ –±–ª–æ–∫–∏ –≤—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –≤ runtime-–ª–æ–≥–∏–∫—É (monitor_active_position, signal_utils, risk_guard).
üìà –†–µ–∑—É–ª—å—Ç–∞—Ç ‚Äî —Å–ø–æ–∫–æ–π–Ω—ã–π –∏ –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –±–æ—Ç –¥–∞–∂–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–µ–Ω—å–≥–∞—Ö —Å \$300‚Äì700.

---

## üîÅ OptiFlow Core Bot (v2.9 Final)

...

## Additional block

# üìò OptiFlow Strategy v2.9 ‚Äî –ü–æ–ª–Ω–æ–µ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ (Core + Expansion)

## üéØ –¶–µ–ª—å —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏:

–°–æ–∑–¥–∞—Ç—å —Å—Ç–∞–±–∏–ª—å–Ω—ã–π –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—ã–π –±–æ—Ç-–¥–≤–∏–∂–æ–∫, –ø—Ä–∏–Ω–æ—Å—è—â–∏–π:

-   üíµ \$10‚Äì25/–¥–µ–Ω—å –ø—Ä–∏ –¥–µ–ø–æ–∑–∏—Ç–µ \$220‚Äì500
-   üí∞ \$50‚Äì130/–¥–µ–Ω—å –ø—Ä–∏ \$1000+ —á–µ—Ä–µ–∑ OptiFlow Core
-   ‚ö° \$150‚Äì300/–¥–µ–Ω—å –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ —Å–∫–∞–ª—å–ø–∏–Ω–≥-–º–æ–¥—É–ª–µ–π
-   üöÄ –î–æ \$1000/–¥–µ–Ω—å –ø—Ä–∏ –º—É–ª—å—Ç–∏–±–∏—Ä–∂–µ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ —Å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–º–∏ –±–æ—Ç–∞–º–∏

---

## üõ° Safety Tuning Layer (–∞–∫—Ç—É–∞–ª–µ–Ω –¥–ª—è –≤—Å–µ—Ö —Ä–µ–∂–∏–º–æ–≤: Core –∏ Scalp)

### ‚úÖ 1. –§–∏–ª—å—Ç—Ä—ã –æ–±—ä—ë–º–∞ –∏ ATR (–∞–¥–∞–ø—Ç–∏–≤–Ω—ã–µ)

```python
volume_filter = median_volume * 1.2
atr_filter = median_atr * 0.9
```

–¶–µ–ª—å: –ø—Ä–æ–ø—É—Å–∫–∞—Ç—å –ø–æ–ª–µ–∑–Ω—ã–µ —Å–∏–≥–Ω–∞–ª—ã, –Ω–æ –∏—Å–∫–ª—é—á–∞—Ç—å –º—ë—Ä—Ç–≤—ã–π —Ä—ã–Ω–æ–∫.

### ‚úÖ 2. Anti-reentry: –ø–∞—É–∑–∞ –º–µ–∂–¥—É –≤—Ö–æ–¥–∞–º–∏

```python
min_pause_between_trades = 300  # 5 –º–∏–Ω—É—Ç
```

–¶–µ–ª—å: –Ω–µ –≤—Ö–æ–¥–∏—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω–æ –ø–æ —Ç–æ–π –∂–µ –ø–∞—Ä–µ –≤–æ —Ñ–ª–µ—Ç–µ –∏–ª–∏ –æ—Ç–∫–∞—Ç–µ.

### ‚úÖ 3. Auto-pause –ø–æ—Å–ª–µ —Å–µ—Ä–∏–∏ –ª–æ—Å—Å–æ–≤

```python
if last_3_results == ['loss', 'loss', 'loss']:
    pause_trading(symbol, duration=900)  # 15 –º–∏–Ω—É—Ç
```

–¶–µ–ª—å: –≤—Ä–µ–º–µ–Ω–Ω–æ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å —Å–∏–º–≤–æ–ª –ø–æ—Å–ª–µ —Å–µ—Ä–∏–∏ –Ω–µ—É–¥–∞—á.

### ‚úÖ 4. Daily Max Loss (–∞–Ω—Ç–∏-—Å–ª–∏–≤)

```python
if daily_pnl < -5:
    pause_all_trading(duration=3600)  # —Å—Ç–æ–ø –Ω–∞ 1 —á–∞—Å
```

–¶–µ–ª—å: –µ—Å–ª–∏ –¥–Ω–µ–≤–Ω–æ–π —É–±—ã—Ç–æ–∫ –ø—Ä–µ–≤—ã—à–µ–Ω ‚Äî —Å—Ç–æ–ø –≤—Å–µ–π —Ç–æ—Ä–≥–æ–≤–ª–∏.

### ‚úÖ 5. Max trades per hour (–∞–Ω—Ç–∏-HFT-–ø–µ—Ä–µ–≥—Ä–µ–≤)

```python
max_trades_per_hour = 6
```

–¶–µ–ª—å: –Ω–µ –¥–æ–ø—É—Å—Ç–∏—Ç—å –≥–∏–ø–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –≤ –±–æ–∫–æ–≤–∏–∫–µ –∏–ª–∏ –ø–∞–º–ø–µ.

üìå –≠—Ç–∏ –±–ª–æ–∫–∏ –≤—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –≤ runtime-–ª–æ–≥–∏–∫—É (monitor_active_position, signal_utils, risk_guard).
üìà –†–µ–∑—É–ª—å—Ç–∞—Ç ‚Äî —Å–ø–æ–∫–æ–π–Ω—ã–π –∏ –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –±–æ—Ç –¥–∞–∂–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–µ–Ω—å–≥–∞—Ö —Å \$300‚Äì700.

---

## üîÅ OptiFlow Core Bot (v2.9 Final)

...

## Signal implemenation explanation

# üìò OptiFlow Strategy v2.9 ‚Äî –ü–æ–ª–Ω–æ–µ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ (Core + Expansion)

## üéØ –¶–µ–ª—å —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏:

–°–æ–∑–¥–∞—Ç—å —Å—Ç–∞–±–∏–ª—å–Ω—ã–π –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—ã–π –±–æ—Ç-–¥–≤–∏–∂–æ–∫, –ø—Ä–∏–Ω–æ—Å—è—â–∏–π:

-   üíµ \$10‚Äì25/–¥–µ–Ω—å –ø—Ä–∏ –¥–µ–ø–æ–∑–∏—Ç–µ \$220‚Äì500
-   üí∞ \$50‚Äì130/–¥–µ–Ω—å –ø—Ä–∏ \$1000+ —á–µ—Ä–µ–∑ OptiFlow Core
-   ‚ö° \$150‚Äì300/–¥–µ–Ω—å –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ —Å–∫–∞–ª—å–ø–∏–Ω–≥-–º–æ–¥—É–ª–µ–π
-   üöÄ –î–æ \$1000/–¥–µ–Ω—å –ø—Ä–∏ –º—É–ª—å—Ç–∏–±–∏—Ä–∂–µ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ —Å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–º–∏ –±–æ—Ç–∞–º–∏

---

## üõ° Safety Tuning Layer (–∞–∫—Ç—É–∞–ª–µ–Ω –¥–ª—è –≤—Å–µ—Ö —Ä–µ–∂–∏–º–æ–≤: Core –∏ Scalp)

### ‚úÖ 1. –§–∏–ª—å—Ç—Ä—ã –æ–±—ä—ë–º–∞ –∏ ATR (–∞–¥–∞–ø—Ç–∏–≤–Ω—ã–µ)

```python
volume_filter = median_volume * 1.2
atr_filter = median_atr * 0.9
```

### ‚úÖ 2. Anti-reentry: –ø–∞—É–∑–∞ –º–µ–∂–¥—É –≤—Ö–æ–¥–∞–º–∏

```python
min_pause_between_trades = 300  # 5 –º–∏–Ω—É—Ç
```

### ‚úÖ 3. Auto-pause –ø–æ—Å–ª–µ —Å–µ—Ä–∏–∏ –ª–æ—Å—Å–æ–≤

```python
if last_3_results == ['loss', 'loss', 'loss']:
    pause_trading(symbol, duration=900)
```

### ‚úÖ 4. Daily Max Loss (–∞–Ω—Ç–∏-—Å–ª–∏–≤)

```python
if daily_pnl < -5:
    pause_all_trading(duration=3600)
```

### ‚úÖ 5. Max trades per hour (–∞–Ω—Ç–∏-HFT-–ø–µ—Ä–µ–≥—Ä–µ–≤)

```python
max_trades_per_hour = 6
```

---

## üîç –°–∏–≥–Ω–∞–ª—å–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è: –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –∫–æ–≥–¥–∞ –¥–∞—ë—Ç –≤—Ö–æ–¥

–°–∏–≥–Ω–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤—Å–µ–º–∏ –±–æ—Ç–∞–º–∏ (Core + Scalp) –∏ –≤–∫–ª—é—á–∞–µ—Ç:

### üîπ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏–≥–Ω–∞–ª–∞:

-   `MACD`: –æ—Å–Ω–æ–≤–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è
-   `EMA_CROSS`: –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∏–º–ø—É–ª—å—Å–∞
-   `RSI_15m`: —Å–∏–ª–∞ —Ç–µ–∫—É—â–µ–≥–æ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è (–ø–æ runtime –ø–æ—Ä–æ–≥—É)
-   `Volume`, `PriceAction`, `HTF`: –≤—Ç–æ—Ä–∏—á–Ω—ã–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è

### üîπ –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

```python
if macd > macd_signal and ema_cross ‚Üí direction = 'buy'
elif macd < macd_signal and not ema_cross ‚Üí 'sell'
```

### üîπ passes_1plus1(): –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –ø–µ—Ä–≤–∏—á–Ω—ã—Ö –∏ –≤—Ç–æ—Ä–∏—á–Ω—ã—Ö –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π

-   –í `soft_mode`: –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ PRIMARY ‚â• 1 (–Ω–∞–ø—Ä–∏–º–µ—Ä, MACD)
-   –í `strict_mode`: –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ PRIMARY ‚â• X –∏ SECONDARY ‚â• Y
-   –ó–Ω–∞—á–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ `runtime_config`

### üîπ –§–∏–ª—å—Ç—Ä—ã:

-   `rsi_15m >= threshold`
-   `atr_percent >= atr_threshold_percent`
-   `volume_usdt >= volume_threshold_usdc`
-   `rel_volume_15m >= threshold`

üìå –í—Å—ë –≥–∏–±–∫–æ: –∫–∞–∂–¥—ã–π –±–æ—Ç –º–æ–∂–µ—Ç –∏–º–µ—Ç—å —Å–≤–æ–π `runtime_config.json`, —Å –±–æ–ª–µ–µ –º—è–≥–∫–∏–º–∏ –∏–ª–∏ –∂—ë—Å—Ç–∫–∏–º–∏ —Ñ–∏–ª—å—Ç—Ä–∞–º–∏.

üß† –†–µ–∑—É–ª—å—Ç–∞—Ç: –±–æ—Ç –≤—Ö–æ–¥–∏—Ç —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —á—ë—Ç–∫–æ–º –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–∏ –∏–º–ø—É–ª—å—Å–∞ –∏ –æ–±—ä—ë–º–∞, —Å–∏–≥–Ω–∞–ª = —Ç–æ—á–∫–∞ —Å –≤—ã—Å–æ–∫–æ–π –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å—é –¥–≤–∏–∂–µ–Ω–∏—è.

---

## üîÅ OptiFlow Core Bot (v2.9 Final)

...
