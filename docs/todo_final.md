## ‚úÖ –§–∏–Ω–∞–ª—å–Ω—ã–π TODO –ø–æ —Ç–µ–∫—É—â–µ–º—É 1+1 –±–æ—Ç—É (OptiFlow v2.9 + –ø—Ä–æ–±–ª–µ–º—ã –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∑–∞–ø—É—Å–∫–∞)

# ‚úÖ Final TODO Summary ‚Äî OptiFlow Core v2.9 (UltraClaude Final)

## üîÅ –Ø–¥—Ä–æ —Ç–æ—Ä–≥–æ–≤–ª–∏

| –ó–∞–¥–∞—á–∞                                | –°—Ç–∞—Ç—É—Å | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π                                                             |
| ------------------------------------- | ------ | ----------------------------------------------------------------------- |
| `run_trading_cycle()` –ø–æ—Å–ª–µ –∑–∞–∫—Ä—ã—Ç–∏—è  | ‚úÖ     | –í—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ `safe_close_trade()` –∏ timeout –ª–æ–≥–∏–∫–∏                  |
| –£–º–Ω—ã–π timeout > 1% PnL = –Ω–µ –∑–∞–∫—Ä—ã–≤–∞–µ–º | ‚úÖ     | `monitor_active_position()` —É—á–∏—Ç—ã–≤–∞–µ—Ç profit –ø—Ä–∏ —Ç–∞–π–º-–∞—É—Ç–µ              |
| –†–µ–∞–∫—Ç–∏–≤–Ω—ã–π re-entry                   | ‚úÖ     | `run_trading_cycle()` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –∑–∞–∫—Ä—ã—Ç–∏—è –ø–æ–∑–∏—Ü–∏–∏, –µ—Å–ª–∏ –µ—Å—Ç—å —Å–ª–æ—Ç |
| –õ–∏–º–∏—Ç –≤—Ö–æ–¥–æ–≤ –≤ —á–∞—Å                    | ‚úÖ     | `is_hourly_limit_reached()` (runtime_stats), –ª–∏–º–∏—Ç 6                    |

---

## ‚öôÔ∏è –ó–∞—â–∏—Ç–Ω—ã–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã

| –ó–∞–¥–∞—á–∞                     | –°—Ç–∞—Ç—É—Å | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π                                                   |
| -------------------------- | ------ | ------------------------------------------------------------- |
| Anti-reentry (5 –º–∏–Ω)       | ‚úÖ     | –ß–µ—Ä–µ–∑ `last_trade_times`, configurable –≤ runtime_config       |
| Auto-pause –ø—Ä–∏ 3 SL –ø–æ–¥—Ä—è–¥ | ‚úÖ     | `pause_symbol(...)` + streak –ª–æ–≥–∏–∫–∞ –≤ `record_trade_result()` |
| Daily PnL stop (-5 USDC)   | ‚úÖ     | `get_today_pnl_from_csv()` + `pause_all_trading()` –Ω–∞ 1 —á     |
| Drawdown-–ø—Ä–æ–≤–µ—Ä–∫–∞          | ‚úÖ     | `check_drawdown_protection()` —Å–Ω–∏–∂–∞–µ—Ç —Ä–∏—Å–∫ –∏–ª–∏ —Å—Ç–∞–≤–∏—Ç –ø–∞—É–∑—É   |
| Capital Utilization        | ‚úÖ     | –õ–∏–º–∏—Ç 80% —á–µ—Ä–µ–∑ `check_capital_utilization(...)`              |
| Max Trades per Hour        | ‚úÖ     | –õ–æ–≥–∏–∫–∞ –≤ `runtime_stats`, `update_trade_count()` + –ª–∏–º–∏—Ç      |

---

## üìä TP/SL –∏ –ª–æ–≥–∏–∫–∞ –≤—ã—Ö–æ–¥–∞

| –ó–∞–¥–∞—á–∞                       | –°—Ç–∞—Ç—É—Å | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π                                                                      |
| ---------------------------- | ------ | -------------------------------------------------------------------------------- |
| TP1/TP2/SL –ø–æ ATR            | ‚úÖ     | `calculate_tp_levels(...)`, —É—á–∏—Ç—ã–≤–∞–µ—Ç `regime`, NaN-–∑–∞—â–∏—Ç—É                       |
| Stepwise TP (+0.10 ‚Üí +0.40)  | ‚úÖ     | `step_profit_levels`, Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è, `step_hits[]`                        |
| AutoProfit > 2.5% –±–µ–∑ TP     | ‚úÖ     | –ó–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏ —Å–∏–ª—å–Ω–æ–π –ø—Ä–∏–±—ã–ª–∏ –±–µ–∑ TP1, —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ `monitor_active_position()` |
| Timeout exit (–µ—Å–ª–∏ PnL < 1%) | ‚úÖ     | –ü–æ –∏—Å—Ç–µ—á–µ–Ω–∏–∏ `max_hold_minutes` –∑–∞–∫—Ä—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –ø—Ä–∏–±—ã–ª—å < 1%               |
| Extended TP                  | ‚úÖ     | TP –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—Å—è –≤—ã—à–µ –ø—Ä–∏ —Å–∏–ª—å–Ω–æ–º —Ä–æ—Å—Ç–µ                                            |
| Partial Exit (40%)           | ‚úÖ     | –ï—Å–ª–∏ —Ä–æ—Å—Ç –æ—Å—Ç–∞–Ω–æ–≤–∏–ª—Å—è ‚Äî —Å–∫–∏–¥—ã–≤–∞–µ—Ç —á–∞—Å—Ç—å –ø–æ–∑–∏—Ü–∏–∏                                  |

---

## üß† –í—Ö–æ–¥ –∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç                  | –°—Ç–∞—Ç—É—Å | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π                                                                       |
| -------------------------- | ------ | --------------------------------------------------------------------------------- |
| `should_enter_trade()`     | ‚úÖ     | –ü–æ–ª–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Å `passes_1plus1`, —Ñ–∏–ª—å—Ç—Ä–∞–º–∏, TP/SL, cooldown, missed_signal –ª–æ–≥–∞–º–∏ |
| `process_symbol(...)`      | ‚úÖ     | –ü—Ä–æ–≤–µ—Ä–∫–∞ notional, qty, margin, min_profit, pause check                           |
| `enter_trade(...)`         | ‚úÖ     | –õ–∏–º–∏—Ç—ã, —Ä–∏—Å–∫, qty, DRY_RUN, TP/SL-–ø–æ—Å—Ç–∞–Ω–æ–≤–∫–∞, Telegram, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ               |
| Anti-spread –∏ min_notional | ‚úÖ     | –í—Å—Ç—Ä–æ–µ–Ω—ã –≤ `process_symbol()` –∏ risk_utils                                        |
| Priority-–ª–æ–≥–∏–∫–∞            | ‚úÖ     | `priority_pairs.json`, `priority_evaluator.py` –∞–∫—Ç—É–∞–ª—å–Ω—ã                          |

---

## üí¨ Telegram-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

| –ö–æ–º–∞–Ω–¥–∞                         | –°—Ç–∞—Ç—É—Å | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π                                       |
| ------------------------------- | ------ | ------------------------------------------------- |
| `/summary`                      | ‚úÖ     | –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –±–∞–ª–∞–Ω—Å—É, –ø–æ–∑–∏—Ü–∏—è–º, pnl              |
| `/runtime`                      | ‚úÖ     | –í—ã–≤–æ–¥ —Ç–µ–∫—É—â–µ–≥–æ runtime_config.json                |
| `/logtail`                      | ‚úÖ     | –ü–æ—Å–ª–µ–¥–Ω–∏–µ —Å—Ç—Ä–æ–∫–∏ main.log                         |
| `/pnl_today`, `/pnl_week`       | ‚úÖ     | PnL –æ—Ç—á—ë—Ç—ã –∏–∑ tp_performance.csv                  |
| `/riskstatus`                   | ‚úÖ     | –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç paused symbols, streaks                |
| `/shutdown`, `/panic`           | ‚úÖ     | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –±–æ—Ç–∞                        |
| `/help`, `/backups`, `/restore` | ‚úÖ     | –í—Å–µ –∫–æ–º–∞–Ω–¥—ã —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω—ã —á–µ—Ä–µ–∑ COMMAND_REGISTRY |

---

## üõ† Dev / Debug / Logs

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç                                     | –°—Ç–∞—Ç—É—Å | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π                                         |
| --------------------------------------------- | ------ | --------------------------------------------------- |
| `ip_monitor.py`                               | ‚úÖ     | Telegram-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø—Ä–∏ —Å–º–µ–Ω–µ IP                   |
| `debug_monitoring_summary.json`               | ‚úÖ     | –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –≤ debug_tools.py                     |
| `entry_logger.py`                             | ‚úÖ     | –õ–æ–≥–∏—Ä—É–µ—Ç –≤—Ö–æ–¥—ã, min_profit, commission, exit_reason |
| `missed_signal_logger.py`                     | ‚úÖ     | –í—Å–µ –æ—Ç–∫–∞–∑—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è —Å breakdown + reason         |
| `parameter_history.json`                      | ‚úÖ     | runtime_config –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ª–æ–≥–∏—Ä—É—é—Ç—Å—è                |
| `fetch_debug.json`, `valid_usdc_symbols.json` | ‚úÖ     | –û–±–Ω–æ–≤–ª—è—é—Ç—Å—è –≤ —Ä–∞–º–∫–∞—Ö fetch_data_multiframe, scanner |

---

## üßπ Refactor & –û—á–∏—Å—Ç–∫–∞

| –ë–ª–æ–∫                                                 | –°—Ç–∞—Ç—É—Å | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π                                              |
| ---------------------------------------------------- | ------ | -------------------------------------------------------- |
| –£–¥–∞–ª–µ–Ω–∏–µ score, HTF, aggressiveness, symbol_activity | ‚úÖ     | –£–¥–∞–ª–µ–Ω—ã –∏–∑ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤                          |
| –£–¥–∞–ª–µ–Ω–∏–µ ip_commands.py                              | ‚úÖ     | Telegram-–∫–æ–º–∞–Ω–¥—ã —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω—ã –≤ `telegram_commands.py` |
| Telegram fallback                                    | ‚úÖ     | –í—Å–µ send_telegram_message(...) –∑–∞—â–∏—â–µ–Ω—ã –æ—Ç –∫—Ä–∞—à–µ–π        |
| –û—á–∏—Å—Ç–∫–∞ main.py                                      | ‚úÖ     | –ò–º–ø–æ—Ä—Ç—ã, fallback, init, —Å–∏–≥–Ω–∞–ª—ã ‚Äî –∫–æ–º–ø–∞–∫—Ç–Ω–æ –∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ |

---

## ‚úÖ –°—Ç–∞—Ç—É—Å: Core Bot –∑–∞–≤–µ—Ä—à—ë–Ω

-   –í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Å–ª–æ–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã
-   –õ–æ–≥–∏–∫–∞ —É—Å—Ç–æ–π—á–∏–≤–∞, Telegram-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å—Ç–∞–±–∏–ª—å–Ω—ã–π
-   Risk/TP/SL —Å–ª–æ–∏ –ø—Ä–æ–∑—Ä–∞—á–Ω—ã –∏ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω—ã
-   –ì–æ—Ç–æ–≤ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—é

–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏: –∑–∞–ø—É—Å–∫ OptiScalp A/B, –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ 3‚Äì9 –±–æ—Ç–æ–≤, WebSocket –∏–ª–∏ grid/funding —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏.

üìå –î–æ–∫—É–º–µ–Ω—Ç –æ—Ç—Ä–∞–∂–∞–µ—Ç –∏—Ç–æ–≥–æ–≤—É—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é OptiFlow Core v2.9 Final (UltraClaude).
–ì–æ—Ç–æ–≤ –∫ –∑–∞–ø—É—Å–∫—É 24/7 –≤ —Ä–µ–∂–∏–º–µ real.

## Potential for future scalping bots to consider as an option

–î–∞, –ø–æ–º–Ω—é. –ú—ã —Ä–∞–Ω–µ–µ –∫–æ—Å–≤–µ–Ω–Ω–æ –æ–±—Å—É–∂–¥–∞–ª–∏ WebSocket, –∫–æ–≥–¥–∞ –∑–∞—Ç—Ä–∞–≥–∏–≤–∞–ª–∏:

üîÑ –ó–∞–¥–µ—Ä–∂–∫–∏ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ fetch_ohlcv() —á–µ—Ä–µ–∑ REST;

üí¨ –ò–¥–µ—é –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å WebSocket –¥–ª—è –æ–Ω–ª–∞–π–Ω-–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏–ª–∏ –±—ã—Å—Ç—Ä–æ–π —Ä–µ–∞–∫—Ü–∏–∏ –Ω–∞ —Ü–µ–Ω—É;

üß™ –ù–æ —Ç–æ–≥–¥–∞ —Ä–µ—à–∏–ª–∏ –æ—Ç–ª–æ–∂–∏—Ç—å, –ø–æ—Ç–æ–º—É —á—Ç–æ:

REST-–ø–æ–¥—Ö–æ–¥ –±—ã–ª —Å—Ç–∞–±–∏–ª—å–Ω—ã–º;

—Ç—ã —Ñ–æ–∫—É—Å–∏—Ä–æ–≤–∞–ª—Å—è –Ω–∞ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏, TP, Telegram –∏ –∑–∞—â–∏—Ç–µ;

WebSocket —Ç—Ä–µ–±–æ–≤–∞–ª –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã (—Å–æ–±—ã—Ç–∏—è, –±—É—Ñ–µ—Ä—ã, –∞–≤—Ç–æ-—Ä–µ–∫–æ–Ω–Ω–µ–∫—Ç).

üß† –ß—Ç–æ –±—ã WebSocket –¥–∞–ª —Å–µ–π—á–∞—Å?
–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ù—É–∂–Ω–æ –ª–∏ —Ç–µ–±–µ? –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
üìà –û–Ω–ª–∞–π–Ω-—Ç—Ä–∏–≥–≥–µ—Ä TP1/SL üü° –ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –°–µ–π—á–∞—Å TP-–º–æ–Ω–∏—Ç–æ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç —Å REST-–∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º (polling); WebSocket –º–æ–≥ –±—ã —É—Å–∫–æ—Ä–∏—Ç—å
‚ö° –ë—ã—Å—Ç—Ä—ã–π –≤—Ö–æ–¥ –Ω–∞ –ø—Ä–æ–±–æ–π üü¢ –ï—Å–ª–∏ –ø–æ–π–¥—ë—à—å –≤ OptiScalp B/C –¢–æ–≥–¥–∞ WebSocket –º–æ–∂–µ—Ç –¥–∞—Ç—å –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ
üìä Live-–¥–∞–Ω–Ω—ã–µ –≤ Dashboard –∏–ª–∏ UI ‚ùå –ü–æ–∫–∞ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è Telegram –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–∫—Ä—ã–≤–∞–µ—Ç —Ç–µ–∫—É—â–µ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
üßØ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ üü° –ù–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –ü–æ–∫–∞ —Ö–≤–∞—Ç–∞–µ—Ç –ª–æ–≥–∏–∫–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ safe_close_trade() –ø–æ REST

üîç –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤ Binance
Binance –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç WebSocket —á–µ—Ä–µ–∑:

wss://fstream.binance.com/ws ‚Äî –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–∞:

aggTrade (–∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–¥–µ–ª–∫–∏)

kline_1m, kline_5m (—Å–≤–µ—á–∏)

markPriceUpdate, bookTicker, depth

üì¶ –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ websockets, aiohttp –∏–ª–∏ ccxt.pro

üîß –•–æ—á–µ—à—å ‚Äî –º–æ–∂–Ω–æ –≤–Ω–µ–¥—Ä–∏—Ç—å:
websocket_monitor.py –¥–ª—è TP/SL –ø–æ markPriceUpdate;

–∏–ª–∏ ws_price_listener.py –¥–ª—è scalping trigger'–æ–≤.

‚úÖ –†–µ–∑—é–º–µ:
–¢—ã –Ω–µ —É–ø—É—Å—Ç–∏–ª –Ω–∏—á–µ–≥–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ–≥–æ, WebSocket –ø–æ–∫–∞ –Ω–µ –Ω—É–∂–µ–Ω –¥–ª—è —Ç–µ–∫—É—â–µ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã.
–ù–æ –µ—Å–ª–∏ —Ç—ã:

üü¢ –Ω–∞—á–Ω—ë—à—å —Å–∫–∞–ª—å–ø–∏–Ω–≥-–±–æ—Ç–æ–≤ —Å –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º 5‚Äì15 —Å–µ–∫

üîÅ —Ö–æ—á–µ—à—å —Ä–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å –Ω–µ —Å –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º 10 —Å–µ–∫, –∞ –ø–æ tick'—É
‚Üí WebSocket —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –æ—Å–º—ã—Å–ª–µ–Ω–Ω—ã–º —É–ª—É—á—à–µ–Ω–∏–µ–º.

---
