# üìä –û—Ç—á–µ—Ç –æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ API –∫–ª—é—á–µ–π –∏ Position History Reporter

## üéØ –¶–µ–ª—å
–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º—É –ø–æ–ª—É—á–µ–Ω–∏—è —Å–≤–æ–¥–∫–∏ –ø–æ–∑–∏—Ü–∏–π –∏–∑ Binance API —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Ä–µ–∞–ª—å–Ω—ã—Ö API –∫–ª—é—á–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏

### 1. üîë –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ API –∫–ª—é—á–µ–π
- **–û–±–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã** —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ API –∫–ª—é—á–∞–º–∏:
  - `data/runtime_config_aggressive.json`
  - `data/runtime_config_safe.json`
  - `data/runtime_config_test.json`

### 2. üîß API –∫–ª—é—á–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```
API_KEY=w2LwaYZq0x1t50ARb3IP69y9XQLssukr78dSnFcQF9XfbngkELA8hprvtTPAhX5S
API_SECRET=hmG7FVUeyQ8wK09596iDJE8ipQqWvpdlRZ8obwAnCwOa8qlZyHyO9fTvr6oQvMFD
TELEGRAM_TOKEN=7681205697:AAFB1FogqFMgoTgcu2vkDOmdcd-FYW4YdbU
TELEGRAM_CHAT_ID=383821734
```

### 3. üìä Position History Reporter
- **–°–æ–∑–¥–∞–Ω –º–æ–¥—É–ª—å** `core/position_history_reporter.py`
- **–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –∫–ª–∞—Å—Å—ã**:
  - `TradePosition` - –¥–∞–Ω–Ω—ã–µ –æ —Ç–æ—Ä–≥–æ–≤–æ–π –ø–æ–∑–∏—Ü–∏–∏
  - `PositionSummary` - —Å–≤–æ–¥–∫–∞ –ø–æ –ø–æ–∑–∏—Ü–∏—è–º
  - `PositionHistoryReporter` - –æ—Å–Ω–æ–≤–Ω–æ–π —Ä–µ–ø–æ—Ä—Ç–µ—Ä

### 4. üîå API –º–µ—Ç–æ–¥—ã Binance
- ‚úÖ `get_user_trades()` - –∏—Å—Ç–æ—Ä–∏—è —Å–¥–µ–ª–æ–∫
- ‚úÖ `get_position_risk()` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–∑–∏—Ü–∏—è—Ö (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç `fetch_positions`)
- ‚úÖ `get_income_history()` - funding fees –∏ –¥–æ—Ö–æ–¥—ã
- ‚úÖ `get_account_info()` - –¥–∞–Ω–Ω—ã–µ –∞–∫–∫–∞—É–Ω—Ç–∞ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç `fetch_balance`)

### 5. üìà –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –±–æ—Ç–∞
- **–û–±–Ω–æ–≤–ª–µ–Ω `main.py`** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ
- **–î–æ–±–∞–≤–ª–µ–Ω–∞ Telegram –∫–æ–º–∞–Ω–¥–∞** `/position_history [hours]`
- **–û–±–Ω–æ–≤–ª–µ–Ω—ã –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥** –≤ `telegram/command_handlers.py`
- **–û–±–Ω–æ–≤–ª–µ–Ω Telegram –±–æ—Ç** –≤ `telegram/telegram_bot.py`

### 6. üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ **API –∫–ª—é—á–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ**
- ‚úÖ **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Binance —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ**
- ‚úÖ **–ü–æ–ª—É—á–µ–Ω–∏–µ —Å–¥–µ–ª–æ–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç** (0 —Å–¥–µ–ª–æ–∫ - –Ω–æ—Ä–º–∞–ª—å–Ω–æ, –µ—Å–ª–∏ –Ω–µ –±—ã–ª–æ —Ç–æ—Ä–≥–æ–≤–ª–∏)
- ‚úÖ **–ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–π —Ä–∞–±–æ—Ç–∞–µ—Ç** (544 –ø–æ–∑–∏—Ü–∏–∏, 0 –æ—Ç–∫—Ä—ã—Ç—ã—Ö)
- ‚úÖ **–ü–æ–ª—É—á–µ–Ω–∏–µ –¥–æ—Ö–æ–¥–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç** (1 –∑–∞–ø–∏—Å—å - TRANSFER)
- ‚úÖ **–ü–æ–ª—É—á–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç** (USDT: 0.0, BTC: 0.00107284)

## üîç –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:
- **–ü—É–±–ª–∏—á–Ω—ã–µ API** - –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ
- **–ü—Ä–∏–≤–∞—Ç–Ω—ã–µ API** - –∫–ª—é—á–∏ –≤–∞–ª–∏–¥–Ω—ã–µ
- **Futures API - –ü–æ–∑–∏—Ü–∏–∏ (fetch_positions)** - —Ä–∞–±–æ—Ç–∞–µ—Ç
- **Futures API - –î–æ—Ö–æ–¥—ã (fapiPrivateGetIncome)** - —Ä–∞–±–æ—Ç–∞–µ—Ç
- **Futures API - –°–¥–µ–ª–∫–∏ (fapiPrivateGetUserTrades)** - —Ä–∞–±–æ—Ç–∞–µ—Ç

### ‚ùå –ß—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:
- **Futures API - –ü–æ–∑–∏—Ü–∏–∏ (fapiPrivateGetPositionRisk)** - 404 (–∑–∞–º–µ–Ω–µ–Ω –Ω–∞ `fetch_positions`)
- **Futures API - –ê–∫–∫–∞—É–Ω—Ç (fapiPrivateGetAccount)** - 404 (–∑–∞–º–µ–Ω–µ–Ω –Ω–∞ `fetch_balance`)

## üìã –ü–æ–ª–µ–∑–Ω—ã–µ Binance API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

### ‚úÖ –†–∞–±–æ—Ç–∞—é—â–∏–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:
- **GET /fapi/v1/userTrades** - —Å–¥–µ–ª–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **GET /fapi/v1/income** - –∏—Å—Ç–æ—Ä–∏—è –¥–æ—Ö–æ–¥–æ–≤
- **GET /fapi/v1/positions** - –ø–æ–∑–∏—Ü–∏–∏ (—á–µ—Ä–µ–∑ `fetch_positions`)
- **GET /fapi/v1/balance** - –±–∞–ª–∞–Ω—Å (—á–µ—Ä–µ–∑ `fetch_balance`)

### ‚ùå –ù–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:
- **GET /fapi/v1/positionRisk** - 404 Not Found
- **GET /fapi/v1/account** - 404 Not Found

## üéØ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### üìä Position History Reporter –º–æ–∂–µ—Ç:
- ‚úÖ –ü–æ–ª—É—á–∞—Ç—å —Ç–æ—á–Ω—É—é —Å–≤–æ–¥–∫—É –ø–æ–∑–∏—Ü–∏–π –∏–∑ Binance API
- ‚úÖ –ü–µ—Ä–µ–ø—Ä–æ–≤–µ—Ä—è—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ —Ä–∞–Ω—É –ø–µ—Ä–µ–¥ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ–º
- ‚úÖ –£—á–∏—Ç—ã–≤–∞—Ç—å –≤—Å–µ –∫–æ–º–∏—Å—Å–∏–∏ –∏ funding fees
- ‚úÖ –ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–æ —Å–∏–º–≤–æ–ª–∞–º
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—É `/position_history` –≤ Telegram
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –æ—Ç—á–µ—Ç—ã –ø—Ä–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ

### üì± Telegram –∫–æ–º–∞–Ω–¥—ã:
- `/position_history [hours]` - –ø–æ–ª—É—á–∏—Ç—å —Å–≤–æ–¥–∫—É –ø–æ–∑–∏—Ü–∏–π –∑–∞ —É–∫–∞–∑–∞–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–∞—Å–æ–≤

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ –∫–æ–¥–µ:
1. **–ó–∞–º–µ–Ω–∏–ª `fapiPrivateGetPositionRisk` –Ω–∞ `fetch_positions`**
2. **–ó–∞–º–µ–Ω–∏–ª `fapiPrivateGetAccount` –Ω–∞ `fetch_balance`**
3. **–î–æ–±–∞–≤–∏–ª –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–µ–≥–æ –∞—Ç—Ä–∏–±—É—Ç–∞ `use_testnet`**

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:
- **–†–µ–∂–∏–º**: Production
- **Testnet**: False
- **API –∫–ª—é—á–∏**: –†–µ–∞–ª—å–Ω—ã–µ –∫–ª—é—á–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **Telegram**: –ù–∞—Å—Ç—Ä–æ–µ–Ω —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ —Ç–æ–∫–µ–Ω–∞–º–∏

## üöÄ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

### ‚úÖ –°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞:
- API –∫–ª—é—á–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- Position History Reporter —Ä–∞–±–æ—Ç–∞–µ—Ç
- Telegram –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞
- –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç —É—Å–ø–µ—à–Ω–æ

### üìä –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
- –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–≤–æ–¥–∫–∏ –ø–æ–∑–∏—Ü–∏–π –∏–∑ Binance API
- –ê–Ω–∞–ª–∏–∑ —Ç–æ—Ä–≥–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- Telegram –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –æ—Ç—á–µ—Ç–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–æ–≤ –ø—Ä–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ –±–æ—Ç–∞

## üéâ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**–°–∏—Å—Ç–µ–º–∞ Position History Reporter —É—Å–ø–µ—à–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞!**

- ‚úÖ API –∫–ª—é—á–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã
- ‚úÖ Telegram –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

–¢–µ–ø–µ—Ä—å –±–æ—Ç –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∞—Ç—å —Ç–æ—á–Ω—É—é —Å–≤–æ–¥–∫—É –ø–æ–∑–∏—Ü–∏–π –∏–∑ Binance API –¥–ª—è –ø–µ—Ä–µ–ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ —Ä–∞–Ω—É! üöÄ
