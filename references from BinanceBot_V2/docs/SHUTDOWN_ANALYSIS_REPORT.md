# üõë –°–∏—Å—Ç–µ–º–∞ –∞–Ω–∞–ª–∏–∑–∞ –ø—Ä–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ –±–æ—Ç–∞ - –ü–æ–ª–Ω—ã–π –æ–±–∑–æ—Ä

## üéØ **–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ:**

### **1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ –ø—Ä–∏ –ª—é–±–æ–º —Å–ø–æ—Å–æ–±–µ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏:**
- ‚úÖ **Ctrl+C** - –∞–Ω–∞–ª–∏–∑ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è
- ‚úÖ **SIGTERM** - –∞–Ω–∞–ª–∏–∑ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è
- ‚úÖ **stop/shutdown –∫–æ–º–∞–Ω–¥—ã** - –∞–Ω–∞–ª–∏–∑ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è
- ‚úÖ **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏** - –∞–Ω–∞–ª–∏–∑ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è

### **2. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–∏—á–∏–Ω—ã –æ—Å—Ç–∞–Ω–æ–≤–∫–∏:**
- üìã **CTRL+C** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Å—Ç–∞–Ω–æ–≤–∏–ª —á–µ—Ä–µ–∑ Ctrl+C
- üìã **SIGTERM** - —Å–∏—Å—Ç–µ–º–Ω—ã–π —Å–∏–≥–Ω–∞–ª –æ—Å—Ç–∞–Ω–æ–≤–∫–∏
- üìã **UNKNOWN** - –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –ø—Ä–∏—á–∏–Ω–∞

## üìä **–§–∏–Ω–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –≤–∫–ª—é—á–∞–µ—Ç:**

### **–û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏:**
- üí∞ **–û–±—â–∏–π PnL** –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 24 —á–∞—Å–∞
- üìà **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–¥–µ–ª–æ–∫** –∑–∞ –ø–µ—Ä–∏–æ–¥
- ‚úÖ **–í–∏–Ω—Ä–µ–π—Ç** - –ø—Ä–æ—Ü–µ–Ω—Ç –ø—Ä–∏–±—ã–ª—å–Ω—ã—Ö —Å–¥–µ–ª–æ–∫
- üéØ **Performance Score** - –æ–±—â–∞—è –æ—Ü–µ–Ω–∫–∞ —Ä–∞–±–æ—Ç—ã

### **–ê–Ω–∞–ª–∏–∑ –ø–æ —Å–∏–º–≤–æ–ª–∞–º:**
- üèÜ **–õ—É—á—à–∏–π —Å–∏–º–≤–æ–ª** - —Å–∞–º—ã–π –ø—Ä–∏–±—ã–ª—å–Ω—ã–π
- üìâ **–•—É–¥—à–∏–π —Å–∏–º–≤–æ–ª** - —Å–∞–º—ã–π —É–±—ã—Ç–æ—á–Ω—ã–π

### **–°–∏—Å—Ç–µ–º–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è:**
- ‚ö†Ô∏è **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—à–∏–±–æ–∫** - —Å–∏—Å—Ç–µ–º–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã
- ‚ö†Ô∏è **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π** - –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- üí° **–¢–æ–ø-5 —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π** –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã

## üìã **–ü—Ä–∏–º–µ—Ä —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ –æ—Ç—á–µ—Ç–∞:**

```
================================================================================
üõë –§–ò–ù–ê–õ–¨–ù–´–ô –ê–ù–ê–õ–ò–ó –ü–†–ò –û–°–¢–ê–ù–û–í–ö–ï –ë–û–¢–ê
================================================================================

üìã –ü–†–ò–ß–ò–ù–ê –û–°–¢–ê–ù–û–í–ö–ò: CTRL+C
‚è∞ –í–†–ï–ú–Ø –û–°–¢–ê–ù–û–í–ö–ò: 2024-01-15 14:30:25

üìä –†–ï–ó–£–õ–¨–¢–ê–¢–´ –†–ê–ë–û–¢–´ (24—á):
‚Ä¢ –°–¥–µ–ª–æ–∫: 24
‚Ä¢ PnL: $16.80
‚Ä¢ –í–∏–Ω—Ä–µ–π—Ç: 75.0%
‚Ä¢ Score: 78.5/100

üèÜ –õ–£–ß–®–ò–ï/–•–£–î–®–ò–ï –°–ò–ú–í–û–õ–´:
‚Ä¢ –õ—É—á—à–∏–π: BTCUSDC
‚Ä¢ –•—É–¥—à–∏–π: ETHUSDC

‚ö†Ô∏è –°–ò–°–¢–ï–ú–ù–´–ï –°–û–ë–´–¢–ò–Ø:
‚Ä¢ –û—à–∏–±–æ–∫: 2
‚Ä¢ –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π: 5

üí° –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò:
1. ‚úÖ –ü—Ä–∏–±—ã–ª—å–Ω–∞—è —Ç–æ—Ä–≥–æ–≤–ª—è - –ø—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ –≤ —Ç–æ–º –∂–µ –¥—É—Ö–µ
2. ‚úÖ –û—Ç–ª–∏—á–Ω—ã–π –≤–∏–Ω—Ä–µ–π—Ç - —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ö–æ—Ä–æ—à–æ
3. ‚úÖ –í—ã—Å–æ–∫–∏–π profit factor - –æ—Ç–ª–∏—á–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è
4. ‚ö†Ô∏è –ú–Ω–æ–≥–æ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π - –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –ª–æ–≥–∏–∫—É
5. üìà –†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –ø–æ–∑–∏—Ü–∏–π

================================================================================
```

## üìÅ **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ—Ç—á–µ—Ç–æ–≤:**

### **1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ—Ç—á–µ—Ç—ã (–∫–∞–∂–¥—ã–µ 6 —á–∞—Å–æ–≤):**
- **–§–æ—Ä–º–∞—Ç**: JSON —Ñ–∞–π–ª—ã
- **–ò–º—è**: `analysis_report_24h_YYYYMMDD_HHMMSS.json`
- **–ü–∞–ø–∫–∞**: `data/`

### **2. –§–∏–Ω–∞–ª—å–Ω—ã–µ –æ—Ç—á–µ—Ç—ã –ø—Ä–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ:**
- **–§–æ—Ä–º–∞—Ç**: TXT —Ñ–∞–π–ª—ã
- **–ò–º—è**: `final_analysis_CTRL+C_YYYYMMDD_HHMMSS.txt`
- **–ü–∞–ø–∫–∞**: `data/`

### **3. –°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–æ–≤:**
- üìä **–í—Å–µ –º–µ—Ç—Ä–∏–∫–∏** - PnL, –≤–∏–Ω—Ä–µ–π—Ç, score
- üèÜ **–ê–Ω–∞–ª–∏–∑ –ø–æ —Å–∏–º–≤–æ–ª–∞–º** - –ª—É—á—à–∏–µ/—Ö—É–¥—à–∏–µ
- ‚ö†Ô∏è **–°–∏—Å—Ç–µ–º–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è** - –æ—à–∏–±–∫–∏, –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
- üí° **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏** - –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã

## üßπ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞:**

### **–°–∏—Å—Ç–µ–º–∞ –æ—á–∏—Å—Ç–∫–∏ —Å—Ç–∞—Ä—ã—Ö –æ—Ç—á–µ—Ç–æ–≤:**
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞** - –∫–∞–∂–¥—ã–µ 30 –¥–Ω–µ–π
- ‚úÖ **–£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö —Ñ–∞–π–ª–æ–≤** - —Å—Ç–∞—Ä—à–µ 30 –¥–Ω–µ–π
- ‚úÖ **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—á–∏—Å—Ç–∫–∏** - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —É–¥–∞–ª–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–∞—Ö
- ‚úÖ **–ó–∞—â–∏—Ç–∞ –æ—Ç –æ—à–∏–±–æ–∫** - –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ

### **–ß—Ç–æ —É–¥–∞–ª—è–µ—Ç—Å—è:**
- üìÑ **JSON –æ—Ç—á–µ—Ç—ã** - —Å—Ç–∞—Ä—à–µ 30 –¥–Ω–µ–π
- üìÑ **TXT –æ—Ç—á–µ—Ç—ã** - —Å—Ç–∞—Ä—à–µ 30 –¥–Ω–µ–π
- üìä **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ—á–∏—Å—Ç–∫–∏** - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–¥–∞–ª–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

## üì± **Telegram –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:**

### **1. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ:**
```
üõë –ë–æ—Ç –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
–ü—Ä–∏—á–∏–Ω–∞: CTRL+C
PnL: $16.80
Score: 78.5/100
```

### **2. –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏:**
- `/analysis` - –¥–µ—Ç–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç –∑–∞ 24 —á–∞—Å–∞
- `/summary` - –∫—Ä–∞—Ç–∫–∞—è —Å–≤–æ–¥–∫–∞ –∑–∞ 24 —á–∞—Å–∞
- `/reports` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –æ—Ç—á–µ—Ç–∞—Ö

### **3. –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –æ—Ç—á–µ—Ç–∞—Ö:**
```
üìÅ –ò–ù–§–û–†–ú–ê–¶–ò–Ø –û–ë –û–¢–ß–ï–¢–ê–•:

üìä –í—Å–µ–≥–æ –æ—Ç—á–µ—Ç–æ–≤: 15
üíæ –û–±—â–∏–π —Ä–∞–∑–º–µ—Ä: 2.45 MB

üìã –ü–û–°–õ–ï–î–ù–ò–ï –û–¢–ß–ï–¢–´:
1. final_analysis_CTRL+C_20240115_143025.txt
   üìÑ –¢–∏–ø: TXT
   üíæ –†–∞–∑–º–µ—Ä: 0.15 MB
   ‚è∞ –ò–∑–º–µ–Ω–µ–Ω: 2024-01-15 14:30:25

2. analysis_report_24h_20240115_120000.json
   üìÑ –¢–∏–ø: JSON
   üíæ –†–∞–∑–º–µ—Ä: 0.12 MB
   ‚è∞ –ò–∑–º–µ–Ω–µ–Ω: 2024-01-15 12:00:00
```

## üîß **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:**

### **1. Graceful Shutdown:**
```python
def signal_handler(signum, frame):
    # –û–ø—Ä–µ–¥–µ–ª—è–µ–º –ø—Ä–∏—á–∏–Ω—É –æ—Å—Ç–∞–Ω–æ–≤–∫–∏
    shutdown_reason = "CTRL+C" if signum == signal.SIGINT else "SIGTERM"

    # –í—ã–ø–æ–ª–Ω—è–µ–º —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑
    asyncio.run(generate_final_analysis(shutdown_reason))
```

### **2. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:**
```python
# –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º
globals()['post_run_analyzer'] = post_run_analyzer
globals()['logger'] = logger
globals()['telegram_bot'] = telegram_bot
```

### **3. –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö —Ñ–∞–π–ª–æ–≤:**
```python
async def _cleanup_old_reports(self, days_to_keep: int = 30):
    # –ù–∞—Ö–æ–¥–∏–º —Ñ–∞–π–ª—ã —Å—Ç–∞—Ä—à–µ N –¥–Ω–µ–π
    # –ë–µ–∑–æ–ø–∞—Å–Ω–æ —É–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–µ –æ—Ç—á–µ—Ç—ã
    # –õ–æ–≥–∏—Ä—É–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ—á–∏—Å—Ç–∫–∏
```

## ‚úÖ **–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã:**

### **–í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç:**
- ‚úÖ **Graceful shutdown** - –∞–Ω–∞–ª–∏–∑ –ø—Ä–∏ –ª—é–±–æ–π –æ—Å—Ç–∞–Ω–æ–≤–∫–µ
- ‚úÖ **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–∏—á–∏–Ω—ã** - CTRL+C, SIGTERM, UNKNOWN
- ‚úÖ **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ—Ç—á–µ—Ç–æ–≤** - JSON –∏ TXT —Ñ–∞–π–ª—ã
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞** - –∫–∞–∂–¥—ã–µ 30 –¥–Ω–µ–π
- ‚úÖ **Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** - –ø—Ä–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ
- ‚úÖ **–ö–æ–º–∞–Ω–¥—ã –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞** - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –æ—Ç—á–µ—Ç–∞—Ö

### **–ß—Ç–æ –≤—ã –ø–æ–ª—É—á–∏—Ç–µ:**
1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑** –ø—Ä–∏ –ª—é–±–æ–π –æ—Å—Ç–∞–Ω–æ–≤–∫–µ –±–æ—Ç–∞
2. **–§–∏–Ω–∞–ª—å–Ω—ã–µ –æ—Ç—á–µ—Ç—ã** —Å –ø—Ä–∏—á–∏–Ω–æ–π –æ—Å—Ç–∞–Ω–æ–≤–∫–∏
3. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã** –≤ –ø–∞–ø–∫–µ `data/`
4. **Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏
5. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞** —Å—Ç–∞—Ä—ã—Ö –æ—Ç—á–µ—Ç–æ–≤
6. **–ö–æ–º–∞–Ω–¥—ã –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞** –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± –æ—Ç—á–µ—Ç–∞—Ö

**–°–∏—Å—Ç–µ–º–∞ –∞–Ω–∞–ª–∏–∑–∞ –ø—Ä–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–∞ –∏ –±—É–¥–µ—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—Ç—å –¥–µ—Ç–∞–ª—å–Ω—É—é –∞–Ω–∞–ª–∏—Ç–∏–∫—É –ø—Ä–∏ –ª—é–±–æ–º —Å–ø–æ—Å–æ–±–µ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –±–æ—Ç–∞!**
